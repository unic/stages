!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash/get"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("react"),require("lodash/findindex"),require("core-js/modules/es.json.stringify.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("json-beautify"),require("core-js/modules/es.array.reverse.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.number.to-fixed.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.regexp.constructor.js"),require("core-js/modules/es.regexp.test.js"),require("core-js/modules/es.string.ends-with.js"),require("core-js/modules/es.string.starts-with.js"),require("lodash/find"),require("lodash/sortby"),require("lodash/uniqwith"),require("lodash/isequal"),require("lodash/set"),require("lodash/unset"),require("lodash/merge"),require("fast-json-stable-stringify")):"function"==typeof define&&define.amd?define(["exports","lodash/get","core-js/modules/es.object.assign.js","core-js/modules/web.dom-collections.iterator.js","react","lodash/findindex","core-js/modules/es.json.stringify.js","core-js/modules/es.regexp.to-string.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.split.js","json-beautify","core-js/modules/es.array.reverse.js","core-js/modules/es.array.sort.js","core-js/modules/es.number.to-fixed.js","core-js/modules/es.promise.js","core-js/modules/es.regexp.constructor.js","core-js/modules/es.regexp.test.js","core-js/modules/es.string.ends-with.js","core-js/modules/es.string.starts-with.js","lodash/find","lodash/sortby","lodash/uniqwith","lodash/isequal","lodash/set","lodash/unset","lodash/merge","fast-json-stable-stringify"],t):t((e||self).reactStages={},e.get,0,0,e.react,e.findIndex,0,0,0,0,e.jsonBeautify,0,0,0,0,0,0,0,0,e.find,e.sortBy,e.uniqWith,e.isEqual,e.set,e.unset,e.merge,e.fastJsonStableStringify)}(this,function(e,t,a,i,n,o,s,l,r,d,f,c,u,p,y,g,m,h,b,v,O,j,E,x,S,w,A){function C(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var D=/*#__PURE__*/C(t),k=/*#__PURE__*/C(n),F=/*#__PURE__*/C(o),V=/*#__PURE__*/C(f),q=/*#__PURE__*/C(v),R=/*#__PURE__*/C(O),T=/*#__PURE__*/C(j),P=/*#__PURE__*/C(E),I=/*#__PURE__*/C(x),L=/*#__PURE__*/C(S),W=/*#__PURE__*/C(w),N=/*#__PURE__*/C(A);function z(e){var t={exports:{}};return e(t,t.exports),t.exports}var $="function"==typeof Symbol&&Symbol.for,_=$?Symbol.for("react.element"):60103,B=$?Symbol.for("react.portal"):60106,H=$?Symbol.for("react.fragment"):60107,U=$?Symbol.for("react.strict_mode"):60108,M=$?Symbol.for("react.profiler"):60114,J=$?Symbol.for("react.provider"):60109,G=$?Symbol.for("react.context"):60110,K=$?Symbol.for("react.async_mode"):60111,X=$?Symbol.for("react.concurrent_mode"):60111,Y=$?Symbol.for("react.forward_ref"):60112,Q=$?Symbol.for("react.suspense"):60113,Z=$?Symbol.for("react.suspense_list"):60120,ee=$?Symbol.for("react.memo"):60115,te=$?Symbol.for("react.lazy"):60116,ae=$?Symbol.for("react.block"):60121,ie=$?Symbol.for("react.fundamental"):60117,ne=$?Symbol.for("react.responder"):60118,oe=$?Symbol.for("react.scope"):60119;function se(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case _:switch(e=e.type){case K:case X:case H:case M:case U:case Q:return e;default:switch(e=e&&e.$$typeof){case G:case Y:case te:case ee:case J:return e;default:return t}}case B:return t}}}function le(e){return se(e)===X}var re={AsyncMode:K,ConcurrentMode:X,ContextConsumer:G,ContextProvider:J,Element:_,ForwardRef:Y,Fragment:H,Lazy:te,Memo:ee,Portal:B,Profiler:M,StrictMode:U,Suspense:Q,isAsyncMode:function(e){return le(e)||se(e)===K},isConcurrentMode:le,isContextConsumer:function(e){return se(e)===G},isContextProvider:function(e){return se(e)===J},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===_},isForwardRef:function(e){return se(e)===Y},isFragment:function(e){return se(e)===H},isLazy:function(e){return se(e)===te},isMemo:function(e){return se(e)===ee},isPortal:function(e){return se(e)===B},isProfiler:function(e){return se(e)===M},isStrictMode:function(e){return se(e)===U},isSuspense:function(e){return se(e)===Q},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===H||e===X||e===M||e===U||e===Q||e===Z||"object"==typeof e&&null!==e&&(e.$$typeof===te||e.$$typeof===ee||e.$$typeof===J||e.$$typeof===G||e.$$typeof===Y||e.$$typeof===ie||e.$$typeof===ne||e.$$typeof===oe||e.$$typeof===ae)},typeOf:se};function de(){}function fe(){}z(function(e,t){}),z(function(e){e.exports=re}),fe.resetWarningCache=de;var ce=z(function(e){e.exports=function(){function e(e,t,a,i,n,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fe,resetWarningCache:de};return a.PropTypes=a,a}()});const ue=function(e,t,a){if(void 0===a&&(a="stages-form-"),"local"===t&&"undefined"!=typeof localStorage||"session"===t&&"undefined"!=typeof sessionStorage){const t=localStorage.getItem(""+a+e)||"{}";let i={};try{i=JSON.parse(t)}catch(e){}return i}return{}},pe=function(e,t,a,i){if(void 0===t&&(t={}),void 0===i&&(i="stages-form-"),("local"===a&&"undefined"!=typeof localStorage||"session"===a&&"undefined"!=typeof sessionStorage)&&"object"==typeof t){let a="{}";try{a=JSON.stringify(t)}catch(e){}localStorage.setItem(""+i+e,a)}},ye=function(e,t,a){void 0===a&&(a="stages-form-"),("local"===t&&"undefined"!=typeof localStorage||"session"===t&&"undefined"!=typeof sessionStorage)&&localStorage.removeItem(""+a+e)},ge=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,me=e=>{let{children:t,initialData:a,initialStep:i,render:o,validateOnStepChange:s,onChange:l,autoSave:r,id:d}=e;const[f]=n.useState("stages-"+(d||+new Date)),[c,u]=n.useState((()=>{if(!d||"local"!==r&&"session"!==r&&("object"!=typeof r||"local"!==r.type&&"session"!==r.type)){if(d&&"object"==typeof r&&"custom"===r.type&&"function"==typeof r.get){const e=r.get(d);if(Object.keys(e).length>0)return e}}else{const e=ue(d,"object"==typeof r?r.type:r);if(Object.keys(e).length>0)return e}return a})()),[p,y]=n.useState([]),[g,m]=n.useState({}),[h,b]=n.useState(i||0),[v,O]=n.useState([]),j=e=>{const t=v&&v[e]?v[e].key:e;return c&&c[t]?c[t]:{}},E=(e,t)=>(v[t]||(v[t]={key:e,visible:!0},O([...v])),e),x=(e,t,a)=>{const i=Object.assign({},c),n=v&&v[a]?v[a].key:a;ge()&&window.stagesLogging('Handle onChange for "'+n+'"',f),g[a]=t,m(Object.assign({},g)),i[n]=e,c[n]=e,u(Object.assign({},i)),"function"==typeof l&&l({data:i,errors:g}),d&&("local"===r||"session"===r?0===Object.keys(g).length&&pe(d,i,r):"object"!=typeof r||"local"!==r.type&&"session"!==r.type?d&&"object"==typeof r&&"custom"===r.type&&"function"==typeof r.save&&(r.validDataOnly&&0===Object.keys(g).length||!r.validDataOnly)&&r.save(d,i):(r.validDataOnly&&0===Object.keys(g).length||!r.validDataOnly)&&pe(d,i,r.type))},S=()=>{d&&("local"!==r&&"session"!==r||ye(d,r),"object"!=typeof r||"local"!==r.type&&"session"!==r.type||ye(d,r.type),d&&"object"==typeof r&&"custom"===r.type&&"function"==typeof r.remove&&r.remove(d)),u(a),b(0),"function"==typeof l&&l({data:a,errors:g})};n.useEffect(()=>{ge()&&(!d||"local"!==r&&"session"!==r&&("object"!=typeof r||"local"!==r.type&&"session"!==r.type)?d&&"object"==typeof r&&"custom"===r.type&&"function"==typeof r.get?window.stagesLogging({id:f,keys:v,data:c,initialData:a,initialStep:i,errors:g,currentStep:h,savedData:r.get(d)}):window.stagesLogging({id:f,keys:v,data:c,initialData:a,initialStep:i,errors:g,currentStep:h,savedData:{}}):window.stagesLogging({id:f,keys:v,data:c,initialData:a,initialStep:i,errors:g,currentStep:h,savedData:ue(d,"object"==typeof r?r.type:r)}))},[v,c,g,h]),n.useEffect(()=>{ge()&&window.stagesLogging("Init Stages",f),t.map((e,t)=>e({index:t,setStepKey:E,initializing:!0})).filter(e=>e)},[]),n.useEffect(()=>{if(s){const e=A();e<h&&b(-1===e?0:e+1)}y(t.map((e,t)=>e({data:j(t),allData:c,onChange:x,reset:S,onNav:w,isActive:t===h,index:t,errors:g[t]||{},setStepKey:E})).filter((e,t)=>{const a=null!==e;return v[t]&&(v[t].visible=a),a}))},[h,c]);const w=(e,t)=>{let a=h;if(ge()&&window.stagesLogging('On nav "'+e+'" -> "'+t+'"',f),"next"===e){let e=!1;for(let t=h+1;t<v.length;t++)v[t].visible&&!e&&(a=t,e=!0)}if("prev"===e){let e=!1;for(let t=h-1;t>=0;t--)v[t].visible&&!e&&(a=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<v.length;t++)v[t].visible&&!e&&(a=t,e=!0)}if("last"===e){let e=!1;for(let t=v.length-1;t>=0;t--)v[t].visible&&!e&&(a=t,e=!0)}if("lastValid"===e&&(a=A()),"step"===e&&v[t]&&v[t].visible)a=Number(t);else if("step"===e&&"string"==typeof t){const e=F.default(v,{key:t});e>-1&&(a=e)}a<0&&(a=0),a>v.length&&(a=v.length),b(a)},A=()=>{let e=-1,t=!1;return Object.keys(g).forEach(a=>{const i=F.default(v,{key:a});(0===Object.keys(g[a]).length||i>-1&&!v[i].visible)&&!t?e=Number(a):t=!0}),e};return 0===p.length?null:o?o({navigationProps:{currentStep:h,data:c,onChangeStep:e=>{const t=A();ge()&&window.stagesLogging('On change step "'+e+'"',f),("number"==typeof t&&"number"==typeof e&&t+1>=e||!1===s)&&b(e)},errors:g,keys:v,stepCount:p.length,lastValidStep:A(),reset:S},progressionProps:(()=>{const e=p.length,t=A();let a=0;return Object.keys(g).forEach((e,i)=>{const n=j(i);i<=t&&0===Object.keys(g[i]).length&&Object.keys(n).length>0&&a++}),{currentStep:h,stepCount:e,validSteps:a,percentage:100/e*a,data:c,errors:g}})(),routerProps:{step:h,onChange:b,keys:v},steps:p}):null};me.propTypes={children:ce.arrayOf(ce.oneOfType([ce.node,ce.func])).isRequired,initialData:ce.object,render:ce.oneOfType([ce.node,ce.func]).isRequired,initialStep:ce.number,validateOnStepChange:ce.bool,id:ce.oneOfType([ce.string,ce.number])},me.defaultProps={initialData:{},validateOnStepChange:!0,autoSave:!1};const he=(e,t,a)=>a&&Array.isArray(e)?"number"===t?e.map(e=>Number(e)):"string"===t?e.map(e=>String(e)):"boolean"===t?e.map(e=>Boolean(e)):"date"===t?e.map(e=>new Date(e)):e:"number"===t?Number(e):"string"===t?String(e):"boolean"===t?Boolean(e):"date"===t?new Date(e):e,be=(e,t)=>{const a={};return Object.keys(t).forEach(i=>{a[i]=void 0!==e[i]?e[i]:t[i].default,void 0===e[i]&&t[i].required&&console.warn('Param "'+i+'" is required but is missing in field configs!'),void 0!==e[i]&&typeof e[i]!==t[i].type&&console.warn('Param "'+i+'" is not of type "'+t[i].type+'"!')}),a},ve={};let Oe,je,Ee,xe=0;const Se={},we=e=>{let{config:t,data:a,render:i,renderFields:o,fields:s,onChange:l,isVisible:r,isDisabled:d,id:f,onValidation:c,parentRunValidation:u,validateOn:p,throttleWait:y,customEvents:g,enableUndo:m,undoMaxDepth:h,customRuleHandlers:b,autoSave:v,typeValidations:O,fieldsets:j,initialInterfaceState:E,hashSeparator:x}=e;const S=n.useRef(!1),[w,A]=n.useState(E),C=Object.assign({},a);W.default(C,w);const[V]=n.useState("form-"+(f||"noid")+"-"+ +new Date),[z,$]=n.useState(!1),[_,B]=n.useState({}),[H,U]=n.useState(!1),[M,J]=n.useState([]),[G,K]=n.useState(0),[X,Y]=n.useState(!1),[Q,Z]=n.useState(!1),[ee,te]=n.useState({}),[ae,ie]=n.useState({}),[ne,oe]=n.useState(),[se,le]=n.useState({}),[re,de]=n.useState(!1),[fe,ce]=n.useState(""),[me,Ae]=n.useState(""),[Ce,De]=n.useState([]),[ke,Fe]=n.useState({}),Ve=((e,t,a,i,n,o)=>{let s="function"==typeof e.fields?e.fields(t,a,i):"function"==typeof e?e(t,a,i):Array.isArray(e)?e:[];const l=n=>{if("string"==typeof n&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[n])return e.fieldConfigs[n](t,a,i);if("object"==typeof n&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[n.type]){const o=e.fieldConfigs[n.type](t,a,i);return Object.assign({},o,n,{type:o.type})}return"object"==typeof n&&o[n.type]?{id:n.id,type:"fieldset",fieldset:n.type,fields:o[n.type].config({data:t,asyncData:a,interfaceState:i,params:be(n.params||{},o[n.type].params)}),params:n.params}:"function"==typeof n?n(t,a,i):n};return s=s.map(e=>("object"!=typeof e||"group"!==e.type&&"collection"!==e.type&&"fieldset"!==e.type||!Array.isArray(e.fields)||(e.fields=e.fields.map(e=>l(e))),"object"==typeof e&&"wizard"===e.type&&Array.isArray(e.stages)&&(e.stages=e.stages.map(e=>l(e))),l(e))),n.forEach(e=>{const i=D.default(s,e.path);if(Array.isArray(i)){if("add"===e.action&&i.push(e.fields(t,a)),"remove"===e.action){const n=e.fields(t,a),o=F.default(i,{id:n.id});o>-1&&i.splice(o,1)}I.default(s,e.path,i)}}),s})(t,C,ne,w,Ce,j),qe=((e,t,a)=>{const i=[];return function n(o,s,l){void 0===o&&(o=""),void 0===s&&(s=""),void 0===l&&(l="");let r=[o?D.default(e,o):e],d=[];Array.isArray(r[0])||(d=Object.keys(r[0]),r=Object.values(r[0])),("stage"!==l||((e,t)=>{let a=!1;return Object.keys(e).forEach(i=>{i+"."+e[i]===t&&(a=!0)}),a})(a,s))&&r.forEach((e,a)=>{const l=void 0!==d[a]?d[a]:void 0;Array.isArray(e)&&e.forEach((e,a)=>{const r=s?s+"."+e.id:e.id,d=D.default(t,r),f=D.default(t,s);if((l&&f&&f.__typename===l||!l)&&i.push({path:r,config:e,data:d}),"collection"===e.type){const i=s?D.default(t,s+"."+e.id):t[e.id];i&&Array.isArray(i)&&i.forEach((t,i)=>{n(o+"["+a+"].fields",s?s+"."+e.id+"["+i+"]":e.id+"["+i+"]")})}else"group"===e.type||"fieldset"===e.type||"stage"===e.type?n(o+"["+a+"].fields",r,e.type):"wizard"===e.type&&n(o+"["+a+"].stages",r,"wizard")})})}(),i})(Ve,C,ke);n.useEffect(()=>(S.current=!0,()=>{S.current=!1}),[]),n.useEffect(()=>{const e=("undefined"!=typeof window?window.location.hash.substring(2):"").split(x||":"),t=Object.assign({},ke);e.forEach(e=>{const a=e.split("."),i=a.slice(0,-1).join("."),n=a[a.length-1];i&&n&&(t[i]=n)}),qe.forEach(e=>{"wizard"!==e.config.type||t[e.path]&&(!t[e.path]||q.default(e.config.stages,{id:t[e.path]}))||(t[e.path]=e.config.stages[0].id)}),JSON.stringify(ke)!==JSON.stringify(t)&&Fe(t)},[t]);const Re=()=>S&&!0===S.current;n.useEffect(()=>{if(a&&!H){let e;ge()&&window.stagesLogging("Set initial data",V),qe.forEach(t=>{if(void 0!==t.config.defaultValue&&void 0===D.default(a,t.path)){const e="function"==typeof t.config.defaultValue?t.config.defaultValue(a):t.config.defaultValue;I.default(a,t.path,e),I.default(C,t.path,e)}if(Array.isArray(t.config.validateOn)&&t.config.validateOn.indexOf("init")>-1||Array.isArray(p)&&p.indexOf("init")>-1){const i=Ie(t.path,"init",a,se);e=Object.assign({},se,i)}e&&le(e)});const t=N.default(a);let i;U(JSON.parse(t)),"local"===v||"session"===v||"object"==typeof v&&("local"===v.type||"session"===v.type)?i=ue(f,"object"==typeof v?v.type:v):f&&"object"==typeof v&&"custom"===v.type&&"function"==typeof v.get&&(i=v.get(f)),i&&Object.keys(i).length>0&&setTimeout(()=>{$(!!i.isDirty),B("object"==typeof i.dirtyFields?i.dirtyFields:{}),$e(i.data,Le(!1,i.data),f)},0)}},[a]),n.useEffect(()=>{if(ge()){let e;e="local"===v||"session"===v||"object"==typeof v&&("local"===v.type||"session"===v.type)?ue(f,"object"==typeof v?v.type:v):f&&"object"==typeof v&&"custom"===v.type&&"function"==typeof v.get?v.get(f):{},window.stagesLogging({id:V,data:a,initialData:H,interfaceState:w,undoData:M,asyncData:ne,errors:se,fieldPaths:qe,isDirty:z,focusedField:fe,lastFocusedField:me,dirtyFields:_,loading:re,parsedFieldConfig:Ve,savedData:e})}},[a,se,z,fe,me,_,re]);const Te=e=>"collection"===e||"subform"===e||"group"===e||"fieldset"===e||"config"===e||"wizard"===e||"stage"===e,Pe=(e,t,a,i)=>{if(!s[t.type])return!0;const n=D.default(a,e),o=!Te(t.type)&&s[t.type].isValid(n,t);if(O[t.type]&&"function"==typeof O[t.type].validation&&!t.customValidation)return O[t.type].validation({data:n,allData:a,interfaceState:w,fieldConfig:t,isValid:o,fieldHasFocus:!(!fe||fe!==e),fieldIsDirty:void 0!==_[e],triggeringEvent:i});if(("string"==typeof t.regexValidation||t.regexValidation instanceof RegExp)&&!t.customValidation){let e;if("string"==typeof t.regexValidation)try{e=new RegExp(t.regexValidation)}catch(e){}else e=t.regexValidation;return o&&(e.test(n)||!n)}if(!Te(t.type)&&"function"==typeof t.customValidation){const s=t.customValidation({data:n,allData:a,interfaceState:w,fieldConfig:t,isValid:o,fieldHasFocus:!(!fe||fe!==e),fieldIsDirty:void 0!==_[e],triggeringEvent:i});if(!function(e){return e&&"[object Promise]"===Object.prototype.toString.call(e)}(s))return s;!function(){const a=+new Date;Oe=Object.assign({},Oe,{[e]:a}),s.then(i=>{Oe[e]===a&&(!0!==i?(delete Oe[e],le(Object.assign({},se,{[e]:{field:t}}))):(delete Oe[e],le(Object.assign({},se))),Oe=Object.assign({},Oe))})}()}return o},Ie=(e,t,a,i,n)=>{const o=q.default(qe,{path:e}).config;ge()&&"render"!==t&&window.stagesLogging('Validate field "'+e+'"',V);const l=Pe(e,o,a,t),r=D.default(a,e);return i[e]&&delete i[e],Te(o.type)||!0===l?"collection"===o.type&&o.isRequired&&(!r||0===r.length||1===r.length&&0===Object.keys(r[0]).length)?(n||(n=e),i[e]={value:r,field:o}):"collection"===o.type&&(Array.isArray(o.fields)?o.fields.forEach(n=>{r&&r.forEach((l,d)=>{const f=e+"["+d+"]."+n.id;if(!(o.isRequired||l&&0!==Object.keys(l).length))return;const c=Pe(n,f,l,t);if(s[n.type]&&!0!==c)i[e]={value:r,subField:n,errorCode:!1!==c?c:void 0};else if(s[n.type]&&n.isUnique){let t=D.default(a,e,[]).filter(e=>void 0!==e[n.id]).map(e=>e[n.id]);[...new Set(t)].length!==t.length&&(i[e]={value:r,subField:n,errorCode:"notUnique"})}})}):r&&r.forEach((a,n)=>{(o.isRequired||a&&0!==Object.keys(a).length)&&o.fields[a.__typename]&&o.fields[a.__typename].forEach(o=>{const l=Pe(o,e+"["+n+"]."+o.id,a,t);s[o.type]&&!0!==l&&(i[e]={value:r,subField:o,errorCode:!1!==l?l:void 0})})})):(n||(n=e),i[e]={value:r,field:o,errorCode:!1!==l?l:void 0}),"collection"===o.type&&o.uniqEntries&&r&&T.default(r,(e,t)=>N.default(e)===N.default(t)).length!==r.length&&(i[e]={value:r,field:o}),"collection"===o.type&&o.rules&&"object"==typeof o.rules&&r&&Object.keys(o.rules).forEach(t=>{const a=o.rules[t];Object.keys(a).forEach(n=>{const s=a[n],l=t.indexOf(",")>-1?t.split(","):[t],d=n.indexOf(",")>-1?n.split(","):[n],f=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);const a=[];return e.forEach(e=>{t.forEach(t=>{a.push([e,t])})}),a}(l,d);let c=!0;if(s.maxCount&&"number"==typeof s.maxCount&&f.forEach(e=>{let t=0;r.forEach(a=>D.default(a,e[0])===e[1]?t++:void 0),t>s.maxCount&&(c=!1)}),s.minCount&&"number"==typeof s.minCount&&f.forEach(e=>{let t=0;r.forEach(a=>D.default(a,e[0])===e[1]?t++:void 0),t<s.minCount&&(c=!1)}),s.exactCount&&"number"==typeof s.exactCount&&f.forEach(e=>{let t=0;r.forEach(a=>D.default(a,e[0])===e[1]?t++:void 0),t!==s.exactCount&&(c=!1)}),s.sameCountAs&&"string"==typeof s.sameCountAs&&f.forEach(e=>{let t=0,a=0;r.forEach(i=>{D.default(i,e[0])===e[1]&&t++,D.default(i,e[0])===s.sameCountAs&&a++}),t!==a&&(c=!1)}),s.differentCountAs&&"string"==typeof s.differentCountAs&&f.forEach(e=>{let t=0,a=0;r.forEach(i=>{D.default(i,e[0])===e[1]&&t++,D.default(i,e[0])===s.differentCountAs&&a++}),t===a&&(c=!1)}),(s.sameSumAs&&"string"==typeof s.sameSumAs||s.differentSumAs&&"string"==typeof s.differentSumAs||s.biggerSumAs&&"string"==typeof s.biggerSumAs||s.smallerSumAs&&"string"==typeof s.smallerSumAs)&&f.forEach(e=>{let t=0,a=0;r.forEach(i=>{const n=Number(D.default(i,e[0])),o=Number(D.default(i,s.sameSumAs||s.differentSumAs||s.biggerSumAs||s.smallerSumAs));isNaN(n)||(t+=n),isNaN(o)||(a+=o)}),s.sameSumAs&&t!==a&&(c=!1),s.differentSumAs&&t===a&&(c=!1),s.biggerSumAs&&t<=a&&(c=!1),s.smallerSumAs&&t>=a&&(c=!1)}),s.isUnique&&l.length>0){const e=[];let t=!1;r.forEach(a=>{const i=l.map(e=>D.default(a,e));e.forEach(e=>{P.default(i,e)&&(t=!0)}),e.push(i)}),t&&(c=!1)}s.disallow&&f.forEach(e=>{let t=!1,a=!1;r.forEach(i=>{D.default(i,e[0])===e[1]&&(a=!0),Array.isArray(s.disallow)?s.disallow.forEach(a=>{D.default(i,e[0])===a&&(t=!0)}):D.default(i,e[0])===s.disallow&&(t=!0)}),a&&t&&(c=!1)}),s.disallow&&f.forEach(e=>{let t=!1,a=!1;r.forEach(i=>{D.default(i,e[0])===e[1]&&(a=!0),Array.isArray(s.disallow)?s.disallow.forEach(a=>{D.default(i,e[0])===a&&(t=!0)}):D.default(i,e[0])===s.disallow&&(t=!0)}),a&&!t&&(c=!1)}),c&&"object"==typeof b&&Object.keys(b).forEach(e=>{void 0!==s[e]&&"function"==typeof b[e]&&(b[e]({fieldValueCombos:f,fieldValidationData:r,valueRules:s,get:D.default})||(c=!1))}),c||(i[e]={value:r,field:o,errorCode:s.errorCode||"invalidRule"})})}),{errors:i,firstErrorField:n}},Le=function(e,t,a){void 0===a&&(a="");let i,n={};if(t||(t=C),qe.forEach(e=>{if(""===a||e.path.startsWith(a)){if(!s[e.config.type]&&!Te(e.config.type))return;const o=Ie(e.path,""!==a?"render":"action",t,n,i);n=o.errors,i=o.firstErrorField}}),i&&r&&e){const e=document.getElementById(i);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return n},We=()=>Le(!1);n.useEffect(()=>{if("function"==typeof c&&u){ge()&&window.stagesLogging("Get errors on validation",V);let e=Le(!0);le(e),c(e)}},[c]);const Ne=(e,t)=>{ge()&&window.stagesLogging('Get sub form errors for sub id "'+e+'"',V),Le(!0),t&&Object.keys(t).length>0&&(se[e]=t)},ze=function(e,t,a){try{const i=function(){if(t.loader&&"function"==typeof t.loader){function i(){t.enableCaching&&((e,t)=>{ge()&&window.stagesLogging('Update options cache for "'+e+'"',V),ie(a=>Object.assign({},a,{[e]:t}))})(o,s),r===l&&(((e,t)=>{ge()&&window.stagesLogging('Update options loaded for "'+e+'"',V),te(a=>Object.assign({},a,{[e]:t}))})(e,s),t.onOptionsChange&&"function"==typeof t.onOptionsChange&&t.onOptionsChange(s,a,Ge))}const n={};let o,s;const l="number"==typeof ve[e]?ve[e]+1:0;let r=l;ve[e]=l,ge()&&window.stagesLogging('Create dynamic options for field "'+e+'"',V),t.enableCaching&&(t.watchFields.forEach(e=>{const t=D.default(a,e);t&&(n[e]=t)}),o=e+"-"+N.default(n));const d=function(){if(!t.enableCaching||!ae[o])return Promise.resolve(t.loader(a,Ge)).then(function(t){s=t,r=ve[e]});s=ae[o]}();return d&&d.then?d.then(i):i()}}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},$e=function(e,t,a,i,n){let o;void 0===n&&(n=!1);try{o=N.default({newData:e,errors:Object.keys(t),id:a,fieldKey:i,interfaceState:w})}catch(e){}(o!==Ee||n)&&(l((e=>{const t={},a=Object.assign({},e);return qe.forEach(i=>{if(i.config.isInterfaceState){const n=D.default(e,i.path);void 0!==n&&(I.default(t,i.path,n),L.default(a,i.path))}}),A(t),a})(e),t,a,i,w,Le(!1,e)),Ee=o)},_e=()=>{if(Re()&&m&&G>0){const e=G-1,t=JSON.parse(M[e]);K(e),le(t.errors),$(t.isDirty),B(t.dirtyFields),$e(t.data,t.errors,f)}},Be=()=>{if(Re()&&m&&G<M.length-1){const e=G+1,t=JSON.parse(M[e]);K(e),le(t.errors),$(t.isDirty),B(t.dirtyFields),$e(t.data,t.errors,f)}};n.useEffect(()=>{let e=Object.assign({},C);if(ge()&&window.stagesLogging('Is visible change to "'+(r?"visible":"invisible")+'"',V),qe.forEach(t=>{const a=t.config;let i=D.default(e,t.path);if("collection"===a.type&&a.init){const n=a.min?Number(a.min):1;i&&0!==i.length||(i=[]);for(let t=i.length;t<n;t++)i.push("string"==typeof a.init?"function"==typeof a.setInitialData?a.setInitialData(i,e,a.init):{__typename:a.init}:"function"==typeof a.setInitialData?a.setInitialData(i,e):{});I.default(e,t.path,i)}}),e=He(e),"function"==typeof t.asyncDataLoader&&r&&!Q)try{return de(!0),Promise.resolve(t.asyncDataLoader()).then(function(e){oe(e),Z(!0),de(!1)})}catch(e){Promise.reject(e)}r&&(Array.isArray(qe)&&qe.forEach(t=>{t.config.dynamicOptions&&t.config.dynamicOptions.events&&t.config.dynamicOptions.events.indexOf("init")>-1&&ze(t.path,t.config.dynamicOptions,e)}),0===G&&0===M.length&&J([N.default({data:e,isDirty:z,dirtyFields:_,errors:se})])),$e(e,Le(),f)},[r]);const He=e=>{const t=Object.assign({},e);return qe.forEach(a=>{if("function"==typeof a.config.computedValue){const i=D.default(C,a.path.split(".").slice(0,-1).join(".")),n=a.config.computedValue(e,i,w);I.default(t,a.path,n)}}),t},Ue=e=>q.default(qe,{path:e}).config,Me=(e,t,a)=>{const i=[];return"object"==typeof g&&Object.keys(g).forEach(n=>{"function"==typeof g[n]&&g[n]({fieldValue:a,data:t,dirtyFields:_,optionsLoaded:ee,asyncData:ne,errors:se,focusedField:fe,triggeringEvent:e})&&i.push(n)}),i},Je=e=>Array.isArray(e)&&1===e.length?e[0]:e,Ge=function e(t,a,i,n){if(void 0===n&&(n=!1),!Re())return;let o,s=!1;const l=+new Date,r=Ue(t);n||(xe=l);let d=Object.assign({},i||C),c="function"==typeof r.filter?r.filter(a):a;r.cast&&"function"==typeof r.cast.data&&(c=r.cast.data(c)),r.cast&&"string"==typeof r.cast.data&&(c=he(c,r.cast.data)),r.cast&&Array.isArray(r.cast.data)&&(c=he(c,r.cast.data[0],!0)),ge()&&window.stagesLogging('Handle change for field "'+t+'"',V),I.default(d,t,c||void 0),d=He(d);const u={data:D.default(d,t),fieldIsDirty:!!_[t],fieldConfig:r,fieldHasFocus:!(!fe||fe!==t)};n||(0===xe||l-xe<Number(y||400))&&(!r.validateOn&&Array.isArray(p)&&p.indexOf("throttledChange")>-1||r.validateOn&&Array.isArray(r.validateOn)&&r.validateOn.indexOf("throttledChange")>-1||!r.validateOn&&"function"==typeof p&&p(u).indexOf("throttledChange")>-1||r.validateOn&&"function"==typeof r.validateOn&&r.validateOn(u).indexOf("throttledChange")>-1)&&(je&&clearTimeout(je),je=setTimeout(()=>e(t,a,i,!0),y||400),s=!0);const g=Me("change",d,c);if(!r.validateOn&&Array.isArray(p)&&g.some(e=>p.indexOf(e)>-1)||r.validateOn&&Array.isArray(r.validateOn)&&g.some(e=>r.validateOn.indexOf(e)>-1)){const e=Ie(t,Je(g),d,se);o=Object.assign({},se,e.errors),le(o)}else if(!r.validateOn&&Array.isArray(p)&&p.indexOf("change")>-1||r.validateOn&&Array.isArray(r.validateOn)&&r.validateOn.indexOf("change")>-1||!r.validateOn&&Array.isArray(p)&&p.indexOf("throttledChange")>-1&&!s||r.validateOn&&Array.isArray(r.validateOn)&&r.validateOn.indexOf("throttledChange")>-1&&!s||!r.validateOn&&"function"==typeof p&&p(u).indexOf("change")>-1||r.validateOn&&"function"==typeof r.validateOn&&r.validateOn(u).indexOf("change")>-1||!r.validateOn&&"function"==typeof p&&p(u).indexOf("throttledChange")>-1&&!s||r.validateOn&&"function"==typeof r.validateOn&&r.validateOn(u).indexOf("throttledChange")>-1&&!s){const e=Ie(t,"change",d,se);o=Object.assign({},se,e.errors),le(o)}if(H&&(P.default(D.default(d,t),D.default(H,t))?void 0!==_[t]&&delete _[t]:_[t]={oldData:D.default(H,t),newData:D.default(d,t)},$(Object.keys(_).length>0),B(_)),r.clearFields&&(Array.isArray(r.clearFields)||"function"==typeof r.clearFields)){const e=Object.assign({},ee);(Array.isArray(r.clearFields)?r.clearFields:r.clearFields(c,d,o)).forEach(t=>{I.default(d,t,void 0),delete e[t]}),te(e)}if(Array.isArray(qe)&&qe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("change")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t)>-1&&(!r.dynamicOptions||r.dynamicOptions&&ee[e.path]&&ee[e.path].indexOf(D.default(d,t))>-1||!ee[e.path])&&ze(e.path,e.config.dynamicOptions,d)}),(e=>{const t=e.split(".").at(-2);return"]"===(t?t.slice(-1):"")})(t)){const e=(e=>{const t=e.split(".");t.pop();let a=t.join(".");if("]"===a.slice(-1)){const e=a.lastIndexOf("[");a=a.substring(0,e)}return a})(t),a=Ue(e);if(a.sort&&a.sort.by&&a.sort.by.indexOf(r.id)>-1){let t=D.default(d,e,[]);t=R.default(t,a.sort.by),"desc"===a.sort.dir&&(t=t.reverse()),I.default(d,e,t)}}$e(d,Le(!1,d),f,t)},Ke=e=>{const t={},i=[];return qe.forEach(n=>{if(!e||n.path.startsWith(e+"."))if("fieldset"===n.config.type&&j[n.config.fieldset]){const e=Ke(n.path);I.default(t,n.path,j[n.config.fieldset].render({params:be(n.config.params||{},j[n.config.fieldset].params),fieldProps:{fields:D.default(e,n.path),onCollectionAction:Xe,onWizardNav:Ye,getWizardNavHash:Qe,isWizardStepActive:Ze,isWizardStepDisabled:et,modifyConfig:tt,data:a,interfaceState:w,errors:se,asyncData:ne,isDirty:z,focusedField:fe,lastFocusedField:me,dirtyFields:_,get:D.default,getConfig:it},actionProps:{handleActionClick:at,handleUndo:_e,handleRedo:Be,isDisabled:d,isDirty:z,focusedField:fe,lastFocusedField:me,dirtyFields:_,silentlyGetValidationErrors:We}}))}else{const e=((e,t,n)=>{let o=!1;if(i.forEach(e=>{n.startsWith(e)&&(o=!0)}),o)return null;if(!s[e.type]&&"subform"!==e.type&&"group"!==e.type)return null;if("function"==typeof e.isRendered&&!e.isRendered(n,t,C,w))return"group"===e.type&&i.push(n),null;if("group"===e.type)return null;const l=Object.assign({},e);if(l.id=n,ee[n])l.options=ee[n];else if("function"==typeof l.options)l.options=l.options(n,t,C);else if("object"==typeof l.computedOptions){let t=D.default(a,l.computedOptions.source,[]),i=D.default(C,n);"function"==typeof l.computedOptions.filter&&(t=t.filter(l.computedOptions.filter)),"function"==typeof l.computedOptions.sort&&(t=t.sort(l.computedOptions.sort)),"function"==typeof l.computedOptions.map&&(t=t.map(l.computedOptions.map)),l.computedOptions.initWith&&Array.isArray(l.computedOptions.initWith)&&(t=l.computedOptions.initWith.concat(t)),e.isUnique&&(t=t.map(t=>{if(""===t.value)return t;const o=n.substring(0,n.lastIndexOf("["));let s=D.default(a,o,[]);return F.default(s,{[e.id]:t.value})>-1&&t.value!==i?Object.assign({},t,{disabled:!0}):t})),l.options=t,q.default(t,{value:i})||(l.value="",I.default(C,n,""))}return delete l.computedValue,delete l.computedOptions,delete l.filter,delete l.clearFields,delete l.dynamicOptions,delete l.isRendered,delete l.defaultValue,delete l.cleanUp,delete l.precision,l.placeholder&&Array.isArray(l.placeholder)&&l.placeholder.length>1&&(void 0===Se[n]&&(Se[n]=l.placeholder[Math.floor(Math.random()*l.placeholder.length)]),l.placeholder=Se[n]),O[e.type]&&"function"==typeof O[e.type].renderer&&!e.errorRenderer&&(l.errorRenderer=O[e.type].renderer),Oe&&Oe[n]&&(l.isValidating=!0),Te(e.type)||Object.keys(l).forEach(e=>{"id"!==e&&"function"==typeof l[e]&&e.endsWith("Fn")&&(l[e.substring(0,e.length-2)]=l[e]({path:n,fieldData:t,alldata:C,interfaceState:w}),delete l[e])}),"fieldset"===e.type?null:"subform"!==e.type?/*#__PURE__*/k.default.createElement(s[e.type].component,Object.assign({key:n,value:(c=t,e.cast&&"function"==typeof e.cast.field?e.cast.field(c):e.cast&&"string"==typeof e.cast.field?he(c,e.cast.field):e.cast&&Array.isArray(e.cast.field)?he(c,e.cast.field[0],!0):c),initialValue:D.default(H,n),error:se[n],isDirty:!!_[n],isDisabled:d||e.isDisabled,hasFocus:!(!fe||fe!==n),onChange:e=>Ge(n,e),onFocus:()=>(e=>{if(!Re())return;const t=Ue(e),a=Object.assign({},C),i=D.default(a,e);ce(e),Ae(e);const n={data:i,fieldIsDirty:!!_[e],fieldConfig:t,fieldHasFocus:!(!fe||fe!==e)},o=Me("focus",a,i);if(!t.validateOn&&Array.isArray(p)&&o.some(e=>p.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&o.some(e=>t.validateOn.indexOf(e)>-1)){const t=Ie(e,Je(o),a,se);le(Object.assign({},se,t.errors)),$e(a,t.errors,f,e)}else if(!t.validateOn&&Array.isArray(p)&&p.indexOf("focus")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("focus")>-1||!t.validateOn&&"function"==typeof p&&p(n).indexOf("focus")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(n).indexOf("focus")>-1){const t=Ie(e,"focus",a,se);le(Object.assign({},se,t.errors)),$e(a,t.errors,f,e)}})(n),onBlur:()=>(e=>{if(!Re())return;ce("");const t=Ue(e),a=Object.assign({},C),i=Object.assign({},C);let n=D.default(a,e);xe=0,ge()&&window.stagesLogging('Handle blur for field "'+e+'"',V),t.cleanUp&&"function"==typeof t.cleanUp&&void 0!==n&&(n=t.cleanUp(n),I.default(a,e,n),Ge(e,n,a,!0)),"number"==typeof t.precision&&(I.default(a,e,Number(n).toFixed(t.precision)),$e(a,se,f,e));const o={data:n,fieldIsDirty:!!_[e],fieldConfig:t,fieldHasFocus:!(!fe||fe!==e)},s=Me("blur",a,n);if(!t.validateOn&&Array.isArray(p)&&s.some(e=>p.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&s.some(e=>t.validateOn.indexOf(e)>-1)){const t=Ie(e,Je(s),a,se);le(Object.assign({},se,t.errors)),$e(a,t.errors,f,e)}else if(!t.validateOn&&Array.isArray(p)&&p.indexOf("blur")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("blur")>-1||!t.validateOn&&"function"==typeof p&&p(o).indexOf("blur")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(o).indexOf("blur")>-1){const t=Ie(e,"blur",a,se);le(Object.assign({},se,t.errors)),$e(a,t.errors,f,e)}if(Array.isArray(qe)&&qe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("blur")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t.id)>-1&&ze(e.config.id,e.config.dynamicOptions,a),void 0!==v&&e.config.disableAutoSave&&L.default(i,e.path)}),(e=>{if(m){const t=[...M];t.length=G+1,t.push(N.default({data:e,isDirty:z,dirtyFields:_,errors:se})),t.length>h&&t.shift(),J(t),K(t.length-1)}})(a),void 0!==v)if("local"===v||"session"===v){const e=Le(!1,a);0===Object.keys(e).length&&pe(f,{data:i,isDirty:z,dirtyFields:_},v)}else if("object"!=typeof v||"local"!==v.type&&"session"!==v.type){if("object"==typeof v&&"custom"===v.type&&"function"==typeof v.save){const e=Le(!1,a);(v.validDataOnly&&0===Object.keys(e).length||!v.validDataOnly)&&v.save(f,{data:i,isDirty:z,dirtyFields:_})}}else{const e=Le(!1,a);(v.validDataOnly&&0===Object.keys(e).length||!v.validDataOnly)&&pe(f,{data:i,isDirty:z,dirtyFields:_},v.type)}})(n)},l)):/*#__PURE__*/k.default.createElement(we,{config:e.config,render:t=>{let{fieldProps:a}=t;/*#__PURE__*/return k.default.createElement(e.render,a)},fields:s,id:n,onChange:(e,t)=>Ge(n,e),onValidation:e=>Ne(n,e),parentRunValidation:X,data:C&&D.default(C,n),isVisible:r,isDisabled:d,validateOn:p});var c})(n.config,n.data,n.path);e&&I.default(t,n.path,e)}}),t},Xe=(e,t,a,i)=>{if(!Re())return;const n=Object.assign({},C),o=Ue(e),s=o&&o.min?Number(o.min):0,l=o&&o.max?Number(o.max):99999999999999;let r,d=D.default(n,e,[]),c=!1;if("last"===a&&(a=d.length-1),"last"===i&&(i=d.length-1),ge()&&window.stagesLogging('On collection action "'+e+'"',V),"add"===t&&("string"==typeof a&&o.fields[a]?l>d.length&&d.push("function"==typeof o.setInitialData?o.setInitialData(d,n,a):{__typename:a}):l>d.length&&d.push("function"==typeof o.setInitialData?o.setInitialData(d,n):{}),c=!0),"remove"===t&&(s<d.length&&d.splice(a,1),c=!0),"move"===t&&"number"==typeof a&&"number"==typeof i&&a>-1&&i>-1){const[e]=d.splice(a,1);d.splice(i,0,e),c=!0}if("sort"===t&&d.length>0&&a&&(d=R.default(d,a),c=!0),"duplicate"===t&&"number"==typeof a&&a>-1&&(d.splice(a+1,0,Object.assign({},d[a])),c=!0),o.sort&&o.sort.by&&(d=R.default(d,o.sort.by),"desc"===o.sort.dir&&(d=d.reverse()),c=!0),"update"===t&&Array.isArray(a)?(c=!0,I.default(n,e,a)):I.default(n,e,d),c){const t=D.default(H,e),a=D.default(n,e);try{JSON.stringify(t)!==JSON.stringify(a)?($(!0),_[e]={oldData:t,newData:a},B(_)):(delete _[e],Object.keys(_).forEach(t=>{t.startsWith(e)&&delete _[t]}),B(_),$(Object.keys(_).length>0))}catch(e){}}if(p.indexOf("collectionAction")>-1||o.validateOn&&o.validateOn.indexOf("collectionAction")>-1){const t=Ie(e,"collectionAction",n,se);r=Object.assign({},se,t.errors),le(r)}$e(n,r||Le(),f,e)},Ye=(e,t,a)=>{const i=Object.assign({},ke),n=i[t],o=Ue(t);if("step"===e&&(i[t]=a),"next"===e){const e=F.default(o.stages,{id:n})+1;o.stages[e]&&(i[t]=o.stages[e].id)}if("prev"===e){const e=F.default(o.stages,{id:n})-1;o.stages[e]&&(i[t]=o.stages[e].id)}"first"===e&&(i[t]=o.stages[0].id),"last"===e&&(i[t]=o.stages[o.stages.length-1].id),Fe(i)},Qe=function(e,t,a){void 0===a&&(a="step");const i=ke[e],n=Ue(e),o=[];if("step"===a||"first"===a||"last"===a)return Object.keys(ke).forEach(i=>{i.startsWith(e)?("step"===a&&o.push(i+"."+t),"first"===a&&o.push(i+"."+n.stages[0].id),"last"===a&&o.push(i+"."+n.stages[n.stages.length-1].id)):o.push(i+"."+ke[i])}),"#!"+o.join(x||":");if("prev"===a){const t=F.default(n.stages,{id:i})-1;return!!n.stages[t]&&(Object.keys(ke).forEach(a=>{a.startsWith(e)?o.push(a+"."+n.stages[t].id):o.push(a+"."+ke[a])}),"#!"+o.join(x||":"))}if("next"===a){const t=F.default(n.stages,{id:i})+1;return!!n.stages[t]&&(Object.keys(ke).forEach(a=>{a.startsWith(e)?o.push(a+"."+n.stages[t].id):o.push(a+"."+ke[a])}),"#!"+o.join(x||":"))}return!1},Ze=(e,t)=>ke[e]===t,et=function(e,t,i){void 0===i&&(i=!1);const n=t.substring(2).split(x||":");let o="";if(n.forEach(t=>{t.startsWith(e+".")&&(o=t.substring(e.length+1))}),o){const t=Ue(e),n=F.default(t.stages,{id:o});if(n>F.default(t.stages,{id:ke[e]})+1)return!0;if(i&&Ze(e,o))return!0;for(let i=0;i<n;i++){const n=Le(!1,a,e+"."+t.stages[i].id);if(Object.keys(n).length>0)return!0}}return!1},tt=(e,a,i)=>{if(t.fieldConfigs&&"function"==typeof t.fieldConfigs[a]){const n=e.split(".");let o="";n.forEach(e=>{const t=o?D.default(Ve,o):Ve;if(e.endsWith("]")){const a=e.split("["),i=F.default(t,{id:a[0]});i>-1&&(o+="["+i+"].fields")}else{const a=F.default(t,{id:e});a>-1&&(o+="["+a+"].fields")}}),""!==o&&(Ce.push({fields:t.fieldConfigs[a],path:o,action:i}),De([...Ce]))}},at=(e,t,a)=>{ge()&&window.stagesLogging("Handle action click",V),a&&("local"!==v&&"session"!==v||ye(f,v),"object"!=typeof v||"local"!==v.type&&"session"!==v.type||ye(f,v.type),f&&"object"==typeof v&&"custom"===v.type&&"function"==typeof v.remove&&v.remove(f),$e(H,Le(),f),B({}),$(!1));const i=Me("action",C);let n=!1;if(Array.isArray(p)&&p.indexOf("action")>-1||Array.isArray(p)&&i.some(e=>p.indexOf(e)>-1)){t&&(Y(!0),setTimeout(()=>Y(!1),0));let e=t?Le(!0):{};le(e),Object.keys(e).length>0&&(n=!0)}n||e()},it=e=>{const t=q.default(qe,{path:e});return t?t.config:void 0};return!1===r?null:i?i({actionProps:{handleActionClick:at,handleUndo:_e,handleRedo:Be,isDisabled:!!(Oe&&Object.keys(Oe).length>0)||d,isDirty:z,focusedField:fe,lastFocusedField:me,dirtyFields:_,silentlyGetValidationErrors:We,updateData:e=>{$e(e,Le(),f);let t=!1,a={};qe.forEach(i=>{if(!i.config.isInterfaceState){const n=D.default(e,i.path),o=D.default(H,i.path);n!==o&&(t=!0,void 0!==n&&(a[i.path]={oldData:o,newData:n}))}}),$(t),B(a)}},fieldProps:{fields:Ke(),onCollectionAction:Xe,onWizardNav:Ye,getWizardNavHash:Qe,isWizardStepActive:Ze,isWizardStepDisabled:et,modifyConfig:tt,data:a,interfaceState:w,errors:se,asyncData:ne,isDirty:z,focusedField:fe,lastFocusedField:me,dirtyFields:_,get:D.default,getConfig:it},loading:re}):o?o(Ke()):null};function Ae(e,t){if(null==e)return{};var a,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(a=o[i])>=0||(n[a]=e[a]);return n}we.propTypes={config:ce.oneOfType([ce.object,ce.array,ce.func]).isRequired,data:ce.object,render:ce.oneOfType([ce.node,ce.func]),renderFields:ce.oneOfType([ce.node,ce.func]),fields:ce.object.isRequired,onChange:ce.func,isVisible:ce.bool,isDisabled:ce.bool,id:ce.oneOfType([ce.string,ce.number]),onValidation:ce.func,parentRunValidation:ce.bool,validateOn:ce.array,customRuleHandlers:ce.object,undoMaxDepth:ce.number,typeValidations:ce.object,fieldsets:ce.object,initialInterfaceState:ce.object},we.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"],customRuleHandlers:{},undoMaxDepth:10,autoSave:!1,typeValidations:{},fieldsets:{},initialInterfaceState:{}};const Ce=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","hasFocus","prefix","suffix","secondaryText","type","errorRenderer"],De=e=>{let{id:t,label:a,value:i,onChange:n,onBlur:o,onFocus:s,error:l,placeholder:r,isRequired:d,isDisabled:f,isValidating:c,prefix:u,suffix:p,secondaryText:y,type:g,errorRenderer:m}=e;return Ae(e,Ce),console.log({id:t,value:i}),/*#__PURE__*/k.default.createElement("div",null,a?/*#__PURE__*/k.default.createElement("label",{htmlFor:t},a,d?" *":""):null,/*#__PURE__*/k.default.createElement("div",null,u?/*#__PURE__*/k.default.createElement("span",null,u):null,/*#__PURE__*/k.default.createElement("input",{id:t,name:t,value:void 0!==i?i:"number"===g?0:"",placeholder:r,type:g||"text",disabled:!!f,required:!!d,autoComplete:"password"===g?"current-password":"off",onChange:e=>{"function"==typeof n&&n(e.target.value)},onFocus:e=>{"function"==typeof s&&s()},onBlur:e=>{"function"==typeof o&&o()}}),p?/*#__PURE__*/k.default.createElement("span",null,p):null),y?/*#__PURE__*/k.default.createElement("div",null,y):null,l&&!c?m?m(l):/*#__PURE__*/k.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,c?/*#__PURE__*/k.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},ke=(e,t)=>!t.isRequired||""!==e&&void 0!==e,Fe=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","type","errorRenderer"],Ve=["id","label","value","options","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","errorRenderer"],qe=["id","label","value","options","onChange","onBlur","onFocus","error","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","errorRenderer"],Re=["id","label","error","isRequired","isValidating","secondaryText","errorRenderer"],Te={text:{component:De,isValid:ke},number:{component:De,isValid:ke},email:{component:De,isValid:ke},password:{component:De,isValid:ke},tel:{component:De,isValid:ke},time:{component:De,isValid:ke},date:{component:De,isValid:ke},checkbox:{component:e=>{let{id:t,label:a,value:i,onChange:n,onBlur:o,onFocus:s,error:l,placeholder:r,isRequired:d,isDisabled:f,isValidating:c,prefix:u,suffix:p,secondaryText:y,type:g,errorRenderer:m}=e;return Ae(e,Fe),/*#__PURE__*/k.default.createElement("div",null,a?/*#__PURE__*/k.default.createElement("label",{htmlFor:t},a,d?" *":""):null,/*#__PURE__*/k.default.createElement("div",null,u?/*#__PURE__*/k.default.createElement("span",null,u):null,/*#__PURE__*/k.default.createElement("input",{id:t,name:t,value:"1",placeholder:r,type:g,disabled:!!f,required:!!d,checked:!!i,onChange:()=>{},onClick:e=>{"function"==typeof n&&n(!!e.target.checked)},onBlur:e=>{"function"==typeof o&&o()},onFocus:e=>{"function"==typeof s&&s()}}),p?/*#__PURE__*/k.default.createElement("span",null,p):null),y?/*#__PURE__*/k.default.createElement("div",null,y):null,l&&!c?m?m(l):/*#__PURE__*/k.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,c?/*#__PURE__*/k.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:e=>{let{id:t,label:a,value:i,options:n,onChange:o,onBlur:s,onFocus:l,error:r,placeholder:d,isRequired:f,isDisabled:c,isValidating:u,prefix:p,suffix:y,secondaryText:g,errorRenderer:m}=e;return Ae(e,Ve),/*#__PURE__*/k.default.createElement("div",null,a?/*#__PURE__*/k.default.createElement("label",{htmlFor:t},a,f?" *":""):null,/*#__PURE__*/k.default.createElement("div",null,p?/*#__PURE__*/k.default.createElement("span",null,p):null,/*#__PURE__*/k.default.createElement("select",{id:t,name:t,value:void 0===i?"":i,placeholder:d,disabled:!!c,required:!!f,onChange:e=>{"function"==typeof o&&o(e.target.value)},onBlur:e=>{"function"==typeof s&&s()},onFocus:e=>{"function"==typeof l&&l()}},n.map(e=>/*#__PURE__*/k.default.createElement("option",{value:e.value,key:e.value,disabled:!!e.disabled||null},e.text))),y?/*#__PURE__*/k.default.createElement("span",null,y):null),g?/*#__PURE__*/k.default.createElement("div",null,g):null,r&&!u?m?m(r):/*#__PURE__*/k.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,u?/*#__PURE__*/k.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:e=>{let{id:t,label:a,value:i,options:o,onChange:s,onBlur:l,onFocus:r,error:d,isRequired:f,isDisabled:c,isValidating:u,prefix:p,suffix:y,secondaryText:g,errorRenderer:m}=e;return Ae(e,qe),/*#__PURE__*/k.default.createElement("div",{id:t},a?/*#__PURE__*/k.default.createElement("label",null,a,f?" *":""):null,/*#__PURE__*/k.default.createElement("div",null,p?/*#__PURE__*/k.default.createElement("span",null,p):null,o.map(e=>/*#__PURE__*/k.default.createElement(n.Fragment,{key:t+"-"+e.value},/*#__PURE__*/k.default.createElement("input",{type:"radio",name:t,id:t+"-"+e.value,value:e.value,checked:i===e.value,disabled:!!c,onChange:()=>{},onClick:t=>{"function"==typeof s&&s(e.value)},onBlur:e=>{"function"==typeof l&&l()},onFocus:e=>{"function"==typeof r&&r()}}),/*#__PURE__*/k.default.createElement("label",{htmlFor:t+"-"+e.value},e.text)," ")),y?/*#__PURE__*/k.default.createElement("span",null,y):null),g?/*#__PURE__*/k.default.createElement("div",null,g):null,d&&!u?m?m(d):/*#__PURE__*/k.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,u?/*#__PURE__*/k.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:e=>{let{id:t,label:a,error:i,isRequired:n,isValidating:o,secondaryText:s,errorRenderer:l}=e;return Ae(e,Re),a||s||i?/*#__PURE__*/k.default.createElement("div",{id:t},a?/*#__PURE__*/k.default.createElement("label",{htmlFor:t},a,n?" *":""):null,s?/*#__PURE__*/k.default.createElement("div",null,s):null,i&&!o?l?l(i):/*#__PURE__*/k.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,o?/*#__PURE__*/k.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null):null},isValid:()=>!0}};Object.defineProperty(e,"get",{enumerable:!0,get:function(){return D.default}}),e.Actions=e=>{let{config:t,handleActionClick:a,isDisabled:i}=e;/*#__PURE__*/return k.default.createElement(k.default.Fragment,null,t.map((e,t)=>/*#__PURE__*/k.default.createElement("button",{type:"button",onClick:()=>a(e.onClick,e.validate),key:"action-"+t,disabled:i},"primary"===e.type?/*#__PURE__*/k.default.createElement("strong",null,e.title):e.title)))},e.Debugger=()=>{const[e,t]=n.useState({}),[a,i]=n.useState({}),[o,s]=n.useState({}),[l,r]=n.useState({}),[d,f]=n.useState(!1),c=(n,o)=>{if("string"==typeof n)a[o]||(a[o]=[]),a[o].push({action:n,time:+new Date}),i(a);else{const a=Object.assign(e,{}),i=Object.keys(a)[0];a[n.id]=n,t(Object.assign({},a)),s(e=>({key:e.key?e.key:i,tab:e.tab?e.tab:"data"}))}};return n.useEffect(()=>{"undefined"!=typeof window&&(window.stagesLogging=c)},[]),0===Object.keys(e).length?null:/*#__PURE__*/k.default.createElement("div",{style:{position:"absolute",top:"8px",right:"8px",width:"320px",padding:"8px",fontSize:"14px",color:"#333",border:"1px #bbb solid",borderRadius:"4px",background:"#fbfbfb",fontFamily:"Open Sans, Helvetica, Arial, sans",zIndex:1e3}},/*#__PURE__*/k.default.createElement("strong",{style:{lineHeight:"22px"}},"Debugger:"),/*#__PURE__*/k.default.createElement("button",{type:"button",style:{float:"right"},onClick:()=>f(!d)},d?"hide":"show"),d?Object.keys(e).map(t=>{const i=t.split("-");i.pop();let n="";return n="logs"===o.tab?a[o.key]?a[o.key].map(e=>e.time+": "+e.action).join("\n"):"":V.default(l[t]?D.default(e[o.key][o.tab],l[t]||""):e[o.key][o.tab],null,2),/*#__PURE__*/k.default.createElement("div",{key:t+"-"+o.tab},/*#__PURE__*/k.default.createElement("h3",{style:{background:"#333",color:"#fff",margin:"8px 0 0 0",padding:"2px 6px",textTransform:"capitalize",position:"relative"}},i.join(" "),":",e[t].isDirty?/*#__PURE__*/k.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"4px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"dirty"):null,Object.keys(e[t].errors).length?/*#__PURE__*/k.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"48px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"errors"):null,e[t].loading?/*#__PURE__*/k.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"98px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"loading"):null),/*#__PURE__*/k.default.createElement("div",null,/*#__PURE__*/k.default.createElement("select",{onChange:e=>s({key:t,tab:e.target.value}),value:o.key===t?o.tab:"data",style:{width:"47%",minWidth:"47%",maxWidth:"47%",marginRight:"2%",height:"25px"}},e[t].keys?/*#__PURE__*/k.default.createElement(k.default.Fragment,null,/*#__PURE__*/k.default.createElement("option",{value:"data"},"Data"),/*#__PURE__*/k.default.createElement("option",{value:"errors"},"Errors"),/*#__PURE__*/k.default.createElement("option",{value:"initialData"},"Initial Data"),/*#__PURE__*/k.default.createElement("option",{value:"savedData"},"Saved Data"),/*#__PURE__*/k.default.createElement("option",{value:"keys"},"Keys"),/*#__PURE__*/k.default.createElement("option",{value:"logs"},"Logs")):/*#__PURE__*/k.default.createElement(k.default.Fragment,null,/*#__PURE__*/k.default.createElement("option",{value:"data"},"Data"),/*#__PURE__*/k.default.createElement("option",{value:"errors"},"Errors"),/*#__PURE__*/k.default.createElement("option",{value:"parsedFieldConfig"},"Field Config"),/*#__PURE__*/k.default.createElement("option",{value:"initialData"},"Initial Data"),/*#__PURE__*/k.default.createElement("option",{value:"interfaceState"},"Interface State"),/*#__PURE__*/k.default.createElement("option",{value:"undoData"},"Undo Data"),/*#__PURE__*/k.default.createElement("option",{value:"asyncData"},"Async Data"),/*#__PURE__*/k.default.createElement("option",{value:"savedData"},"Saved Data"),/*#__PURE__*/k.default.createElement("option",{value:"fieldPaths"},"Field Paths"),/*#__PURE__*/k.default.createElement("option",{value:"logs"},"Logs"))),/*#__PURE__*/k.default.createElement("input",{value:l[t]||"",placeholder:"your.data.filter.path",onChange:e=>{const a=Object.assign({},l);a[t]=e.target.value,r(a)},style:{width:"47%",minWidth:"47%",maxWidth:"47%",fontSize:"12px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"4px",padding:"4px",overflowX:"scroll",whiteSpace:"pre"}})),o&&o.key===t?/*#__PURE__*/k.default.createElement("textarea",{readOnly:!0,style:{width:"calc(100% - 8px)",minWidth:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)",height:"200px",fontSize:"10px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"8px",overflowX:"scroll",whiteSpace:"pre"},value:n}):null)}):null)},e.Form=we,e.HashRouter=e=>{let{step:t,onChange:a,keys:i,prefix:o,hashFormat:s="#!"}=e;const[l,r]=(()=>{const[e,t]=n.useState(()=>window.location.hash),a=n.useCallback(()=>{t(window.location.hash)},[]);var i,o;i=()=>{!function(e){e&&e.addEventListener&&e.addEventListener(...[].slice.call(arguments,1))}(window,"hashchange",a)},o=()=>{!function(e){e&&e.removeEventListener&&e.removeEventListener(...[].slice.call(arguments,1))}(window,"hashchange",a)},n.useEffect(()=>(i&&i(),()=>{o&&o()}),[]);const s=n.useCallback(t=>{t!==e&&(window.location.hash=t)},[e]);return[e,s]})(),[d,f]=n.useState(!1),c=e=>i&&i[e]?i[e].key:o?o+"-"+e:e,u=()=>{if("string"==typeof l&&-1!==l.indexOf(s)){const e=(e=>{const t=e.split(s);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):F.default(i,{key:e})}return-1})(l);-1!==e&&("function"==typeof r&&r(""+s+c(e)),a(e))}else"function"==typeof r&&r(""+s+c(t))};return n.useEffect(()=>{d&&u()},[l]),n.useEffect(()=>{d&&"function"==typeof r&&r(""+s+c(t))},[t]),p=()=>{u(),f(!0)},n.useEffect(()=>{p()},[]),null;var p},e.Navigation=e=>{let{currentStep:t,onChangeStep:a,lastValidStep:i,keys:n}=e;const o=[];for(let e=0;e<n.length;e++)if(n&&n[e]&&n[e].visible){const s=n&&n[e]?n[e].key:"Step "+(e+1);o.push(t===e?/*#__PURE__*/k.default.createElement("li",{key:s,style:{textTransform:"capitalize"}},/*#__PURE__*/k.default.createElement("strong",null,s)):/*#__PURE__*/k.default.createElement("li",i>-1&&i+1<e||-1===i&&e>0?{key:s,style:{color:"#999",textTransform:"capitalize"}}:{key:s,style:{textTransform:"capitalize"},onClick:()=>a(e)},s))}/*#__PURE__*/return k.default.createElement("ul",null,o)},e.Progression=e=>{let{stepCount:t,validSteps:a,percentage:i}=e;/*#__PURE__*/return k.default.createElement("div",null,a+" / "+t+" ("+Math.round(i)+"%)")},e.Stages=me,e.plainFields=Te});
//# sourceMappingURL=lib.umd.js.map

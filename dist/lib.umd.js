!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("lodash.findindex"),require("react-use"),require("json-beautify"),require("lodash.get"),require("lodash.find"),require("lodash.sortby"),require("lodash.uniqwith"),require("lodash.isequal"),require("lodash.set"),require("lodash.unset"),require("lodash.merge"),require("fast-json-stable-stringify")):"function"==typeof define&&define.amd?define(["exports","react","lodash.findindex","react-use","json-beautify","lodash.get","lodash.find","lodash.sortby","lodash.uniqwith","lodash.isequal","lodash.set","lodash.unset","lodash.merge","fast-json-stable-stringify"],t):t((e||self).reactStages={},e.react,e.findIndex,e.reactUse,e.jsonBeautify,e.get$1,e.find,e.sortBy,e.uniqWith,e.isEqual,e.set$2,e.unset,e.merge$1,e.fastJsonStableStringify)}(this,function(e,t,n,r,o,i,a,l,u,s,c,f,d,p){function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=/*#__PURE__*/y(t),h=/*#__PURE__*/y(n),v=/*#__PURE__*/y(o),m=/*#__PURE__*/y(i),b=/*#__PURE__*/y(a),O=/*#__PURE__*/y(l),x=/*#__PURE__*/y(u),E=/*#__PURE__*/y(s),S=/*#__PURE__*/y(c),w=/*#__PURE__*/y(f),j=/*#__PURE__*/y(d),A=/*#__PURE__*/y(p),C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function k(e){var t={exports:{}};return e(t,t.exports),t.exports}var R,T,F=function(e){return e&&e.Math==Math&&e},P=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof C&&C)||function(){return this}()||Function("return this")(),D={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},I=function(e){return"function"==typeof e},L=function(e){return"object"==typeof e?null!==e:I(e)},q=P.document,_=L(q)&&L(q.createElement),V=function(e){return _?q.createElement(e):{}},M=V("span").classList,N=M&&M.constructor&&M.constructor.prototype,B=N===Object.prototype?void 0:N,$=function(e){try{return!!e()}catch(e){return!0}},W=!$(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),U=Function.prototype,H=U.call,z=W&&U.bind.bind(H,H),G=W?function(e){return e&&z(e)}:function(e){return e&&function(){return H.apply(e,arguments)}},K=G({}.toString),Y=G("".slice),J=function(e){return Y(K(e),8,-1)},X=P.Object,Q=G("".split),Z=$(function(){return!X("z").propertyIsEnumerable(0)})?function(e){return"String"==J(e)?Q(e,""):X(e)}:X,ee=P.TypeError,te=function(e){if(null==e)throw ee("Can't call method on "+e);return e},ne=function(e){return Z(te(e))},re=Object.defineProperty,oe=function(e,t){try{re(P,e,{value:t,configurable:!0,writable:!0})}catch(n){P[e]=t}return t},ie="__core-js_shared__",ae=P[ie]||oe(ie,{}),le=k(function(e){(e.exports=function(e,t){return ae[e]||(ae[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),ue=P.Object,se=function(e){return ue(te(e))},ce=G({}.hasOwnProperty),fe=Object.hasOwn||function(e,t){return ce(se(e),t)},de=0,pe=Math.random(),ye=G(1..toString),ge=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ye(++de+pe,36)},he=function(e){return I(e)?e:void 0},ve=function(e,t){return arguments.length<2?he(P[e]):P[e]&&P[e][t]},me=ve("navigator","userAgent")||"",be=P.process,Oe=P.Deno,xe=be&&be.versions||Oe&&Oe.version,Ee=xe&&xe.v8;Ee&&(T=(R=Ee.split("."))[0]>0&&R[0]<4?1:+(R[0]+R[1])),!T&&me&&(!(R=me.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=me.match(/Chrome\/(\d+)/))&&(T=+R[1]);var Se,we=T,je=!!Object.getOwnPropertySymbols&&!$(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&we&&we<41}),Ae=je&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ce=le("wks"),ke=P.Symbol,Re=ke&&ke.for,Te=Ae?ke:ke&&ke.withoutSetter||ge,Fe=function(e){if(!fe(Ce,e)||!je&&"string"!=typeof Ce[e]){var t="Symbol."+e;Ce[e]=je&&fe(ke,e)?ke[e]:Ae&&Re?Re(t):Te(t)}return Ce[e]},Pe=P.String,De=P.TypeError,Ie=function(e){if(L(e))return e;throw De(Pe(e)+" is not an object")},Le=!$(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),qe=Le&&$(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),_e=!Le&&!$(function(){return 7!=Object.defineProperty(V("div"),"a",{get:function(){return 7}}).a}),Ve=Function.prototype.call,Me=W?Ve.bind(Ve):function(){return Ve.apply(Ve,arguments)},Ne=G({}.isPrototypeOf),Be=P.Object,$e=Ae?function(e){return"symbol"==typeof e}:function(e){var t=ve("Symbol");return I(t)&&Ne(t.prototype,Be(e))},We=P.String,Ue=function(e){try{return We(e)}catch(e){return"Object"}},He=P.TypeError,ze=function(e){if(I(e))return e;throw He(Ue(e)+" is not a function")},Ge=function(e,t){var n=e[t];return null==n?void 0:ze(n)},Ke=P.TypeError,Ye=P.TypeError,Je=Fe("toPrimitive"),Xe=function(e){var t=function(e,t){if(!L(e)||$e(e))return e;var n,r=Ge(e,Je);if(r){if(void 0===t&&(t="default"),n=Me(r,e,t),!L(n)||$e(n))return n;throw Ye("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&I(n=e.toString)&&!L(r=Me(n,e)))return r;if(I(n=e.valueOf)&&!L(r=Me(n,e)))return r;if("string"!==t&&I(n=e.toString)&&!L(r=Me(n,e)))return r;throw Ke("Can't convert object to primitive value")}(e,t)}(e,"string");return $e(t)?t:t+""},Qe=P.TypeError,Ze=Object.defineProperty,et=Object.getOwnPropertyDescriptor,tt={f:Le?qe?function(e,t,n){if(Ie(e),t=Xe(t),Ie(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=et(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Ze(e,t,n)}:Ze:function(e,t,n){if(Ie(e),t=Xe(t),Ie(n),_e)try{return Ze(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Qe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},nt=Math.ceil,rt=Math.floor,ot=function(e){var t=+e;return t!=t||0===t?0:(t>0?rt:nt)(t)},it=Math.max,at=Math.min,lt=function(e,t){var n=ot(e);return n<0?it(n+t,0):at(n,t)},ut=Math.min,st=function(e){return e>0?ut(ot(e),9007199254740991):0},ct=function(e){return st(e.length)},ft=function(e){return function(t,n,r){var o,i=ne(t),a=ct(i),l=lt(r,a);if(e&&n!=n){for(;a>l;)if((o=i[l++])!=o)return!0}else for(;a>l;l++)if((e||l in i)&&i[l]===n)return e||l||0;return!e&&-1}},dt={includes:ft(!0),indexOf:ft(!1)},pt={},yt=dt.indexOf,gt=G([].push),ht=function(e,t){var n,r=ne(e),o=0,i=[];for(n in r)!fe(pt,n)&&fe(r,n)&&gt(i,n);for(;t.length>o;)fe(r,n=t[o++])&&(~yt(i,n)||gt(i,n));return i},vt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mt=Object.keys||function(e){return ht(e,vt)},bt=Le&&!qe?Object.defineProperties:function(e,t){Ie(e);for(var n,r=ne(t),o=mt(t),i=o.length,a=0;i>a;)tt.f(e,n=o[a++],r[n]);return e},Ot={f:bt},xt=ve("document","documentElement"),Et=le("keys"),St=function(e){return Et[e]||(Et[e]=ge(e))},wt=St("IE_PROTO"),jt=function(){},At=function(e){return"<script>"+e+"<\/script>"},Ct=function(e){e.write(At("")),e.close();var t=e.parentWindow.Object;return e=null,t},kt=function(){try{Se=new ActiveXObject("htmlfile")}catch(e){}var e,t;kt="undefined"!=typeof document?document.domain&&Se?Ct(Se):((t=V("iframe")).style.display="none",xt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(At("document.F=Object")),e.close(),e.F):Ct(Se);for(var n=vt.length;n--;)delete kt.prototype[vt[n]];return kt()};pt[wt]=!0;var Rt=Object.create||function(e,t){var n;return null!==e?(jt.prototype=Ie(e),n=new jt,jt.prototype=null,n[wt]=e):n=kt(),void 0===t?n:Ot.f(n,t)},Tt=Fe("unscopables"),Ft=Array.prototype;null==Ft[Tt]&&tt.f(Ft,Tt,{configurable:!0,value:Rt(null)});var Pt=function(e){Ft[Tt][e]=!0},Dt={},It=G(Function.toString);I(ae.inspectSource)||(ae.inspectSource=function(e){return It(e)});var Lt,qt,_t,Vt=ae.inspectSource,Mt=P.WeakMap,Nt=I(Mt)&&/native code/.test(Vt(Mt)),Bt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},$t=Le?function(e,t,n){return tt.f(e,t,Bt(1,n))}:function(e,t,n){return e[t]=n,e},Wt="Object already initialized",Ut=P.TypeError;if(Nt||ae.state){var Ht=ae.state||(ae.state=new(0,P.WeakMap)),zt=G(Ht.get),Gt=G(Ht.has),Kt=G(Ht.set);Lt=function(e,t){if(Gt(Ht,e))throw new Ut(Wt);return t.facade=e,Kt(Ht,e,t),t},qt=function(e){return zt(Ht,e)||{}},_t=function(e){return Gt(Ht,e)}}else{var Yt=St("state");pt[Yt]=!0,Lt=function(e,t){if(fe(e,Yt))throw new Ut(Wt);return t.facade=e,$t(e,Yt,t),t},qt=function(e){return fe(e,Yt)?e[Yt]:{}},_t=function(e){return fe(e,Yt)}}var Jt,Xt,Qt,Zt={set:Lt,get:qt,has:_t,enforce:function(e){return _t(e)?qt(e):Lt(e,{})},getterFor:function(e){return function(t){var n;if(!L(t)||(n=qt(t)).type!==e)throw Ut("Incompatible receiver, "+e+" required");return n}}},en={}.propertyIsEnumerable,tn=Object.getOwnPropertyDescriptor,nn=tn&&!en.call({1:2},1)?function(e){var t=tn(this,e);return!!t&&t.enumerable}:en,rn={f:nn},on=Object.getOwnPropertyDescriptor,an={f:Le?on:function(e,t){if(e=ne(e),t=Xe(t),_e)try{return on(e,t)}catch(e){}if(fe(e,t))return Bt(!Me(rn.f,e,t),e[t])}},ln=Function.prototype,un=Le&&Object.getOwnPropertyDescriptor,sn=fe(ln,"name"),cn={EXISTS:sn,PROPER:sn&&"something"===function(){}.name,CONFIGURABLE:sn&&(!Le||Le&&un(ln,"name").configurable)},fn=k(function(e){var t=cn.CONFIGURABLE,n=Zt.get,r=Zt.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var l,u=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;I(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!fe(i,"name")||t&&i.name!==f)&&$t(i,"name",f),(l=r(i)).source||(l.source=o.join("string"==typeof f?f:""))),e!==P?(u?!c&&e[n]&&(s=!0):delete e[n],s?e[n]=i:$t(e,n,i)):s?e[n]=i:oe(n,i)})(Function.prototype,"toString",function(){return I(this)&&n(this).source||Vt(this)})}),dn=vt.concat("length","prototype"),pn={f:Object.getOwnPropertyNames||function(e){return ht(e,dn)}},yn={f:Object.getOwnPropertySymbols},gn=G([].concat),hn=ve("Reflect","ownKeys")||function(e){var t=pn.f(Ie(e)),n=yn.f;return n?gn(t,n(e)):t},vn=function(e,t,n){for(var r=hn(t),o=tt.f,i=an.f,a=0;a<r.length;a++){var l=r[a];fe(e,l)||n&&fe(n,l)||o(e,l,i(t,l))}},mn=/#|\.prototype\./,bn=function(e,t){var n=xn[On(e)];return n==Sn||n!=En&&(I(t)?$(t):!!t)},On=bn.normalize=function(e){return String(e).replace(mn,".").toLowerCase()},xn=bn.data={},En=bn.NATIVE="N",Sn=bn.POLYFILL="P",wn=bn,jn=an.f,An=function(e,t){var n,r,o,i,a,l=e.target,u=e.global,s=e.stat;if(n=u?P:s?P[l]||oe(l,{}):(P[l]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=jn(n,r))&&a.value:n[r],!wn(u?r:l+(s?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;vn(i,o)}(e.sham||o&&o.sham)&&$t(i,"sham",!0),fn(n,r,i,e)}},Cn=!$(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),kn=St("IE_PROTO"),Rn=P.Object,Tn=Rn.prototype,Fn=Cn?Rn.getPrototypeOf:function(e){var t=se(e);if(fe(t,kn))return t[kn];var n=t.constructor;return I(n)&&t instanceof n?n.prototype:t instanceof Rn?Tn:null},Pn=Fe("iterator"),Dn=!1;[].keys&&("next"in(Qt=[].keys())?(Xt=Fn(Fn(Qt)))!==Object.prototype&&(Jt=Xt):Dn=!0);var In=null==Jt||$(function(){var e={};return Jt[Pn].call(e)!==e});In&&(Jt={}),I(Jt[Pn])||fn(Jt,Pn,function(){return this});var Ln={IteratorPrototype:Jt,BUGGY_SAFARI_ITERATORS:Dn},qn=tt.f,_n=Fe("toStringTag"),Vn=function(e,t,n){e&&!n&&(e=e.prototype),e&&!fe(e,_n)&&qn(e,_n,{configurable:!0,value:t})},Mn=Ln.IteratorPrototype,Nn=function(){return this},Bn=P.String,$n=P.TypeError,Wn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=G(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ie(n),function(e){if("object"==typeof e||I(e))return e;throw $n("Can't set "+Bn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Un=cn.PROPER,Hn=cn.CONFIGURABLE,zn=Ln.IteratorPrototype,Gn=Ln.BUGGY_SAFARI_ITERATORS,Kn=Fe("iterator"),Yn="keys",Jn="values",Xn="entries",Qn=function(){return this},Zn=tt.f,er="Array Iterator",tr=Zt.set,nr=Zt.getterFor(er),rr=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o="Array Iterator";e.prototype=Rt(Mn,{next:Bt(1,function(){var e=nr(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}})}),Vn(e,o,!1),Dt[o]=Nn}(n);var l,u,s,c=function(e){if(e===o&&y)return y;if(!Gn&&e in d)return d[e];switch(e){case Yn:case Jn:case Xn:return function(){return new n(this,e)}}return function(){return new n(this)}},f=!1,d=e.prototype,p=d[Kn]||d["@@iterator"]||d.values,y=!Gn&&p||c(o),g=d.entries||p;if(g&&(l=Fn(g.call(new e)))!==Object.prototype&&l.next&&(Fn(l)!==zn&&(Wn?Wn(l,zn):I(l[Kn])||fn(l,Kn,Qn)),Vn(l,"Array Iterator",!0)),Un&&p&&p.name!==Jn&&(Hn?$t(d,"name",Jn):(f=!0,y=function(){return Me(p,this)})),void(u={values:c(Jn),keys:c(Yn),entries:c(Xn)}))for(s in u)(Gn||f||!(s in d))&&fn(d,s,u[s]);else An({target:"Array",proto:!0,forced:Gn||f},u);return d[Kn]!==y&&fn(d,Kn,y,{name:o}),Dt.Array=y,u}(Array,0,function(e,t){tr(this,{type:er,target:ne(e),index:0,kind:t})},0,"values"),or=Dt.Arguments=Dt.Array;if(Pt("keys"),Pt("values"),Pt("entries"),Le&&"values"!==or.name)try{Zn(or,"name",{value:"values"})}catch(e){}var ir=Fe("iterator"),ar=Fe("toStringTag"),lr=rr.values,ur=function(e,t){if(e){if(e[ir]!==lr)try{$t(e,ir,lr)}catch(t){e[ir]=lr}if(e[ar]||$t(e,ar,t),D[t])for(var n in rr)if(e[n]!==rr[n])try{$t(e,n,rr[n])}catch(t){e[n]=rr[n]}}};for(var sr in D)ur(P[sr]&&P[sr].prototype,sr);ur(B,"DOMTokenList");var cr=Object.assign,fr=Object.defineProperty,dr=G([].concat),pr=!cr||$(function(){if(Le&&1!==cr({b:1},cr(fr({},"a",{enumerable:!0,get:function(){fr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=cr({},e)[n]||mt(cr({},t)).join("")!=r})?function(e,t){for(var n=se(e),r=arguments.length,o=1,i=yn.f,a=rn.f;r>o;)for(var l,u=Z(arguments[o++]),s=i?dr(mt(u),i(u)):mt(u),c=s.length,f=0;c>f;)l=s[f++],Le&&!Me(a,u,l)||(n[l]=u[l]);return n}:cr;An({target:"Object",stat:!0,forced:Object.assign!==pr},{assign:pr});var yr="function"==typeof Symbol&&Symbol.for,gr=yr?Symbol.for("react.element"):60103,hr=yr?Symbol.for("react.portal"):60106,vr=yr?Symbol.for("react.fragment"):60107,mr=yr?Symbol.for("react.strict_mode"):60108,br=yr?Symbol.for("react.profiler"):60114,Or=yr?Symbol.for("react.provider"):60109,xr=yr?Symbol.for("react.context"):60110,Er=yr?Symbol.for("react.async_mode"):60111,Sr=yr?Symbol.for("react.concurrent_mode"):60111,wr=yr?Symbol.for("react.forward_ref"):60112,jr=yr?Symbol.for("react.suspense"):60113,Ar=yr?Symbol.for("react.suspense_list"):60120,Cr=yr?Symbol.for("react.memo"):60115,kr=yr?Symbol.for("react.lazy"):60116,Rr=yr?Symbol.for("react.block"):60121,Tr=yr?Symbol.for("react.fundamental"):60117,Fr=yr?Symbol.for("react.responder"):60118,Pr=yr?Symbol.for("react.scope"):60119;function Dr(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case gr:switch(e=e.type){case Er:case Sr:case vr:case br:case mr:case jr:return e;default:switch(e=e&&e.$$typeof){case xr:case wr:case kr:case Cr:case Or:return e;default:return t}}case hr:return t}}}function Ir(e){return Dr(e)===Sr}var Lr={AsyncMode:Er,ConcurrentMode:Sr,ContextConsumer:xr,ContextProvider:Or,Element:gr,ForwardRef:wr,Fragment:vr,Lazy:kr,Memo:Cr,Portal:hr,Profiler:br,StrictMode:mr,Suspense:jr,isAsyncMode:function(e){return Ir(e)||Dr(e)===Er},isConcurrentMode:Ir,isContextConsumer:function(e){return Dr(e)===xr},isContextProvider:function(e){return Dr(e)===Or},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===gr},isForwardRef:function(e){return Dr(e)===wr},isFragment:function(e){return Dr(e)===vr},isLazy:function(e){return Dr(e)===kr},isMemo:function(e){return Dr(e)===Cr},isPortal:function(e){return Dr(e)===hr},isProfiler:function(e){return Dr(e)===br},isStrictMode:function(e){return Dr(e)===mr},isSuspense:function(e){return Dr(e)===jr},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===vr||e===Sr||e===br||e===mr||e===jr||e===Ar||"object"==typeof e&&null!==e&&(e.$$typeof===kr||e.$$typeof===Cr||e.$$typeof===Or||e.$$typeof===xr||e.$$typeof===wr||e.$$typeof===Tr||e.$$typeof===Fr||e.$$typeof===Pr||e.$$typeof===Rr)},typeOf:Dr};function qr(){}function _r(){}k(function(e,t){}),k(function(e){e.exports=Lr}),_r.resetWarningCache=qr;var Vr=k(function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_r,resetWarningCache:qr};return n.PropTypes=n,n}()});const Mr=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,Nr=e=>{let{children:n,initialData:r,initialStep:o,render:i,validateOnStepChange:a,onChange:l}=e;const[u]=t.useState("stages-"+ +new Date),[s,c]=t.useState(r),[f,d]=t.useState([]),[p,y]=t.useState({}),[g,v]=t.useState(o||0),[m,b]=t.useState([]),O=e=>{const t=m&&m[e]?m[e].key:e;return s&&s[t]?s[t]:{}},x=(e,t)=>(m[t]||(m[t]={key:e,visible:!0},b([...m])),e),E=(e,t,n)=>{const r=Object.assign({},s),o=m&&m[n]?m[n].key:n;Mr()&&window.stagesLogging('Handle onChange for "'+o+'"',u),p[n]=t,y(Object.assign({},p)),r[o]=e,c(Object.assign({},r)),"function"==typeof l&&l({data:r,errors:p})};t.useEffect(()=>{Mr()&&window.stagesLogging({id:u,keys:m,data:s,errors:p,currentStep:g})},[m,s,p,g]),t.useEffect(()=>{Mr()&&window.stagesLogging("Init Stages",u),n.map((e,t)=>e({index:t,setStepKey:x,initializing:!0})).filter(e=>e)},[]),t.useEffect(()=>{if(a){const e=w();e<g&&v(-1===e?0:e+1)}d(n.map((e,t)=>e({data:O(t),allData:s,onChange:E,onNav:S,isActive:t===g,index:t,errors:p[t]||{},setStepKey:x})).filter((e,t)=>{const n=null!==e;return m[t]&&(m[t].visible=n),n}))},[g,s]);const S=(e,t)=>{let n=g;if(Mr()&&window.stagesLogging('On nav "'+e+'" -> "'+t+'"',u),"next"===e){let e=!1;for(let t=g+1;t<m.length;t++)m[t].visible&&!e&&(n=t,e=!0)}if("prev"===e){let e=!1;for(let t=g-1;t>=0;t--)m[t].visible&&!e&&(n=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<m.length;t++)m[t].visible&&!e&&(n=t,e=!0)}if("last"===e){let e=!1;for(let t=m.length-1;t>=0;t--)m[t].visible&&!e&&(n=t,e=!0)}if("lastValid"===e&&(n=w()),"step"===e&&m[t]&&m[t].visible)n=Number(t);else if("step"===e&&"string"==typeof t){const e=h.default(m,{key:t});e>-1&&(n=e)}n<0&&(n=0),n>m.length&&(n=m.length),v(n)},w=()=>{let e=-1,t=!1;return Object.keys(p).forEach(n=>{const r=h.default(m,{key:n});(0===Object.keys(p[n]).length||r>-1&&!m[r].visible)&&!t?e=Number(n):t=!0}),e};return 0===f.length?null:i?i({navigationProps:{currentStep:g,data:s,onChangeStep:e=>{const t=w();Mr()&&window.stagesLogging('On change step "'+e+'"',u),(t+1>=e||!1===a)&&v(e)},errors:p,keys:m,stepCount:f.length,lastValidStep:w()},progressionProps:(()=>{const e=f.length,t=w();let n=0;return Object.keys(p).forEach(e=>{const r=O(e);e<=t&&0===Object.keys(p[e]).length&&Object.keys(r).length>0&&n++}),{currentStep:g,stepCount:e,validSteps:n,percentage:100/e*n,data:s,errors:p}})(),routerProps:{step:g,onChange:v,keys:m},steps:f}):null};Nr.propTypes={children:Vr.arrayOf(Vr.oneOfType([Vr.node,Vr.func])).isRequired,initialData:Vr.object,render:Vr.oneOfType([Vr.node,Vr.func]).isRequired,initialStep:Vr.number,validateOnStepChange:Vr.bool},Nr.defaultProps={initialData:{},validateOnStepChange:!0};var Br={};Br[Fe("toStringTag")]="z";var $r,Wr,Ur="[object z]"===String(Br),Hr=Fe("toStringTag"),zr=P.Object,Gr="Arguments"==J(function(){return arguments}()),Kr=Ur?J:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=zr(e),Hr))?n:Gr?J(t):"Object"==(r=J(t))&&I(t.callee)?"Arguments":r},Yr=P.String,Jr=function(e){if("Symbol"===Kr(e))throw TypeError("Cannot convert a Symbol value to a string");return Yr(e)},Xr=function(){var e=Ie(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Qr=P.RegExp,Zr=$(function(){var e=Qr("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),eo=Zr||$(function(){return!Qr("a","y").sticky}),to={BROKEN_CARET:Zr||$(function(){var e=Qr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:eo,UNSUPPORTED_Y:Zr},no=P.RegExp,ro=$(function(){var e=no(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),oo=P.RegExp,io=$(function(){var e=oo("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),ao=Zt.get,lo=le("native-string-replace",String.prototype.replace),uo=RegExp.prototype.exec,so=uo,co=G("".charAt),fo=G("".indexOf),po=G("".replace),yo=G("".slice),go=(Wr=/b*/g,Me(uo,$r=/a/,"a"),Me(uo,Wr,"a"),0!==$r.lastIndex||0!==Wr.lastIndex),ho=to.BROKEN_CARET,vo=void 0!==/()??/.exec("")[1];(go||vo||ho||ro||io)&&(so=function(e){var t,n,r,o,i,a,l,u=this,s=ao(u),c=Jr(e),f=s.raw;if(f)return f.lastIndex=u.lastIndex,t=Me(so,f,c),u.lastIndex=f.lastIndex,t;var d=s.groups,p=ho&&u.sticky,y=Me(Xr,u),g=u.source,h=0,v=c;if(p&&(y=po(y,"y",""),-1===fo(y,"g")&&(y+="g"),v=yo(c,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==co(c,u.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,h++),n=new RegExp("^(?:"+g+")",y)),vo&&(n=new RegExp("^"+g+"$(?!\\s)",y)),go&&(r=u.lastIndex),o=Me(uo,p?n:u,v),p?o?(o.input=yo(o.input,h),o[0]=yo(o[0],h),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:go&&o&&(u.lastIndex=u.global?o.index+o[0].length:r),vo&&o&&o.length>1&&Me(lo,o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o&&d)for(o.groups=a=Rt(null),i=0;i<d.length;i++)a[(l=d[i])[0]]=o[l[1]];return o});var mo=so;An({target:"RegExp",proto:!0,forced:/./.exec!==mo},{exec:mo});var bo=Function.prototype,Oo=bo.apply,xo=bo.call,Eo="object"==typeof Reflect&&Reflect.apply||(W?xo.bind(Oo):function(){return xo.apply(Oo,arguments)}),So=Fe("species"),wo=RegExp.prototype,jo=Fe("match"),Ao=function(e){var t;return L(e)&&(void 0!==(t=e[jo])?!!t:"RegExp"==J(e))},Co=function(){},ko=[],Ro=ve("Reflect","construct"),To=/^\s*(?:class|function)\b/,Fo=G(To.exec),Po=!To.exec(Co),Do=function(e){if(!I(e))return!1;try{return Ro(Co,ko,e),!0}catch(e){return!1}},Io=function(e){if(!I(e))return!1;switch(Kr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Po||!!Fo(To,Vt(e))}catch(e){return!0}};Io.sham=!0;var Lo=!Ro||$(function(){var e;return Do(Do.call)||!Do(Object)||!Do(function(){e=!0})||e})?Io:Do,qo=P.TypeError,_o=Fe("species"),Vo=function(e,t){var n,r=Ie(e).constructor;return void 0===r||null==(n=Ie(r)[_o])?t:function(e){if(Lo(e))return e;throw qo(Ue(e)+" is not a constructor")}(n)},Mo=G("".charAt),No=G("".charCodeAt),Bo=G("".slice),$o=function(e){return function(t,n){var r,o,i=Jr(te(t)),a=ot(n),l=i.length;return a<0||a>=l?e?"":void 0:(r=No(i,a))<55296||r>56319||a+1===l||(o=No(i,a+1))<56320||o>57343?e?Mo(i,a):r:e?Bo(i,a,a+2):o-56320+(r-55296<<10)+65536}},Wo=($o(!1),$o(!0)),Uo=function(e,t,n){return t+(n?Wo(e,t).length:1)},Ho=P.Array,zo=Math.max,Go=function(e,t,n){for(var r,o,i,a=ct(e),l=lt(t,a),u=lt(void 0===n?a:n,a),s=Ho(zo(u-l,0)),c=0;l<u;l++,c++)r=s,o=e[l],(i=Xe(c))in r?tt.f(r,i,Bt(0,o)):r[i]=o;return s.length=c,s},Ko=P.TypeError,Yo=function(e,t){var n=e.exec;if(I(n)){var r=Me(n,e,t);return null!==r&&Ie(r),r}if("RegExp"===J(e))return Me(mo,e,t);throw Ko("RegExp#exec called on incompatible receiver")},Jo=to.UNSUPPORTED_Y,Xo=4294967295,Qo=Math.min,Zo=[].push,ei=G(/./.exec),ti=G(Zo),ni=G("".slice),ri=!$(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});!function(e,t,n,r){var o=Fe(e),i=!$(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),a=i&&!$(function(){var e=!1,t=/a/;return(t={}).constructor={},t.constructor[So]=function(){return t},t.flags="",t[o]=/./[o],t.exec=function(){return e=!0,null},t[o](""),!e});if(!i||!a||n){var l=G(/./[o]),u=t(o,""[e],function(e,t,n,r,o){var a=G(e),u=t.exec;return u===mo||u===wo.exec?i&&!o?{done:!0,value:l(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}});fn(String.prototype,e,u[0]),fn(wo,o,u[1])}r&&$t(wo[o],"sham",!0)}("split",function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=Jr(te(this)),o=void 0===n?Xo:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!Ao(e))return Me(t,r,e,o);for(var i,a,l,u=[],s=0,c=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=Me(mo,c,r))&&!((a=c.lastIndex)>s&&(ti(u,ni(r,s,i.index)),i.length>1&&i.index<r.length&&Eo(Zo,u,Go(i,1)),l=i[0].length,s=a,u.length>=o));)c.lastIndex===i.index&&c.lastIndex++;return s===r.length?!l&&ei(c,"")||ti(u,""):ti(u,ni(r,s)),u.length>o?Go(u,0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:Me(t,this,e,n)}:t,[function(t,n){var o=te(this),i=null==t?void 0:Ge(t,e);return i?Me(i,t,o,n):Me(r,Jr(o),t,n)},function(e,o){var i=Ie(this),a=Jr(e),l=n(r,i,a,o,r!==t);if(l.done)return l.value;var u=Vo(i,RegExp),s=i.unicode,c=new u(Jo?"^(?:"+i.source+")":i,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Jo?"g":"y")),f=void 0===o?Xo:o>>>0;if(0===f)return[];if(0===a.length)return null===Yo(c,a)?[a]:[];for(var d=0,p=0,y=[];p<a.length;){c.lastIndex=Jo?0:p;var g,h=Yo(c,Jo?ni(a,p):a);if(null===h||(g=Qo(st(c.lastIndex+(Jo?p:0)),a.length))===d)p=Uo(a,p,s);else{if(ti(y,ni(a,d,p)),y.length===f)return y;for(var v=1;v<=h.length-1;v++)if(ti(y,h[v]),y.length===f)return y;p=d=g}}return ti(y,ni(a,d)),y}]},!ri,Jo);var oi=P.Promise,ii=Fe("species"),ai=P.TypeError,li=G(G.bind),ui=function(e,t){return ze(e),void 0===t?e:W?li(e,t):function(){return e.apply(t,arguments)}},si=Fe("iterator"),ci=Array.prototype,fi=Fe("iterator"),di=function(e){if(null!=e)return Ge(e,fi)||Ge(e,"@@iterator")||Dt[Kr(e)]},pi=P.TypeError,yi=function(e,t,n){var r,o;Ie(e);try{if(!(r=Ge(e,"return"))){if("throw"===t)throw n;return n}r=Me(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return Ie(r),n},gi=P.TypeError,hi=function(e,t){this.stopped=e,this.result=t},vi=hi.prototype,mi=function(e,t,n){var r,o,i,a,l,u,s,c,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),y=ui(t,n&&n.that),g=function(e){return r&&yi(r,"normal",e),new hi(!0,e)},h=function(e){return f?(Ie(e),p?y(e[0],e[1],g):y(e[0],e[1])):p?y(e,g):y(e)};if(d)r=e;else{if(!(o=di(e)))throw gi(Ue(e)+" is not iterable");if(void 0!==(c=o)&&(Dt.Array===c||ci[si]===c)){for(i=0,a=ct(e);a>i;i++)if((l=h(e[i]))&&Ne(vi,l))return l;return new hi(!1)}r=function(e,t){var n=arguments.length<2?di(e):t;if(ze(n))return Ie(Me(n,e));throw pi(Ue(e)+" is not iterable")}(e,o)}for(u=r.next;!(s=Me(u,r)).done;){try{l=h(s.value)}catch(e){yi(r,"throw",e)}if("object"==typeof l&&l&&Ne(vi,l))return l}return new hi(!1)},bi=Fe("iterator"),Oi=!1;try{var xi=0,Ei={next:function(){return{done:!!xi++}},return:function(){Oi=!0}};Ei[bi]=function(){return this},Array.from(Ei,function(){throw 2})}catch(e){}var Si,wi,ji,Ai,Ci=G([].slice),ki=P.TypeError,Ri=function(e,t){if(e<t)throw ki("Not enough arguments");return e},Ti=/(?:ipad|iphone|ipod).*applewebkit/i.test(me),Fi="process"==J(P.process),Pi=P.setImmediate,Di=P.clearImmediate,Ii=P.process,Li=P.Dispatch,qi=P.Function,_i=P.MessageChannel,Vi=P.String,Mi=0,Ni={};try{Si=P.location}catch(e){}var Bi=function(e){if(fe(Ni,e)){var t=Ni[e];delete Ni[e],t()}},$i=function(e){return function(){Bi(e)}},Wi=function(e){Bi(e.data)},Ui=function(e){P.postMessage(Vi(e),Si.protocol+"//"+Si.host)};Pi&&Di||(Pi=function(e){Ri(arguments.length,1);var t=I(e)?e:qi(e),n=Ci(arguments,1);return Ni[++Mi]=function(){Eo(t,void 0,n)},wi(Mi),Mi},Di=function(e){delete Ni[e]},Fi?wi=function(e){Ii.nextTick($i(e))}:Li&&Li.now?wi=function(e){Li.now($i(e))}:_i&&!Ti?(Ai=(ji=new _i).port2,ji.port1.onmessage=Wi,wi=ui(Ai.postMessage,Ai)):P.addEventListener&&I(P.postMessage)&&!P.importScripts&&Si&&"file:"!==Si.protocol&&!$(Ui)?(wi=Ui,P.addEventListener("message",Wi,!1)):wi="onreadystatechange"in V("script")?function(e){xt.appendChild(V("script")).onreadystatechange=function(){xt.removeChild(this),Bi(e)}}:function(e){setTimeout($i(e),0)});var Hi,zi,Gi,Ki,Yi,Ji,Xi,Qi,Zi={set:Pi,clear:Di},ea=/ipad|iphone|ipod/i.test(me)&&void 0!==P.Pebble,ta=/web0s(?!.*chrome)/i.test(me),na=Zi.set,ra=P.MutationObserver||P.WebKitMutationObserver,oa=P.document,ia=P.process,aa=P.Promise,la=(0,an.f)(P,"queueMicrotask"),ua=la&&la.value;ua||(Hi=function(){var e,t;for(Fi&&(e=ia.domain)&&e.exit();zi;){t=zi.fn,zi=zi.next;try{t()}catch(e){throw zi?Ki():Gi=void 0,e}}Gi=void 0,e&&e.enter()},Ti||Fi||ta||!ra||!oa?!ea&&aa&&aa.resolve?((Xi=aa.resolve(void 0)).constructor=aa,Qi=ui(Xi.then,Xi),Ki=function(){Qi(Hi)}):Fi?Ki=function(){ia.nextTick(Hi)}:(na=ui(na,P),Ki=function(){na(Hi)}):(Yi=!0,Ji=oa.createTextNode(""),new ra(Hi).observe(Ji,{characterData:!0}),Ki=function(){Ji.data=Yi=!Yi}));var sa=ua||function(e){var t={fn:e,next:void 0};Gi&&(Gi.next=t),zi||(zi=t,Ki()),Gi=t},ca=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=ze(t),this.reject=ze(n)},fa={f:function(e){return new ca(e)}},da=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},pa=function(){this.head=null,this.tail=null};pa.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ya,ga,ha,va,ma,ba=pa,Oa="object"==typeof window,xa=Zi.set,Ea=Fe("species"),Sa="Promise",wa=Zt.getterFor(Sa),ja=Zt.set,Aa=Zt.getterFor(Sa),Ca=oi&&oi.prototype,ka=oi,Ra=Ca,Ta=P.TypeError,Fa=P.document,Pa=P.process,Da=fa.f,Ia=Da,La=!!(Fa&&Fa.createEvent&&P.dispatchEvent),qa=I(P.PromiseRejectionEvent),_a="unhandledrejection",Va=!1,Ma=wn(Sa,function(){var e=Vt(ka),t=e!==String(ka);if(!t&&66===we)return!0;if(we>=51&&/native code/.test(e))return!1;var n=new ka(function(e){e(1)}),r=function(e){e(function(){},function(){})};return(n.constructor={})[Ea]=r,!(Va=n.then(function(){})instanceof r)||!t&&Oa&&!qa}),Na=Ma||!function(e,t){if(!Oi)return!1;var n=!1;try{var r={};r[bi]=function(){return{next:function(){return{done:n=!0}}}},ka.all(r).catch(function(){})}catch(e){}return n}(),Ba=function(e){var t;return!(!L(e)||!I(t=e.then))&&t},$a=function(e,t){var n,r,o,i=t.value,a=1==t.state,l=a?e.ok:e.fail,u=e.resolve,s=e.reject,c=e.domain;try{l?(a||(2===t.rejection&&Ga(t),t.rejection=1),!0===l?n=i:(c&&c.enter(),n=l(i),c&&(c.exit(),o=!0)),n===e.promise?s(Ta("Promise-chain cycle")):(r=Ba(n))?Me(r,n,u,s):u(n)):s(i)}catch(e){c&&!o&&c.exit(),s(e)}},Wa=function(e,t){e.notified||(e.notified=!0,sa(function(){for(var n,r=e.reactions;n=r.get();)$a(n,e);e.notified=!1,t&&!e.rejection&&Ha(e)}))},Ua=function(e,t,n){var r,o;La?((r=Fa.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),P.dispatchEvent(r)):r={promise:t,reason:n},!qa&&(o=P["on"+e])?o(r):e===_a&&function(e,t){var n=P.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ha=function(e){Me(xa,P,function(){var t,n=e.facade,r=e.value;if(za(e)&&(t=da(function(){Fi?Pa.emit("unhandledRejection",r,n):Ua(_a,n,r)}),e.rejection=Fi||za(e)?2:1,t.error))throw t.value})},za=function(e){return 1!==e.rejection&&!e.parent},Ga=function(e){Me(xa,P,function(){var t=e.facade;Fi?Pa.emit("rejectionHandled",t):Ua("rejectionhandled",t,e.value)})},Ka=function(e,t,n){return function(r){e(t,r,n)}},Ya=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Wa(e,!0))},Ja=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Ta("Promise can't be resolved itself");var r=Ba(t);r?sa(function(){var n={done:!1};try{Me(r,t,Ka(Ja,n,e),Ka(Ya,n,e))}catch(t){Ya(n,t,e)}}):(e.value=t,e.state=1,Wa(e,!1))}catch(t){Ya({done:!1},t,e)}}};if(Ma&&(ka=function(e){!function(e,t){if(Ne(t,e))return e;throw ai("Incorrect invocation")}(this,Ra),ze(e),Me(ya,this);var t=wa(this);try{e(Ka(Ja,t),Ka(Ya,t))}catch(e){Ya(t,e)}},(ya=function(e){ja(this,{type:Sa,done:!1,notified:!1,parent:!1,reactions:new ba,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)fn(e,r,t[r],void 0);return e}(Ra=ka.prototype,{then:function(e,t){var n=Aa(this),r=Da(Vo(this,ka));return n.parent=!0,r.ok=!I(e)||e,r.fail=I(t)&&t,r.domain=Fi?Pa.domain:void 0,0==n.state?n.reactions.add(r):sa(function(){$a(r,n)}),r.promise},catch:function(e){return this.then(void 0,e)}}),ga=function(){var e=new ya,t=wa(e);this.promise=e,this.resolve=Ka(Ja,t),this.reject=Ka(Ya,t)},fa.f=Da=function(e){return e===ka||e===ha?new ga(e):Ia(e)},I(oi)&&Ca!==Object.prototype)){va=Ca.then,Va||(fn(Ca,"then",function(e,t){var n=this;return new ka(function(e,t){Me(va,n,e,t)}).then(e,t)},{unsafe:!0}),fn(Ca,"catch",Ra.catch,{unsafe:!0}));try{delete Ca.constructor}catch(e){}Wn&&Wn(Ca,Ra)}An({global:!0,wrap:!0,forced:Ma},{Promise:ka}),Vn(ka,Sa,!1),ma=ve(Sa),Le&&ma&&!ma[ii]&&(0,tt.f)(ma,ii,{configurable:!0,get:function(){return this}}),ha=ve(Sa),An({target:Sa,stat:!0,forced:Ma},{reject:function(e){var t=Da(this);return Me(t.reject,void 0,e),t.promise}}),An({target:Sa,stat:!0,forced:Ma},{resolve:function(e){return function(e,t){if(Ie(e),L(t)&&t.constructor===e)return t;var n=fa.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),An({target:Sa,stat:!0,forced:Na},{all:function(e){var t=this,n=Da(t),r=n.resolve,o=n.reject,i=da(function(){var n=ze(t.resolve),i=[],a=0,l=1;mi(e,function(e){var u=a++,s=!1;l++,Me(n,t,e).then(function(e){s||(s=!0,i[u]=e,--l||r(i))},o)}),--l||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Da(t),r=n.reject,o=da(function(){var o=ze(t.resolve);mi(e,function(e){Me(o,t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});var Xa=G(1..valueOf),Qa=P.RangeError,Za=P.RangeError,el=P.String,tl=Math.floor,nl=G(function(e){var t=Jr(te(this)),n="",r=ot(e);if(r<0||Infinity==r)throw Qa("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}),rl=G("".slice),ol=G(1..toFixed),il=function(e,t,n){return 0===t?n:t%2==1?il(e,t-1,n*e):il(e*e,t/2,n)},al=function(e,t,n){for(var r=-1,o=n;++r<6;)e[r]=(o+=t*e[r])%1e7,o=tl(o/1e7)},ll=function(e,t){for(var n=6,r=0;--n>=0;)e[n]=tl((r+=e[n])/t),r=r%t*1e7},ul=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=el(e[t]);n=""===n?r:n+nl("0",7-r.length)+r}return n},sl=$(function(){return"0.000"!==ol(8e-5,3)||"1"!==ol(.9,0)||"1.25"!==ol(1.255,2)||"1000000000000000128"!==ol(0xde0b6b3a7640080,0)})||!$(function(){ol({})});An({target:"Number",proto:!0,forced:sl},{toFixed:function(e){var t,n,r,o,i=Xa(this),a=ot(e),l=[0,0,0,0,0,0],u="",s="0";if(a<0||a>20)throw Za("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return el(i);if(i<0&&(u="-",i=-i),i>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*il(2,69,1))-69,n=t<0?i*il(2,-t,1):i/il(2,t,1),n*=4503599627370496,(t=52-t)>0){for(al(l,0,n),r=a;r>=7;)al(l,1e7,0),r-=7;for(al(l,il(10,r,1),0),r=t-1;r>=23;)ll(l,1<<23),r-=23;ll(l,1<<r),al(l,1,1),ll(l,2),s=ul(l)}else al(l,0,n),al(l,1<<-t,0),s=ul(l)+nl("0",a);return a>0?u+((o=s.length)<=a?"0."+nl("0",a-o)+s:rl(s,0,o-a)+"."+rl(s,o-a)):u+s}});var cl,fl=Math.floor,dl=function(e,t){var n=e.length,r=fl(n/2);return n<8?pl(e,t):yl(e,dl(Go(e,0,r),t),dl(Go(e,r),t),t)},pl=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},yl=function(e,t,n,r){for(var o=t.length,i=n.length,a=0,l=0;a<o||l<i;)e[a+l]=a<o&&l<i?r(t[a],n[l])<=0?t[a++]:n[l++]:a<o?t[a++]:n[l++];return e},gl=dl,hl=me.match(/firefox\/(\d+)/i),vl=!!hl&&+hl[1],ml=/MSIE|Trident/.test(me),bl=me.match(/AppleWebKit\/(\d+)\./),Ol=!!bl&&+bl[1],xl=[],El=G(xl.sort),Sl=G(xl.push),wl=$(function(){xl.sort(void 0)}),jl=$(function(){xl.sort(null)}),Al=!!(cl=[].sort)&&$(function(){cl.call(null,function(){return 1},1)}),Cl=!$(function(){if(we)return we<70;if(!(vl&&vl>3)){if(ml)return!0;if(Ol)return Ol<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)xl.push({k:t+r,v:n})}for(xl.sort(function(e,t){return t.v-e.v}),r=0;r<xl.length;r++)t=xl[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}});An({target:"Array",proto:!0,forced:wl||!jl||!Al||!Cl},{sort:function(e){void 0!==e&&ze(e);var t=se(this);if(Cl)return void 0===e?El(t):El(t,e);var n,r,o=[],i=ct(t);for(r=0;r<i;r++)r in t&&Sl(o,t[r]);for(gl(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Jr(t)>Jr(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<i;)delete t[r++];return t}});var kl,Rl=P.TypeError,Tl=function(e){if(Ao(e))throw Rl("The method doesn't accept regular expressions");return e},Fl=Fe("match"),Pl=an.f,Dl=G("".endsWith),Il=G("".slice),Ll=Math.min,ql=function(e){var t=/./;try{"/./".endsWith(t)}catch(e){try{return t[Fl]=!1,"/./".endsWith(t)}catch(e){}}return!1}(),_l=!(ql||(kl=Pl(String.prototype,"endsWith"),!kl||kl.writable));An({target:"String",proto:!0,forced:!_l&&!ql},{endsWith:function(e){var t=Jr(te(this));Tl(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:Ll(st(n),r),i=Jr(e);return Dl?Dl(t,i,o):Il(t,o-i.length,o)===i}});const Vl=(e,t,n)=>n&&Array.isArray(e)?"number"===t?e.map(e=>Number(e)):"string"===t?e.map(e=>String(e)):"boolean"===t?e.map(e=>Boolean(e)):"date"===t?e.map(e=>new Date(e)):e:"number"===t?Number(e):"string"===t?String(e):"boolean"===t?Boolean(e):"date"===t?new Date(e):e,Ml=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,Nl={};let Bl,$l,Wl=0;const Ul={},Hl=e=>{let{config:n,data:r,render:o,fields:i,onChange:a,isVisible:l,isDisabled:u,id:s,onValidation:c,parentRunValidation:f,validateOn:d,throttleWait:p,customEvents:y,enableUndo:v,undoMaxDepth:C=10,customRuleHandlers:k}=e;const[R,T]=t.useState({}),F=Object.assign({},r);j.default(F,R);const[P]=t.useState("form-"+(s||"noid")+"-"+ +new Date),[D,I]=t.useState(!1),[L,q]=t.useState({}),[_,V]=t.useState(!1),[M,N]=t.useState([]),[B,$]=t.useState(0),[W,U]=t.useState(!1),[H,z]=t.useState(!1),[G,K]=t.useState({}),[Y,J]=t.useState({}),[X,Q]=t.useState(),[Z,ee]=t.useState({}),[te,ne]=t.useState(!1),[re,oe]=t.useState(),[ie,ae]=t.useState(),[le,ue]=t.useState([]),se=((e,t,n,r,o)=>{let i="function"==typeof e.fields?e.fields(t,n,r):[];const a=o=>"string"==typeof o&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[o]?e.fieldConfigs[o](t,n,r):"function"==typeof o?o(t,n,r):o;return i=i.map(e=>("object"!=typeof e||"group"!==e.type&&"collection"!==e.type||!Array.isArray(e.fields)||(e.fields=e.fields.map(e=>a(e))),a(e))),o.forEach(e=>{const r=m.default(i,e.path);if(Array.isArray(r)){if("add"===e.action&&r.push(e.fields(t,n)),"remove"===e.action){const o=e.fields(t,n),i=h.default(r,{id:o.id});i>-1&&r.splice(i,1)}S.default(i,e.path,r)}}),i})(n,F,X,R,le),ce=((e,t)=>{const n=[];return function r(o,i){void 0===o&&(o="");let a=[o?m.default(e,o):e],l=[];Array.isArray(a[0])||(l=Object.keys(a[0]),a=Object.values(a[0])),a.forEach((e,a)=>{const u=void 0!==l[a]?l[a]:void 0;Array.isArray(e)&&e.forEach((e,a)=>{const l=i?i+"."+e.id:e.id,s=m.default(t,l),c=m.default(t,i);if((u&&c&&c.__typename===u||!u)&&n.push({path:l,config:e,data:s}),"collection"===e.type){const n=i?m.default(t,i+"."+e.id):t[e.id];n&&Array.isArray(n)&&n.forEach((t,n)=>{r(o+"["+a+"].fields",i?i+"."+e.id+"["+n+"]":e.id+"["+n+"]")})}else"group"===e.type&&r(o+"["+a+"].fields",l)})})}(),n})(se,F);t.useEffect(()=>{if(r&&!_){Ml()&&window.stagesLogging("Set initial data",P),ce.forEach(e=>{void 0!==e.config.defaultValue&&void 0===m.default(r,e.path)&&(S.default(r,e.path,e.config.defaultValue),S.default(F,e.path,e.config.defaultValue))});const e=A.default(r);V(JSON.parse(e))}},[r]),t.useEffect(()=>{Ml()&&window.stagesLogging({id:P,data:r,errors:Z,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L,loading:te,parsedFieldConfig:se})},[r,Z,D,re,ie,L,te]);const fe=e=>"collection"===e||"subform"===e||"group"===e||"config"===e,de=(e,t,n,r)=>{if(!i[t.type])return!0;const o=m.default(n,e),a=!fe(t.type)&&i[t.type].isValid(o,t);return!fe(t.type)&&t.customValidation?t.customValidation({data:o,allData:n,interfaceState:R,fieldConfig:t,isValid:a,fieldHasFocus:!(!re||re!==e),fieldIsDirty:void 0!==L[e],triggeringEvent:r}):a},pe=(e,t,n,r,o)=>{const a=b.default(ce,{path:e}).config;Ml()&&window.stagesLogging('Validate field "'+e+'"',P);const l=de(e,a,n,t),u=m.default(n,e);return r[e]&&delete r[e],fe(a.type)||!0===l?"collection"===a.type&&a.isRequired&&(!u||0===u.length||1===u.length&&0===Object.keys(u[0]).length)?(o||(o=e),r[e]={value:u,field:a}):"collection"===a.type&&(Array.isArray(a.fields)?a.fields.forEach(o=>{u&&u.forEach((l,s)=>{if(!(a.isRequired||l&&0!==Object.keys(l).length))return;const c=de(o,l,t);if(i[o.type]&&!0!==c)r[e]={value:u,subField:o,errorCode:!1!==c?c:void 0};else if(i[o.type]&&o.isUnique){let t=m.default(n,e,[]).filter(e=>void 0!==e[o.id]).map(e=>e[o.id]);[...new Set(t)].length!==t.length&&(r[e]={value:u,subField:o,errorCode:"notUnique"})}})}):u&&u.forEach((n,o)=>{(a.isRequired||n&&0!==Object.keys(n).length)&&a.fields[n.__typename]&&a.fields[n.__typename].forEach(o=>{const a=de(o,n,t);i[o.type]&&!0!==a&&(r[e]={value:u,subField:o,errorCode:!1!==a?a:void 0})})})):(o||(o=e),r[e]={value:u,field:a,errorCode:!1!==l?l:void 0}),"collection"===a.type&&a.uniqEntries&&u&&x.default(u,(e,t)=>A.default(e)===A.default(t)).length!==u.length&&(r[e]={value:u,field:a}),"collection"===a.type&&a.rules&&"object"==typeof a.rules&&u&&Object.keys(a.rules).forEach(t=>{const n=a.rules[t];Object.keys(n).forEach(o=>{const i=n[o],l=t.indexOf(",")>-1?t.split(","):[t],s=o.indexOf(",")>-1?o.split(","):[o],c=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);const n=[];return e.forEach(e=>{t.forEach(t=>{n.push([e,t])})}),n}(l,s);let f=!0;if(i.maxCount&&"number"==typeof i.maxCount&&c.forEach(e=>{let t=0;u.forEach(n=>m.default(n,e[0])===e[1]?t++:void 0),t>i.maxCount&&(f=!1)}),i.minCount&&"number"==typeof i.minCount&&c.forEach(e=>{let t=0;u.forEach(n=>m.default(n,e[0])===e[1]?t++:void 0),t<i.minCount&&(f=!1)}),i.exactCount&&"number"==typeof i.exactCount&&c.forEach(e=>{let t=0;u.forEach(n=>m.default(n,e[0])===e[1]?t++:void 0),t!==i.exactCount&&(f=!1)}),i.sameCountAs&&"string"==typeof i.sameCountAs&&c.forEach(e=>{let t=0,n=0;u.forEach(r=>{m.default(r,e[0])===e[1]&&t++,m.default(r,e[0])===i.sameCountAs&&n++}),t!==n&&(f=!1)}),i.differentCountAs&&"string"==typeof i.differentCountAs&&c.forEach(e=>{let t=0,n=0;u.forEach(r=>{m.default(r,e[0])===e[1]&&t++,m.default(r,e[0])===i.differentCountAs&&n++}),t===n&&(f=!1)}),(i.sameSumAs&&"string"==typeof i.sameSumAs||i.differentSumAs&&"string"==typeof i.differentSumAs||i.biggerSumAs&&"string"==typeof i.biggerSumAs||i.smallerSumAs&&"string"==typeof i.smallerSumAs)&&c.forEach(e=>{let t=0,n=0;u.forEach(r=>{const o=Number(m.default(r,e[0])),a=Number(m.default(r,i.sameSumAs||i.differentSumAs||i.biggerSumAs||i.smallerSumAs));isNaN(o)||(t+=o),isNaN(a)||(n+=a)}),i.sameSumAs&&t!==n&&(f=!1),i.differentSumAs&&t===n&&(f=!1),i.biggerSumAs&&t<=n&&(f=!1),i.smallerSumAs&&t>=n&&(f=!1)}),i.isUnique&&l.length>0){const e=[];let t=!1;u.forEach(n=>{const r=l.map(e=>m.default(n,e));e.forEach(e=>{E.default(r,e)&&(t=!0)}),e.push(r)}),t&&(f=!1)}i.disallow&&c.forEach(e=>{let t=!1,n=!1;u.forEach(r=>{m.default(r,e[0])===e[1]&&(n=!0),Array.isArray(i.disallow)?i.disallow.forEach(n=>{m.default(r,e[0])===n&&(t=!0)}):m.default(r,e[0])===i.disallow&&(t=!0)}),n&&t&&(f=!1)}),i.disallow&&c.forEach(e=>{let t=!1,n=!1;u.forEach(r=>{m.default(r,e[0])===e[1]&&(n=!0),Array.isArray(i.disallow)?i.disallow.forEach(n=>{m.default(r,e[0])===n&&(t=!0)}):m.default(r,e[0])===i.disallow&&(t=!0)}),n&&!t&&(f=!1)}),f&&"object"==typeof k&&Object.keys(k).forEach(e=>{void 0!==i[e]&&"function"==typeof k[e]&&(k[e]({fieldValueCombos:c,fieldValidationData:u,valueRules:i,get:m.default})||(f=!1))}),f||(r[e]={value:u,field:a,errorCode:i.errorCode||"invalidRule"})})}),{errors:r,firstErrorField:o}},ye=(e,t)=>{let n,r={};if(t||(t=F),ce.forEach(e=>{if(!i[e.config.type]&&!fe(e.config.type))return;const o=pe(e.path,"action",t,r,n);r=o.errors,n=o.firstErrorField}),n&&l&&e){const e=document.getElementById(n);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return r};t.useEffect(()=>{if("function"==typeof c&&f){Ml()&&window.stagesLogging("Get errors on validation",P);let e=ye(!0);ee(e),c(e)}},[c]);const ge=(e,t)=>{Ml()&&window.stagesLogging('Get sub form errors for sub id "'+e+'"',P),ye(!0),t&&Object.keys(t).length>0&&(Z[e]=t)},he=function(e,t,n){try{const r=function(){if(t.loader&&"function"==typeof t.loader){function r(){t.enableCaching&&((e,t)=>{Ml()&&window.stagesLogging('Update options cache for "'+e+'"',P),J(n=>Object.assign({},n,{[e]:t}))})(i,a),u===l&&(((e,t)=>{Ml()&&window.stagesLogging('Update options loaded for "'+e+'"',P),K(n=>Object.assign({},n,{[e]:t}))})(e,a),t.onOptionsChange&&"function"==typeof t.onOptionsChange&&t.onOptionsChange(a,n,Ee))}const o={};let i,a;const l="number"==typeof Nl[e]?Nl[e]+1:0;let u=l;Nl[e]=l,Ml()&&window.stagesLogging('Create dynamic options for field "'+e+'"',P),t.enableCaching&&(t.watchFields.forEach(e=>{const t=m.default(n,e);t&&(o[e]=t)}),i=e+"-"+A.default(o));const s=function(){if(!t.enableCaching||!Y[i])return Promise.resolve(t.loader(n,Ee)).then(function(t){a=t,u=Nl[e]});a=Y[i]}();return s&&s.then?s.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},ve=(e,t,n,r)=>{let o;try{o=A.default({newData:e,errors:Object.keys(t),id:n,fieldKey:r})}catch(e){}o!==$l&&(a((e=>{const t={},n=Object.assign({},e);return ce.forEach(r=>{if(r.config.isInterfaceState){const o=m.default(e,r.path);void 0!==o&&(S.default(t,r.path,o),w.default(n,r.path))}}),T(t),n})(e),t,n,r),$l=o)};t.useEffect(()=>{let e=Object.assign({},F);if(Ml()&&window.stagesLogging('Is visible change to "'+(l?"visible":"invisible")+'"',P),ce.forEach(t=>{const n=t.config;let r=m.default(e,t.path);if("collection"===n.type&&n.init){const o=n.min?Number(n.min):1;r&&0!==r.length||(r=[]);for(let t=r.length;t<o;t++)r.push("string"==typeof n.init?"function"==typeof n.setInitialData?n.setInitialData(r,e,n.init):{__typename:n.init}:"function"==typeof n.setInitialData?n.setInitialData(r,e):{});S.default(e,t.path,r)}}),e=me(e),"function"==typeof n.asyncDataLoader&&l&&!H)try{return ne(!0),Promise.resolve(n.asyncDataLoader()).then(function(e){Q(e),z(!0),ne(!1)})}catch(e){Promise.reject(e)}l&&(Array.isArray(ce)&&ce.forEach(t=>{t.config.dynamicOptions&&t.config.dynamicOptions.events&&t.config.dynamicOptions.events.indexOf("init")>-1&&he(t.path,t.config.dynamicOptions,e)}),0===B&&0===M.length&&N([A.default({data:e,isDirty:D,dirtyFields:L,errors:Z})])),ve(e,ye(),s)},[l]);const me=e=>{const t=Object.assign({},e);return ce.forEach(n=>{if("function"==typeof n.config.computedValue){const r=m.default(F,n.path.split(".").slice(0,-1).join(".")),o=n.config.computedValue(e,r,R);S.default(t,n.path,o)}}),t},be=e=>b.default(ce,{path:e}).config,Oe=(e,t)=>{const n=[];return"object"==typeof y&&Object.keys(y).forEach(r=>{"function"==typeof y[r]&&y[r]({data:t,dirtyFields:L,optionsLoaded:G,asyncData:X,errors:Z,focusedField:re,triggeringEvent:e})&&n.push(r)}),n},xe=e=>Array.isArray(e)&&1===e.length?e[0]:e,Ee=function e(t,n,r,o){void 0===o&&(o=!1);let i,a=!1;const l=+new Date;(0===Wl||l-Wl<Number(p||400))&&(Bl&&clearTimeout(Bl),Bl=setTimeout(()=>e(t,n,r,!0),100),a=!0),o||(Wl=l);const u=be(t);let c=Object.assign({},r||F),f="function"==typeof u.filter?u.filter(n):n;u.cast&&"function"==typeof u.cast.data&&(f=u.cast.data(f)),u.cast&&"string"==typeof u.cast.data&&(f=Vl(f,u.cast.data)),u.cast&&Array.isArray(u.cast.data)&&(f=Vl(f,u.cast.data[0],!0)),Ml()&&window.stagesLogging('Handle change for field "'+t+'"',P),S.default(c,t,f||void 0),c=me(c);const y={data:m.default(c,t),fieldIsDirty:!!L[t],fieldConfig:u,fieldHasFocus:!(!re||re!==t)},g=Oe("change",c);if(!u.validateOn&&Array.isArray(d)&&g.some(e=>d.indexOf(e)>-1)||u.validateOn&&Array.isArray(u.validateOn)&&g.some(e=>u.validateOn.indexOf(e)>-1)){const e=pe(t,xe(g),c,Z);i=Object.assign({},Z,e.errors),ee(i)}else if(!u.validateOn&&Array.isArray(d)&&d.indexOf("change")>-1||u.validateOn&&Array.isArray(u.validateOn)&&u.validateOn.indexOf("change")>-1||!u.validateOn&&Array.isArray(d)&&d.indexOf("throttledChange")>-1&&!a||u.validateOn&&Array.isArray(u.validateOn)&&u.validateOn.indexOf("throttledChange")>-1&&!a||!u.validateOn&&"function"==typeof d&&d(y).indexOf("change")>-1||u.validateOn&&"function"==typeof u.validateOn&&u.validateOn(y).indexOf("change")>-1||!u.validateOn&&"function"==typeof d&&d(y).indexOf("throttledChange")>-1&&!a||u.validateOn&&"function"==typeof u.validateOn&&u.validateOn(y).indexOf("throttledChange")>-1&&!a){const e=pe(t,"change",c,Z);i=Object.assign({},Z,e.errors),ee(i)}if(_&&(E.default(m.default(c,t),m.default(_,t))?void 0!==L[t]&&delete L[t]:L[t]={oldData:m.default(_,t),newData:m.default(c,t)},I(Object.keys(L).length>0),q(L)),u.clearFields&&Array.isArray(u.clearFields)){const e=Object.assign({},G);u.clearFields.forEach(t=>{S.default(c,t,void 0),delete e[t]}),K(e)}Array.isArray(ce)&&ce.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("change")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t)>-1&&(!u.dynamicOptions||u.dynamicOptions&&G[e.path]&&G[e.path].indexOf(m.default(c,t))>-1||!G[e.path])&&he(e.path,e.config.dynamicOptions,c)}),ve(c,i||Z,s,t)};return!1===l?null:o?o({actionProps:{handleActionClick:(e,t,n)=>{Ml()&&window.stagesLogging("Handle action click",P),n&&(ve(_,ye(),s),q({}),I(!1));const r=Oe("action",F);if(Array.isArray(d)&&d.indexOf("action")>-1||Array.isArray(d)&&r.some(e=>d.indexOf(e)>-1)){t&&(U(!0),setTimeout(()=>U(!1),0));let e=t?ye(!0):{};ee(e)}setTimeout(()=>{0===Object.keys(Z).length&&e()},0)},handleUndo:()=>{if(v&&B>0){const e=B-1,t=JSON.parse(M[e]);$(e),ee(t.errors),I(t.isDirty),q(t.dirtyFields),ve(t.data,t.errors,s)}},handleRedo:()=>{if(v&&B<M.length-1){const e=B+1,t=JSON.parse(M[e]);$(e),ee(t.errors),I(t.isDirty),q(t.dirtyFields),ve(t.data,t.errors,s)}},isDisabled:u,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L,silentlyGetValidationErrors:()=>ye(!1)},fieldProps:{fields:(()=>{const e={};return ce.forEach(t=>{const n=((e,t,n)=>{if(!i[e.type]&&"subform"!==e.type||"function"==typeof e.isRendered&&!e.isRendered(n,t,F))return null;const o=Object.assign({},e);if(o.id=n,G[n])o.options=G[n];else if("function"==typeof o.options)o.options=o.options(n,t,F);else if("object"==typeof o.computedOptions){let t=m.default(r,o.computedOptions.source,[]),i=m.default(F,n);"function"==typeof o.computedOptions.filter&&(t=t.filter(o.computedOptions.filter)),"function"==typeof o.computedOptions.sort&&(t=t.sort(o.computedOptions.sort)),"function"==typeof o.computedOptions.map&&(t=t.map(o.computedOptions.map)),o.computedOptions.initWith&&Array.isArray(o.computedOptions.initWith)&&(t=o.computedOptions.initWith.concat(t)),e.isUnique&&(t=t.map(t=>{if(""===t.value)return t;const o=n.substring(0,n.lastIndexOf("["));let a=m.default(r,o,[]);return h.default(a,{[e.id]:t.value})>-1&&t.value!==i?Object.assign({},t,{disabled:!0}):t})),o.options=t,b.default(t,{value:i})||(o.value="",S.default(F,n,""))}return delete o.computedValue,delete o.computedOptions,delete o.filter,delete o.clearFields,delete o.dynamicOptions,delete o.isRendered,delete o.defaultValue,o.placeholder&&Array.isArray(o.placeholder)&&o.placeholder.length>1&&(void 0===Ul[n]&&(Ul[n]=o.placeholder[Math.floor(Math.random()*o.placeholder.length)]),o.placeholder=Ul[n]),"subform"!==e.type?/*#__PURE__*/g.default.createElement(i[e.type].component,Object.assign({key:n,value:(a=t,e.cast&&"function"==typeof e.cast.field?e.cast.field(a):e.cast&&"string"==typeof e.cast.field?Vl(a,e.cast.field):e.cast&&Array.isArray(e.cast.field)?Vl(a,e.cast.field[0],!0):a),initialValue:m.default(_,n),error:Z[n],isDirty:!!L[n],isDisabled:u||e.isDisabled,onChange:e=>Ee(n,e),onFocus:()=>{return oe(e=n),void ae(e);var e},onBlur:()=>(e=>{oe();const t=be(e),n=Object.assign({},F);Wl=0,Ml()&&window.stagesLogging('Handle blur for field "'+e+'"',P),t.cleanUp&&"function"==typeof t.cleanUp&&m.default(n,e)&&(S.default(n,e,t.cleanUp(m.default(n,e))),ve(n,Z,s,e)),"number"==typeof t.precision&&(S.default(n,e,Number(m.default(n,e)).toFixed(t.precision)),ve(n,Z,s,e));const r={data:m.default(n,e),fieldIsDirty:!!L[e],fieldConfig:t,fieldHasFocus:!(!re||re!==e)},o=Oe("blur",n);if(!t.validateOn&&Array.isArray(d)&&o.some(e=>d.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&o.some(e=>t.validateOn.indexOf(e)>-1)){const t=pe(e,xe(o),n,Z);ee(Object.assign({},Z,t.errors)),ve(n,t.errors,s,e)}else if(!t.validateOn&&Array.isArray(d)&&d.indexOf("blur")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("blur")>-1||!t.validateOn&&"function"==typeof d&&d(r).indexOf("blur")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(r).indexOf("blur")>-1){const t=pe(e,"blur",n,Z);ee(Object.assign({},Z,t.errors)),ve(n,t.errors,s,e)}Array.isArray(ce)&&ce.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("blur")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t.id)>-1&&he(e.config.id,e.config.dynamicOptions,n)}),(e=>{if(v){const t=[...M];t.length=B+1,t.push(A.default({data:e,isDirty:D,dirtyFields:L,errors:Z})),t.length>C&&t.shift(),N(t),$(t.length-1)}})(n)})(n)},o)):/*#__PURE__*/g.default.createElement(Hl,{config:e.config,render:t=>{let{fieldProps:n}=t;/*#__PURE__*/return g.default.createElement(e.render,n)},fields:i,id:n,onChange:(e,t)=>Ee(n,e),onValidation:e=>ge(n,e),parentRunValidation:W,data:F&&m.default(F,n),isVisible:l,isDisabled:u,validateOn:d});var a})(t.config,t.data,t.path);n&&S.default(e,t.path,n)}),e})(),onCollectionAction:(e,t,n,r)=>{const o=Object.assign({},F),i=be(e),a=i&&i.min?Number(i.min):0,l=i&&i.max?Number(i.max):99999999999999;let u,c=m.default(o,e,[]);if(Ml()&&window.stagesLogging('On collection action "'+e+'"',P),"add"===t&&("string"==typeof n&&i.fields[n]?l>c.length&&c.push("function"==typeof i.setInitialData?i.setInitialData(c,o,n):{__typename:n}):l>c.length&&c.push("function"==typeof i.setInitialData?i.setInitialData(c,o):{})),"remove"===t&&a<c.length&&c.splice(n,1),"move"===t&&n>-1&&r>-1){const[e]=c.splice(n,1);c.splice(r,0,e)}"sort"===t&&c.length>0&&n&&(c=O.default(c,n)),"duplicate"===t&&n>-1&&c.splice(n+1,0,Object.assign({},c[n])),S.default(o,e,c),d.indexOf("collectionAction")>-1&&(u=ye(),ee(u)),ve(o,u||ye(),s,e)},modifyConfig:(e,t,r)=>{if(n.fieldConfigs&&"function"==typeof n.fieldConfigs[t]){const o=e.split(".");let i="";o.forEach(e=>{const t=i?m.default(se,i):se;if(e.endsWith("]")){const n=e.split("["),r=h.default(t,{id:n[0]});r>-1&&(i+="["+r+"].fields")}else{const n=h.default(t,{id:e});n>-1&&(i+="["+n+"].fields")}}),""!==i&&(le.push({fields:n.fieldConfigs[t],path:i,action:r}),ue([...le]))}},data:r,interfaceState:R,errors:Z,asyncData:X,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L},loading:te}):null};function zl(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}Hl.propTypes={config:Vr.object.isRequired,data:Vr.object,render:Vr.oneOfType([Vr.node,Vr.func]).isRequired,fields:Vr.object.isRequired,onChange:Vr.func,isVisible:Vr.bool,isDisabled:Vr.bool,id:Vr.oneOfType([Vr.string,Vr.number]).isRequired,onValidation:Vr.func,parentRunValidation:Vr.bool,validateOn:Vr.array,customRuleHandlers:Vr.object},Hl.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"],customRuleHandlers:{}};const Gl=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Kl=e=>{let{id:t,label:n,value:r,onChange:o,onBlur:i,onFocus:a,error:l,placeholder:u,isRequired:s,isDisabled:c,prefix:f,suffix:d,secondaryText:p,type:y,errorRenderer:h}=e;return zl(e,Gl),/*#__PURE__*/g.default.createElement("div",{id:t},n?/*#__PURE__*/g.default.createElement("label",{htmlFor:t},n,s?" *":""):null,/*#__PURE__*/g.default.createElement("div",null,f?/*#__PURE__*/g.default.createElement("span",null,f):null,/*#__PURE__*/g.default.createElement("input",{name:t,value:r||"",placeholder:u,type:y||"text",disabled:!!c,required:!!s,onChange:e=>{"function"==typeof o&&o(e.target.value)},onFocus:e=>{"function"==typeof a&&a()},onBlur:e=>{"function"==typeof i&&i()}}),d?/*#__PURE__*/g.default.createElement("span",null,d):null),p?/*#__PURE__*/g.default.createElement("div",null,p):null,l?h?h(l):/*#__PURE__*/g.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},Yl=(e,t)=>!t.isRequired||""!==e&&void 0!==e,Jl=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Xl=["id","label","value","options","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Ql=["id","label","value","options","onChange","onBlur","onFocus","error","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Zl=["id","label","error","isRequired","secondaryText","errorRenderer"],eu={text:{component:Kl,isValid:Yl},number:{component:Kl,isValid:Yl},email:{component:Kl,isValid:Yl},password:{component:Kl,isValid:Yl},tel:{component:Kl,isValid:Yl},time:{component:Kl,isValid:Yl},date:{component:Kl,isValid:Yl},checkbox:{component:e=>{let{id:t,label:n,value:r,onChange:o,onBlur:i,onFocus:a,error:l,placeholder:u,isRequired:s,isDisabled:c,prefix:f,suffix:d,secondaryText:p,type:y,errorRenderer:h}=e;return zl(e,Jl),/*#__PURE__*/g.default.createElement("div",{id:t},n?/*#__PURE__*/g.default.createElement("label",{htmlFor:t},n,s?" *":""):null,/*#__PURE__*/g.default.createElement("div",null,f?/*#__PURE__*/g.default.createElement("span",null,f):null,/*#__PURE__*/g.default.createElement("input",{name:t,value:"1",placeholder:u,type:y,disabled:!!c,required:!!s,checked:!!r,onChange:()=>{},onClick:e=>{"function"==typeof o&&o(!!e.target.checked)},onBlur:e=>{"function"==typeof i&&i()},onFocus:e=>{"function"==typeof a&&a()}}),d?/*#__PURE__*/g.default.createElement("span",null,d):null),p?/*#__PURE__*/g.default.createElement("div",null,p):null,l?h?h(l):/*#__PURE__*/g.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:e=>{let{id:t,label:n,value:r,options:o,onChange:i,onBlur:a,onFocus:l,error:u,placeholder:s,isRequired:c,isDisabled:f,prefix:d,suffix:p,secondaryText:y,errorRenderer:h}=e;return zl(e,Xl),/*#__PURE__*/g.default.createElement("div",{id:t},n?/*#__PURE__*/g.default.createElement("label",{htmlFor:t},n,c?" *":""):null,/*#__PURE__*/g.default.createElement("div",null,d?/*#__PURE__*/g.default.createElement("span",null,d):null,/*#__PURE__*/g.default.createElement("select",{name:t,value:void 0===r?"":r,placeholder:s,disabled:!!f,required:!!c,onChange:e=>{"function"==typeof i&&i(e.target.value)},onBlur:e=>{"function"==typeof a&&a()},onFocus:e=>{"function"==typeof l&&l()}},o.map(e=>/*#__PURE__*/g.default.createElement("option",{value:e.value,key:e.value,disabled:!!e.disabled||null},e.text))),p?/*#__PURE__*/g.default.createElement("span",null,p):null),y?/*#__PURE__*/g.default.createElement("div",null,y):null,u?h?h(u):/*#__PURE__*/g.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:e=>{let{id:n,label:r,value:o,options:i,onChange:a,onBlur:l,onFocus:u,error:s,isRequired:c,isDisabled:f,prefix:d,suffix:p,secondaryText:y,errorRenderer:h}=e;return zl(e,Ql),/*#__PURE__*/g.default.createElement("div",{id:n},r?/*#__PURE__*/g.default.createElement("label",null,r,c?" *":""):null,/*#__PURE__*/g.default.createElement("div",null,d?/*#__PURE__*/g.default.createElement("span",null,d):null,i.map(e=>/*#__PURE__*/g.default.createElement(t.Fragment,{key:n+"-"+e.value},/*#__PURE__*/g.default.createElement("input",{type:"radio",name:n,id:n+"-"+e.value,value:e.value,checked:o===e.value,disabled:!!f,onChange:()=>{},onClick:t=>{"function"==typeof a&&a(e.value)},onBlur:e=>{"function"==typeof l&&l()},onFocus:e=>{"function"==typeof u&&u()}}),/*#__PURE__*/g.default.createElement("label",{htmlFor:n+"-"+e.value},e.text)," ")),p?/*#__PURE__*/g.default.createElement("span",null,p):null),y?/*#__PURE__*/g.default.createElement("div",null,y):null,s?h?h(s):/*#__PURE__*/g.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:e=>{let{id:t,label:n,error:r,isRequired:o,secondaryText:i,errorRenderer:a}=e;return zl(e,Zl),n||i||r?/*#__PURE__*/g.default.createElement("div",{id:t},n?/*#__PURE__*/g.default.createElement("label",{htmlFor:t},n,o?" *":""):null,i?/*#__PURE__*/g.default.createElement("div",null,i):null,r?a?a(r):/*#__PURE__*/g.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null):null},isValid:()=>!0}};e.Actions=e=>{let{config:t,handleActionClick:n,isDisabled:r}=e;/*#__PURE__*/return g.default.createElement(g.default.Fragment,null,t.map((e,t)=>/*#__PURE__*/g.default.createElement("button",{type:"button",onClick:()=>n(e.onClick,e.validate),key:"action-"+t,disabled:r},"primary"===e.type?/*#__PURE__*/g.default.createElement("strong",null,e.title):e.title)))},e.Debugger=()=>{const[e,n]=t.useState({}),[r,o]=t.useState({}),[i,a]=t.useState({}),[l,u]=t.useState({}),[s,c]=t.useState(!1),f=(t,i)=>{if("string"==typeof t)r[i]||(r[i]=[]),r[i].push({action:t,time:+new Date}),o(r);else{const r=Object.assign(e,{}),o=Object.keys(r)[0];r[t.id]=t,n(Object.assign({},r)),a(e=>({key:e.key?e.key:o,tab:e.tab?e.tab:"data"}))}};return t.useEffect(()=>{"undefined"!=typeof window&&(window.stagesLogging=f)},[]),0===Object.keys(e).length?null:/*#__PURE__*/g.default.createElement("div",{style:{position:"absolute",top:"8px",right:"8px",width:"320px",padding:"8px",fontSize:"14px",color:"#333",border:"1px #bbb solid",borderRadius:"4px",background:"#fbfbfb",fontFamily:"Open Sans, Helvetica, Arial, sans"}},/*#__PURE__*/g.default.createElement("strong",{style:{lineHeight:"22px"}},"Debugger:"),/*#__PURE__*/g.default.createElement("button",{type:"button",style:{float:"right"},onClick:()=>c(!s)},s?"hide":"show"),s?Object.keys(e).map(t=>{const n=t.split("-");n.pop();let o="";return o="logs"===i.tab?r[i.key]?r[i.key].map(e=>e.time+": "+e.action).join("\n"):"":v.default(l[t]?m.default(e[i.key][i.tab],l[t]||""):e[i.key][i.tab],null,2),/*#__PURE__*/g.default.createElement("div",{key:t+"-"+i.tab},/*#__PURE__*/g.default.createElement("h3",{style:{background:"#333",color:"#fff",margin:"8px 0 0 0",padding:"2px 6px",textTransform:"capitalize",position:"relative"}},n.join(" "),":",e[t].isDirty?/*#__PURE__*/g.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"4px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"dirty"):null,Object.keys(e[t].errors).length?/*#__PURE__*/g.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"48px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"errors"):null,e[t].loading?/*#__PURE__*/g.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"98px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"loading"):null),/*#__PURE__*/g.default.createElement("ul",{style:{listStyle:"none",display:"flex",margin:"8px 0 0 0",padding:0,gap:"24px"}},/*#__PURE__*/g.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===t&&"data"===i.tab?"#f30":"#000"},onClick:()=>a({key:t,tab:"data"})},"Data"),/*#__PURE__*/g.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===t&&"errors"===i.tab?"#f30":"#000"},onClick:()=>a({key:t,tab:"errors"})},"Errors"),/*#__PURE__*/g.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===t&&"parsedFieldConfig"===i.tab?"#f30":"#000"},onClick:()=>a({key:t,tab:"parsedFieldConfig"})},"Field Config"),/*#__PURE__*/g.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===t&&"logs"===i.tab?"#f30":"#000"},onClick:()=>a({key:t,tab:"logs"})},"Logs")),/*#__PURE__*/g.default.createElement("input",{value:l[t]||"",placeholder:"your.data.filter.path",onChange:e=>{const n=Object.assign({},l);n[t]=e.target.value,u(n)},style:{width:"calc(100% - 12px)",minWidth:"calc(100% - 12px)",maxWidth:"calc(100% - 12px)",fontSize:"12px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"4px",padding:"4px",overflowX:"scroll",whiteSpace:"pre"}}),i&&i.key===t?/*#__PURE__*/g.default.createElement("textarea",{readOnly:!0,style:{width:"calc(100% - 8px)",minWidth:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)",height:"200px",fontSize:"10px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"8px",overflowX:"scroll",whiteSpace:"pre"},value:o}):null)}):null)},e.Form=Hl,e.HashRouter=e=>{let{step:n,onChange:o,keys:i,prefix:a,hashFormat:l="#!"}=e;const[u,s]=r.useHash(),[c,f]=t.useState(!1),d=e=>i&&i[e]?i[e].key:a?a+"-"+e:e,p=()=>{if(-1!==u.indexOf(l)){const e=(e=>{const t=e.split(l);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):h.default(i,{key:e})}return-1})(u);-1!==e&&(s(""+l+d(e)),o(e))}else s(""+l+d(n))};return t.useEffect(()=>{c&&p()},[u]),t.useEffect(()=>{c&&s(""+l+d(n))},[n]),r.useMount(()=>{p(),f(!0)}),null},e.Navigation=e=>{let{currentStep:t,onChangeStep:n,lastValidStep:r,keys:o}=e;const i=[];for(let e=0;e<o.length;e++)if(o&&o[e]&&o[e].visible){const a=o&&o[e]?o[e].key:"Step "+(e+1);i.push(t===e?/*#__PURE__*/g.default.createElement("li",{key:a,style:{textTransform:"capitalize"}},/*#__PURE__*/g.default.createElement("strong",null,a)):/*#__PURE__*/g.default.createElement("li",r>-1&&r+1<e||-1===r&&e>0?{key:a,style:{color:"#999",textTransform:"capitalize"}}:{key:a,style:{textTransform:"capitalize"},onClick:()=>n(e)},a))}/*#__PURE__*/return g.default.createElement("ul",null,i)},e.Progression=e=>{let{stepCount:t,validSteps:n,percentage:r}=e;/*#__PURE__*/return g.default.createElement("div",null,n+" / "+t+" ("+Math.round(r)+"%)")},e.Stages=Nr,e.plainFields=eu});
//# sourceMappingURL=lib.umd.js.map

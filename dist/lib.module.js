import e,{useState as t,useEffect as n,Fragment as r}from"react";import o from"lodash.findindex";import{useHash as i,useMount as a}from"react-use";import c from"lodash.find";import l from"lodash.uniqwith";import u from"lodash.isequal";var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(e){var t={exports:{}};return e(t,t.exports),t.exports}var d,p,y=function(e){return e&&e.Math==Math&&e},h=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof s&&s)||function(){return this}()||Function("return this")(),v={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},m=function(e){return"function"==typeof e},g=function(e){return"object"==typeof e?null!==e:m(e)},b=h.document,E=g(b)&&g(b.createElement),x=function(e){return E?b.createElement(e):{}},O=x("span").classList,S=O&&O.constructor&&O.constructor.prototype,w=S===Object.prototype?void 0:S,j=function(e){try{return!!e()}catch(e){return!0}},T=!j(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),R=Function.prototype,C=R.call,P=T&&R.bind.bind(C,C),k=T?function(e){return e&&P(e)}:function(e){return e&&function(){return C.apply(e,arguments)}},A=k({}.toString),I=k("".slice),D=function(e){return I(A(e),8,-1)},F=h.Object,L=k("".split),_=j(function(){return!F("z").propertyIsEnumerable(0)})?function(e){return"String"==D(e)?L(e,""):F(e)}:F,V=h.TypeError,M=function(e){if(null==e)throw V("Can't call method on "+e);return e},q=function(e){return _(M(e))},N=Object.defineProperty,$=function(e,t){try{N(h,e,{value:t,configurable:!0,writable:!0})}catch(n){h[e]=t}return t},B=h["__core-js_shared__"]||$("__core-js_shared__",{}),G=f(function(e){(e.exports=function(e,t){return B[e]||(B[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),z=h.Object,U=function(e){return z(M(e))},W=k({}.hasOwnProperty),H=Object.hasOwn||function(e,t){return W(U(e),t)},K=0,Y=Math.random(),J=k(1..toString),X=function(e){return"Symbol("+(void 0===e?"":e)+")_"+J(++K+Y,36)},Q=function(e){return m(e)?e:void 0},Z=function(e,t){return arguments.length<2?Q(h[e]):h[e]&&h[e][t]},ee=Z("navigator","userAgent")||"",te=h.process,ne=h.Deno,re=te&&te.versions||ne&&ne.version,oe=re&&re.v8;oe&&(p=(d=oe.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!p&&ee&&(!(d=ee.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=ee.match(/Chrome\/(\d+)/))&&(p=+d[1]);var ie,ae=p,ce=!!Object.getOwnPropertySymbols&&!j(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ae&&ae<41}),le=ce&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ue=G("wks"),se=h.Symbol,fe=se&&se.for,de=le?se:se&&se.withoutSetter||X,pe=function(e){if(!H(ue,e)||!ce&&"string"!=typeof ue[e]){var t="Symbol."+e;ue[e]=ce&&H(se,e)?se[e]:le&&fe?fe(t):de(t)}return ue[e]},ye=h.String,he=h.TypeError,ve=function(e){if(g(e))return e;throw he(ye(e)+" is not an object")},me=!j(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ge=me&&j(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),be=!me&&!j(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),Ee=Function.prototype.call,xe=T?Ee.bind(Ee):function(){return Ee.apply(Ee,arguments)},Oe=k({}.isPrototypeOf),Se=h.Object,we=le?function(e){return"symbol"==typeof e}:function(e){var t=Z("Symbol");return m(t)&&Oe(t.prototype,Se(e))},je=h.String,Te=function(e){try{return je(e)}catch(e){return"Object"}},Re=h.TypeError,Ce=function(e){if(m(e))return e;throw Re(Te(e)+" is not a function")},Pe=function(e,t){var n=e[t];return null==n?void 0:Ce(n)},ke=h.TypeError,Ae=h.TypeError,Ie=pe("toPrimitive"),De=function(e){var t=function(e,t){if(!g(e)||we(e))return e;var n,r=Pe(e,Ie);if(r){if(void 0===t&&(t="default"),n=xe(r,e,t),!g(n)||we(n))return n;throw Ae("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&m(n=e.toString)&&!g(r=xe(n,e)))return r;if(m(n=e.valueOf)&&!g(r=xe(n,e)))return r;if("string"!==t&&m(n=e.toString)&&!g(r=xe(n,e)))return r;throw ke("Can't convert object to primitive value")}(e,t)}(e,"string");return we(t)?t:t+""},Fe=h.TypeError,Le=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,Ve={f:me?ge?function(e,t,n){if(ve(e),t=De(t),ve(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=_e(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Le(e,t,n)}:Le:function(e,t,n){if(ve(e),t=De(t),ve(n),be)try{return Le(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Fe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Me=Math.ceil,qe=Math.floor,Ne=function(e){var t=+e;return t!=t||0===t?0:(t>0?qe:Me)(t)},$e=Math.max,Be=Math.min,Ge=function(e,t){var n=Ne(e);return n<0?$e(n+t,0):Be(n,t)},ze=Math.min,Ue=function(e){return e>0?ze(Ne(e),9007199254740991):0},We=function(e){return Ue(e.length)},He=function(e){return function(t,n,r){var o,i=q(t),a=We(i),c=Ge(r,a);if(e&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},Ke={includes:He(!0),indexOf:He(!1)},Ye={},Je=Ke.indexOf,Xe=k([].push),Qe=function(e,t){var n,r=q(e),o=0,i=[];for(n in r)!H(Ye,n)&&H(r,n)&&Xe(i,n);for(;t.length>o;)H(r,n=t[o++])&&(~Je(i,n)||Xe(i,n));return i},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],et=Object.keys||function(e){return Qe(e,Ze)},tt=me&&!ge?Object.defineProperties:function(e,t){ve(e);for(var n,r=q(t),o=et(t),i=o.length,a=0;i>a;)Ve.f(e,n=o[a++],r[n]);return e},nt={f:tt},rt=Z("document","documentElement"),ot=G("keys"),it=function(e){return ot[e]||(ot[e]=X(e))},at=it("IE_PROTO"),ct=function(){},lt=function(e){return"<script>"+e+"<\/script>"},ut=function(e){e.write(lt("")),e.close();var t=e.parentWindow.Object;return e=null,t},st=function(){try{ie=new ActiveXObject("htmlfile")}catch(e){}var e,t;st="undefined"!=typeof document?document.domain&&ie?ut(ie):((t=x("iframe")).style.display="none",rt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(lt("document.F=Object")),e.close(),e.F):ut(ie);for(var n=Ze.length;n--;)delete st.prototype[Ze[n]];return st()};Ye[at]=!0;var ft=Object.create||function(e,t){var n;return null!==e?(ct.prototype=ve(e),n=new ct,ct.prototype=null,n[at]=e):n=st(),void 0===t?n:nt.f(n,t)},dt=pe("unscopables"),pt=Array.prototype;null==pt[dt]&&Ve.f(pt,dt,{configurable:!0,value:ft(null)});var yt=function(e){pt[dt][e]=!0},ht={},vt=k(Function.toString);m(B.inspectSource)||(B.inspectSource=function(e){return vt(e)});var mt,gt,bt,Et=B.inspectSource,xt=h.WeakMap,Ot=m(xt)&&/native code/.test(Et(xt)),St=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},wt=me?function(e,t,n){return Ve.f(e,t,St(1,n))}:function(e,t,n){return e[t]=n,e},jt=h.TypeError;if(Ot||B.state){var Tt=B.state||(B.state=new(0,h.WeakMap)),Rt=k(Tt.get),Ct=k(Tt.has),Pt=k(Tt.set);mt=function(e,t){if(Ct(Tt,e))throw new jt("Object already initialized");return t.facade=e,Pt(Tt,e,t),t},gt=function(e){return Rt(Tt,e)||{}},bt=function(e){return Ct(Tt,e)}}else{var kt=it("state");Ye[kt]=!0,mt=function(e,t){if(H(e,kt))throw new jt("Object already initialized");return t.facade=e,wt(e,kt,t),t},gt=function(e){return H(e,kt)?e[kt]:{}},bt=function(e){return H(e,kt)}}var At,It,Dt,Ft={set:mt,get:gt,has:bt,enforce:function(e){return bt(e)?gt(e):mt(e,{})},getterFor:function(e){return function(t){var n;if(!g(t)||(n=gt(t)).type!==e)throw jt("Incompatible receiver, "+e+" required");return n}}},Lt={}.propertyIsEnumerable,_t=Object.getOwnPropertyDescriptor,Vt={f:_t&&!Lt.call({1:2},1)?function(e){var t=_t(this,e);return!!t&&t.enumerable}:Lt},Mt=Object.getOwnPropertyDescriptor,qt={f:me?Mt:function(e,t){if(e=q(e),t=De(t),be)try{return Mt(e,t)}catch(e){}if(H(e,t))return St(!xe(Vt.f,e,t),e[t])}},Nt=Function.prototype,$t=me&&Object.getOwnPropertyDescriptor,Bt=H(Nt,"name"),Gt={EXISTS:Bt,PROPER:Bt&&"something"===function(){}.name,CONFIGURABLE:Bt&&(!me||me&&$t(Nt,"name").configurable)},zt=f(function(e){var t=Gt.CONFIGURABLE,n=Ft.get,r=Ft.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var c,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,s=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;m(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!H(i,"name")||t&&i.name!==f)&&wt(i,"name",f),(c=r(i)).source||(c.source=o.join("string"==typeof f?f:""))),e!==h?(l?!s&&e[n]&&(u=!0):delete e[n],u?e[n]=i:wt(e,n,i)):u?e[n]=i:$(n,i)})(Function.prototype,"toString",function(){return m(this)&&n(this).source||Et(this)})}),Ut=Ze.concat("length","prototype"),Wt={f:Object.getOwnPropertyNames||function(e){return Qe(e,Ut)}},Ht={f:Object.getOwnPropertySymbols},Kt=k([].concat),Yt=Z("Reflect","ownKeys")||function(e){var t=Wt.f(ve(e)),n=Ht.f;return n?Kt(t,n(e)):t},Jt=function(e,t,n){for(var r=Yt(t),o=Ve.f,i=qt.f,a=0;a<r.length;a++){var c=r[a];H(e,c)||n&&H(n,c)||o(e,c,i(t,c))}},Xt=/#|\.prototype\./,Qt=function(e,t){var n=en[Zt(e)];return n==nn||n!=tn&&(m(t)?j(t):!!t)},Zt=Qt.normalize=function(e){return String(e).replace(Xt,".").toLowerCase()},en=Qt.data={},tn=Qt.NATIVE="N",nn=Qt.POLYFILL="P",rn=Qt,on=qt.f,an=function(e,t){var n,r,o,i,a,c=e.target,l=e.global,u=e.stat;if(n=l?h:u?h[c]||$(c,{}):(h[c]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=on(n,r))&&a.value:n[r],!rn(l?r:c+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Jt(i,o)}(e.sham||o&&o.sham)&&wt(i,"sham",!0),zt(n,r,i,e)}},cn=!j(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),ln=it("IE_PROTO"),un=h.Object,sn=un.prototype,fn=cn?un.getPrototypeOf:function(e){var t=U(e);if(H(t,ln))return t[ln];var n=t.constructor;return m(n)&&t instanceof n?n.prototype:t instanceof un?sn:null},dn=pe("iterator"),pn=!1;[].keys&&("next"in(Dt=[].keys())?(It=fn(fn(Dt)))!==Object.prototype&&(At=It):pn=!0);var yn=null==At||j(function(){var e={};return At[dn].call(e)!==e});yn&&(At={}),m(At[dn])||zt(At,dn,function(){return this});var hn={IteratorPrototype:At,BUGGY_SAFARI_ITERATORS:pn},vn=Ve.f,mn=pe("toStringTag"),gn=function(e,t,n){e&&!n&&(e=e.prototype),e&&!H(e,mn)&&vn(e,mn,{configurable:!0,value:t})},bn=hn.IteratorPrototype,En=function(){return this},xn=h.String,On=h.TypeError,Sn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=k(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return ve(n),function(e){if("object"==typeof e||m(e))return e;throw On("Can't set "+xn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),wn=Gt.PROPER,jn=Gt.CONFIGURABLE,Tn=hn.IteratorPrototype,Rn=hn.BUGGY_SAFARI_ITERATORS,Cn=pe("iterator"),Pn=function(){return this},kn=Ve.f,An=Ft.set,In=Ft.getterFor("Array Iterator"),Dn=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o="Array Iterator";e.prototype=ft(bn,{next:St(1,function(){var e=In(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}})}),gn(e,o,!1),ht[o]=En}(n);var c,l,u,s=function(e){if(e===o&&y)return y;if(!Rn&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=!1,d=e.prototype,p=d[Cn]||d["@@iterator"]||d.values,y=!Rn&&p||s(o),h=d.entries||p;if(h&&(c=fn(h.call(new e)))!==Object.prototype&&c.next&&(fn(c)!==Tn&&(Sn?Sn(c,Tn):m(c[Cn])||zt(c,Cn,Pn)),gn(c,"Array Iterator",!0)),wn&&p&&"values"!==p.name&&(jn?wt(d,"name","values"):(f=!0,y=function(){return xe(p,this)})),void(l={values:s("values"),keys:s("keys"),entries:s("entries")}))for(u in l)(Rn||f||!(u in d))&&zt(d,u,l[u]);else an({target:"Array",proto:!0,forced:Rn||f},l);return d[Cn]!==y&&zt(d,Cn,y,{name:o}),ht.Array=y,l}(Array,0,function(e,t){An(this,{type:"Array Iterator",target:q(e),index:0,kind:t})},0,"values"),Fn=ht.Arguments=ht.Array;if(yt("keys"),yt("values"),yt("entries"),me&&"values"!==Fn.name)try{kn(Fn,"name",{value:"values"})}catch(e){}var Ln=pe("iterator"),_n=pe("toStringTag"),Vn=Dn.values,Mn=function(e,t){if(e){if(e[Ln]!==Vn)try{wt(e,Ln,Vn)}catch(t){e[Ln]=Vn}if(e[_n]||wt(e,_n,t),v[t])for(var n in Dn)if(e[n]!==Dn[n])try{wt(e,n,Dn[n])}catch(t){e[n]=Dn[n]}}};for(var qn in v)Mn(h[qn]&&h[qn].prototype,qn);Mn(w,"DOMTokenList");var Nn=Object.assign,$n=Object.defineProperty,Bn=k([].concat),Gn=!Nn||j(function(){if(me&&1!==Nn({b:1},Nn($n({},"a",{enumerable:!0,get:function(){$n(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Nn({},e)[n]||et(Nn({},t)).join("")!=r})?function(e,t){for(var n=U(e),r=arguments.length,o=1,i=Ht.f,a=Vt.f;r>o;)for(var c,l=_(arguments[o++]),u=i?Bn(et(l),i(l)):et(l),s=u.length,f=0;s>f;)c=u[f++],me&&!xe(a,l,c)||(n[c]=l[c]);return n}:Nn;an({target:"Object",stat:!0,forced:Object.assign!==Gn},{assign:Gn});var zn="function"==typeof Symbol&&Symbol.for,Un=zn?Symbol.for("react.element"):60103,Wn=zn?Symbol.for("react.portal"):60106,Hn=zn?Symbol.for("react.fragment"):60107,Kn=zn?Symbol.for("react.strict_mode"):60108,Yn=zn?Symbol.for("react.profiler"):60114,Jn=zn?Symbol.for("react.provider"):60109,Xn=zn?Symbol.for("react.context"):60110,Qn=zn?Symbol.for("react.async_mode"):60111,Zn=zn?Symbol.for("react.concurrent_mode"):60111,er=zn?Symbol.for("react.forward_ref"):60112,tr=zn?Symbol.for("react.suspense"):60113,nr=zn?Symbol.for("react.suspense_list"):60120,rr=zn?Symbol.for("react.memo"):60115,or=zn?Symbol.for("react.lazy"):60116,ir=zn?Symbol.for("react.block"):60121,ar=zn?Symbol.for("react.fundamental"):60117,cr=zn?Symbol.for("react.responder"):60118,lr=zn?Symbol.for("react.scope"):60119;function ur(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Un:switch(e=e.type){case Qn:case Zn:case Hn:case Yn:case Kn:case tr:return e;default:switch(e=e&&e.$$typeof){case Xn:case er:case or:case rr:case Jn:return e;default:return t}}case Wn:return t}}}function sr(e){return ur(e)===Zn}var fr={AsyncMode:Qn,ConcurrentMode:Zn,ContextConsumer:Xn,ContextProvider:Jn,Element:Un,ForwardRef:er,Fragment:Hn,Lazy:or,Memo:rr,Portal:Wn,Profiler:Yn,StrictMode:Kn,Suspense:tr,isAsyncMode:function(e){return sr(e)||ur(e)===Qn},isConcurrentMode:sr,isContextConsumer:function(e){return ur(e)===Xn},isContextProvider:function(e){return ur(e)===Jn},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Un},isForwardRef:function(e){return ur(e)===er},isFragment:function(e){return ur(e)===Hn},isLazy:function(e){return ur(e)===or},isMemo:function(e){return ur(e)===rr},isPortal:function(e){return ur(e)===Wn},isProfiler:function(e){return ur(e)===Yn},isStrictMode:function(e){return ur(e)===Kn},isSuspense:function(e){return ur(e)===tr},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===Hn||e===Zn||e===Yn||e===Kn||e===tr||e===nr||"object"==typeof e&&null!==e&&(e.$$typeof===or||e.$$typeof===rr||e.$$typeof===Jn||e.$$typeof===Xn||e.$$typeof===er||e.$$typeof===ar||e.$$typeof===cr||e.$$typeof===lr||e.$$typeof===ir)},typeOf:ur};function dr(){}function pr(){}f(function(e,t){}),f(function(e){e.exports=fr}),pr.resetWarningCache=dr;var yr=f(function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pr,resetWarningCache:dr};return n.PropTypes=n,n}()});const hr=e=>{let{children:r,initialData:i,initialStep:a,render:c,validateOnStepChange:l,onChange:u}=e;const[s]=t("stages-"+ +new Date),[f,d]=t(i),[p,y]=t([]),[h,v]=t({}),[m,g]=t(a||0),[b,E]=t([]),x=e=>{const t=b&&b[e]?b[e].key:e;return f&&f[t]?f[t]:{}},O=(e,t)=>(b[t]||(b[t]={key:e,visible:!0},E([...b])),e),S=(e,t,n)=>{const r=b&&b[n]?b[n].key:n;h[n]=t,v(Object.assign({},h)),f[r]=e,d(Object.assign({},f)),"function"==typeof u&&u({data:f,errors:h}),"undefined"!=typeof window&&"function"==typeof window.stagesLogging&&window.stagesLogging({id:s,keys:b,data:f,errors:h,currentStep:m})};n(()=>{r.map((e,t)=>e({index:t,setStepKey:O,initializing:!0})).filter(e=>e)},[]),n(()=>{if(l){const e=j();e<m&&g(-1===e?0:e+1)}y(r.map((e,t)=>e({data:x(t),allData:f,onChange:S,onNav:w,isActive:t===m,index:t,errors:h[t]||{},setStepKey:O})).filter((e,t)=>{const n=null!==e;return b[t]&&(b[t].visible=n),n}))},[m,f]);const w=(e,t)=>{let n=m;if("next"===e){let e=!1;for(let t=m+1;t<b.length;t++)b[t].visible&&!e&&(n=t,e=!0)}if("prev"===e){let e=!1;for(let t=m-1;t>=0;t--)b[t].visible&&!e&&(n=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<b.length;t++)b[t].visible&&!e&&(n=t,e=!0)}if("last"===e){let e=!1;for(let t=b.length-1;t>=0;t--)b[t].visible&&!e&&(n=t,e=!0)}if("lastValid"===e&&(n=j()),"step"===e&&b[t]&&b[t].visible)n=Number(t);else if("step"===e&&"string"==typeof t){const e=o(b,{key:t});e>-1&&(n=e)}n<0&&(n=0),n>b.length&&(n=b.length),g(n)},j=()=>{let e=-1,t=!1;return Object.keys(h).forEach(n=>{const r=o(b,{key:n});(0===Object.keys(h[n]).length||r>-1&&!b[r].visible)&&!t?e=Number(n):t=!0}),e};return 0===p.length?null:c?c({navigationProps:{currentStep:m,data:f,onChangeStep:e=>{(j()+1>=e||!1===l)&&g(e)},errors:h,keys:b,stepCount:p.length,lastValidStep:j()},progressionProps:(()=>{const e=p.length,t=j();let n=0;return Object.keys(h).forEach(e=>{const r=x(e);e<=t&&0===Object.keys(h[e]).length&&Object.keys(r).length>0&&n++}),{currentStep:m,stepCount:e,validSteps:n,percentage:100/e*n,data:f,errors:h}})(),routerProps:{step:m,onChange:g,keys:b},steps:p}):null};hr.propTypes={children:yr.arrayOf(yr.oneOfType([yr.node,yr.func])).isRequired,initialData:yr.object,render:yr.oneOfType([yr.node,yr.func]).isRequired,initialStep:yr.number,validateOnStepChange:yr.bool},hr.defaultProps={initialData:{},validateOnStepChange:!0};var vr={};vr[pe("toStringTag")]="z";var mr,gr,br="[object z]"===String(vr),Er=pe("toStringTag"),xr=h.Object,Or="Arguments"==D(function(){return arguments}()),Sr=br?D:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=xr(e),Er))?n:Or?D(t):"Object"==(r=D(t))&&m(t.callee)?"Arguments":r},wr=h.String,jr=function(e){if("Symbol"===Sr(e))throw TypeError("Cannot convert a Symbol value to a string");return wr(e)},Tr=function(){var e=ve(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Rr=h.RegExp,Cr=j(function(){var e=Rr("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),Pr=Cr||j(function(){return!Rr("a","y").sticky}),kr={BROKEN_CARET:Cr||j(function(){var e=Rr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:Pr,UNSUPPORTED_Y:Cr},Ar=h.RegExp,Ir=j(function(){var e=Ar(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),Dr=h.RegExp,Fr=j(function(){var e=Dr("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),Lr=Ft.get,_r=G("native-string-replace",String.prototype.replace),Vr=RegExp.prototype.exec,Mr=Vr,qr=k("".charAt),Nr=k("".indexOf),$r=k("".replace),Br=k("".slice),Gr=(gr=/b*/g,xe(Vr,mr=/a/,"a"),xe(Vr,gr,"a"),0!==mr.lastIndex||0!==gr.lastIndex),zr=kr.BROKEN_CARET,Ur=void 0!==/()??/.exec("")[1];(Gr||Ur||zr||Ir||Fr)&&(Mr=function(e){var t,n,r,o,i,a,c,l=this,u=Lr(l),s=jr(e),f=u.raw;if(f)return f.lastIndex=l.lastIndex,t=xe(Mr,f,s),l.lastIndex=f.lastIndex,t;var d=u.groups,p=zr&&l.sticky,y=xe(Tr,l),h=l.source,v=0,m=s;if(p&&(y=$r(y,"y",""),-1===Nr(y,"g")&&(y+="g"),m=Br(s,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==qr(s,l.lastIndex-1))&&(h="(?: "+h+")",m=" "+m,v++),n=new RegExp("^(?:"+h+")",y)),Ur&&(n=new RegExp("^"+h+"$(?!\\s)",y)),Gr&&(r=l.lastIndex),o=xe(Vr,p?n:l,m),p?o?(o.input=Br(o.input,v),o[0]=Br(o[0],v),o.index=l.lastIndex,l.lastIndex+=o[0].length):l.lastIndex=0:Gr&&o&&(l.lastIndex=l.global?o.index+o[0].length:r),Ur&&o&&o.length>1&&xe(_r,o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o&&d)for(o.groups=a=ft(null),i=0;i<d.length;i++)a[(c=d[i])[0]]=o[c[1]];return o});var Wr=Mr;an({target:"RegExp",proto:!0,forced:/./.exec!==Wr},{exec:Wr});var Hr=Function.prototype,Kr=Hr.apply,Yr=Hr.call,Jr="object"==typeof Reflect&&Reflect.apply||(T?Yr.bind(Kr):function(){return Yr.apply(Kr,arguments)}),Xr=pe("species"),Qr=RegExp.prototype,Zr=pe("match"),eo=function(){},to=[],no=Z("Reflect","construct"),ro=/^\s*(?:class|function)\b/,oo=k(ro.exec),io=!ro.exec(eo),ao=function(e){if(!m(e))return!1;try{return no(eo,to,e),!0}catch(e){return!1}},co=function(e){if(!m(e))return!1;switch(Sr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return io||!!oo(ro,Et(e))}catch(e){return!0}};co.sham=!0;var lo=!no||j(function(){var e;return ao(ao.call)||!ao(Object)||!ao(function(){e=!0})||e})?co:ao,uo=h.TypeError,so=pe("species"),fo=function(e,t){var n,r=ve(e).constructor;return void 0===r||null==(n=ve(r)[so])?t:function(e){if(lo(e))return e;throw uo(Te(e)+" is not a constructor")}(n)},po=k("".charAt),yo=k("".charCodeAt),ho=k("".slice),vo=function(e){return function(t,n){var r,o,i=jr(M(t)),a=Ne(n),c=i.length;return a<0||a>=c?e?"":void 0:(r=yo(i,a))<55296||r>56319||a+1===c||(o=yo(i,a+1))<56320||o>57343?e?po(i,a):r:e?ho(i,a,a+2):o-56320+(r-55296<<10)+65536}},mo=(vo(!1),vo(!0)),go=function(e,t,n){return t+(n?mo(e,t).length:1)},bo=h.Array,Eo=Math.max,xo=function(e,t,n){for(var r,o,i,a=We(e),c=Ge(t,a),l=Ge(void 0===n?a:n,a),u=bo(Eo(l-c,0)),s=0;c<l;c++,s++)r=u,o=e[c],(i=De(s))in r?Ve.f(r,i,St(0,o)):r[i]=o;return u.length=s,u},Oo=h.TypeError,So=function(e,t){var n=e.exec;if(m(n)){var r=xe(n,e,t);return null!==r&&ve(r),r}if("RegExp"===D(e))return xe(Wr,e,t);throw Oo("RegExp#exec called on incompatible receiver")},wo=kr.UNSUPPORTED_Y,jo=Math.min,To=[].push,Ro=k(/./.exec),Co=k(To),Po=k("".slice);!function(e,t,n,r){var o,i,a,c,l=pe(e),u=!j(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}),s=u&&!j(function(){var e=!1,t=/a/;return(t={}).constructor={},t.constructor[Xr]=function(){return t},t.flags="",t[l]=/./[l],t.exec=function(){return e=!0,null},t[l](""),!e});if(!u||!s||n){var f=k(/./[l]),d=(o=l,i=""[e],a=function(e,t,n,r,o){var i=k(e),a=t.exec;return a===Wr||a===Qr.exec?u&&!o?{done:!0,value:f(t,n,r)}:{done:!0,value:i(n,t,r)}:{done:!1}},c="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n,r,o=jr(M(this)),a=void 0===t?4294967295:t>>>0;if(0===a)return[];if(void 0===e)return[o];if(!g(n=e)||!(void 0!==(r=n[Zr])?r:"RegExp"==D(n)))return xe(i,o,e,a);for(var c,l,u,s=[],f=0,d=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(c=xe(Wr,d,o))&&!((l=d.lastIndex)>f&&(Co(s,Po(o,f,c.index)),c.length>1&&c.index<o.length&&Jr(To,s,xo(c,1)),u=c[0].length,f=l,s.length>=a));)d.lastIndex===c.index&&d.lastIndex++;return f===o.length?!u&&Ro(d,"")||Co(s,""):Co(s,Po(o,f)),s.length>a?xo(s,0,a):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:xe(i,this,e,t)}:i,[function(e,t){var n=M(this),r=null==e?void 0:Pe(e,o);return r?xe(r,e,n,t):xe(c,jr(n),e,t)},function(e,t){var n=ve(this),r=jr(e),o=a(c,n,r,t,c!==i);if(o.done)return o.value;var l=fo(n,RegExp),u=n.unicode,s=new l(wo?"^(?:"+n.source+")":n,(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(wo?"g":"y")),f=void 0===t?4294967295:t>>>0;if(0===f)return[];if(0===r.length)return null===So(s,r)?[r]:[];for(var d=0,p=0,y=[];p<r.length;){s.lastIndex=wo?0:p;var h,v=So(s,wo?Po(r,p):r);if(null===v||(h=jo(Ue(s.lastIndex+(wo?p:0)),r.length))===d)p=go(r,p,u);else{if(Co(y,Po(r,d,p)),y.length===f)return y;for(var m=1;m<=v.length-1;m++)if(Co(y,v[m]),y.length===f)return y;p=d=h}}return Co(y,Po(r,d)),y}]);zt(String.prototype,e,d[0]),zt(Qr,l,d[1])}r&&wt(Qr[l],"sham",!0)}("split",0,!!j(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),wo);const ko=e=>{let{step:r,onChange:c,keys:l,prefix:u,hashFormat:s="#!"}=e;const[f,d]=i(),[p,y]=t(!1),h=e=>l&&l[e]?l[e].key:u?u+"-"+e:e,v=()=>{if(-1!==f.indexOf(s)){const e=(e=>{const t=e.split(s);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):o(l,{key:e})}return-1})(f);-1!==e&&(d(""+s+h(e)),c(e))}else d(""+s+h(r))};return n(()=>{p&&v()},[f]),n(()=>{p&&d(""+s+h(r))},[r]),a(()=>{v(),y(!0)}),null},Ao=t=>{let{currentStep:n,onChangeStep:r,lastValidStep:o,keys:i}=t;const a=[];for(let t=0;t<i.length;t++)if(i&&i[t]&&i[t].visible){const c=i&&i[t]?i[t].key:"Step "+(t+1);a.push(n===t?/*#__PURE__*/e.createElement("li",{key:c,style:{textTransform:"capitalize"}},/*#__PURE__*/e.createElement("strong",null,c)):/*#__PURE__*/e.createElement("li",o>-1&&o+1<t||-1===o&&t>0?{key:c,style:{color:"#999",textTransform:"capitalize"}}:{key:c,style:{textTransform:"capitalize"},onClick:()=>r(t)},c))}/*#__PURE__*/return e.createElement("ul",null,a)},Io=t=>{let{stepCount:n,validSteps:r,percentage:o}=t;/*#__PURE__*/return e.createElement("div",null,r+" / "+n+" ("+Math.round(o)+"%)")};var Do=h.Array,Fo=Z("JSON","stringify"),Lo=k(/./.exec),_o=k("".charAt),Vo=k("".charCodeAt),Mo=k("".replace),qo=k(1..toString),No=/[\uD800-\uDFFF]/g,$o=/^[\uD800-\uDBFF]$/,Bo=/^[\uDC00-\uDFFF]$/,Go=function(e,t,n){var r=_o(n,t-1),o=_o(n,t+1);return Lo($o,e)&&!Lo(Bo,o)||Lo(Bo,e)&&!Lo($o,r)?"\\u"+qo(Vo(e,0),16):e},zo=j(function(){return'"\\udf06\\ud834"'!==Fo("\udf06\ud834")||'"\\udead"'!==Fo("\udead")});Fo&&an({target:"JSON",stat:!0,forced:zo},{stringify:function(e,t,n){for(var r=0,o=arguments.length,i=Do(o);r<o;r++)i[r]=arguments[r];var a=Jr(Fo,null,i);return"string"==typeof a?Mo(a,No,Go):a}});var Uo=h.Promise,Wo=pe("species"),Ho=h.TypeError,Ko=k(k.bind),Yo=function(e,t){return Ce(e),void 0===t?e:T?Ko(e,t):function(){return e.apply(t,arguments)}},Jo=pe("iterator"),Xo=Array.prototype,Qo=pe("iterator"),Zo=function(e){if(null!=e)return Pe(e,Qo)||Pe(e,"@@iterator")||ht[Sr(e)]},ei=h.TypeError,ti=function(e,t,n){var r,o;ve(e);try{if(!(r=Pe(e,"return"))){if("throw"===t)throw n;return n}r=xe(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return ve(r),n},ni=h.TypeError,ri=function(e,t){this.stopped=e,this.result=t},oi=ri.prototype,ii=function(e,t,n){var r,o,i,a,c,l,u,s,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),y=Yo(t,n&&n.that),h=function(e){return r&&ti(r,"normal",e),new ri(!0,e)},v=function(e){return f?(ve(e),p?y(e[0],e[1],h):y(e[0],e[1])):p?y(e,h):y(e)};if(d)r=e;else{if(!(o=Zo(e)))throw ni(Te(e)+" is not iterable");if(void 0!==(s=o)&&(ht.Array===s||Xo[Jo]===s)){for(i=0,a=We(e);a>i;i++)if((c=v(e[i]))&&Oe(oi,c))return c;return new ri(!1)}r=function(e,t){var n=arguments.length<2?Zo(e):t;if(Ce(n))return ve(xe(n,e));throw ei(Te(e)+" is not iterable")}(e,o)}for(l=r.next;!(u=xe(l,r)).done;){try{c=v(u.value)}catch(e){ti(r,"throw",e)}if("object"==typeof c&&c&&Oe(oi,c))return c}return new ri(!1)},ai=pe("iterator"),ci=!1;try{var li=0,ui={next:function(){return{done:!!li++}},return:function(){ci=!0}};ui[ai]=function(){return this},Array.from(ui,function(){throw 2})}catch(e){}var si,fi,di,pi,yi=k([].slice),hi=h.TypeError,vi=function(e,t){if(e<t)throw hi("Not enough arguments");return e},mi=/(?:ipad|iphone|ipod).*applewebkit/i.test(ee),gi="process"==D(h.process),bi=h.setImmediate,Ei=h.clearImmediate,xi=h.process,Oi=h.Dispatch,Si=h.Function,wi=h.MessageChannel,ji=h.String,Ti=0,Ri={};try{si=h.location}catch(e){}var Ci=function(e){if(H(Ri,e)){var t=Ri[e];delete Ri[e],t()}},Pi=function(e){return function(){Ci(e)}},ki=function(e){Ci(e.data)},Ai=function(e){h.postMessage(ji(e),si.protocol+"//"+si.host)};bi&&Ei||(bi=function(e){vi(arguments.length,1);var t=m(e)?e:Si(e),n=yi(arguments,1);return Ri[++Ti]=function(){Jr(t,void 0,n)},fi(Ti),Ti},Ei=function(e){delete Ri[e]},gi?fi=function(e){xi.nextTick(Pi(e))}:Oi&&Oi.now?fi=function(e){Oi.now(Pi(e))}:wi&&!mi?(pi=(di=new wi).port2,di.port1.onmessage=ki,fi=Yo(pi.postMessage,pi)):h.addEventListener&&m(h.postMessage)&&!h.importScripts&&si&&"file:"!==si.protocol&&!j(Ai)?(fi=Ai,h.addEventListener("message",ki,!1)):fi="onreadystatechange"in x("script")?function(e){rt.appendChild(x("script")).onreadystatechange=function(){rt.removeChild(this),Ci(e)}}:function(e){setTimeout(Pi(e),0)});var Ii,Di,Fi,Li,_i,Vi,Mi,qi,Ni={set:bi,clear:Ei},$i=/ipad|iphone|ipod/i.test(ee)&&void 0!==h.Pebble,Bi=/web0s(?!.*chrome)/i.test(ee),Gi=Ni.set,zi=h.MutationObserver||h.WebKitMutationObserver,Ui=h.document,Wi=h.process,Hi=h.Promise,Ki=(0,qt.f)(h,"queueMicrotask"),Yi=Ki&&Ki.value;Yi||(Ii=function(){var e,t;for(gi&&(e=Wi.domain)&&e.exit();Di;){t=Di.fn,Di=Di.next;try{t()}catch(e){throw Di?Li():Fi=void 0,e}}Fi=void 0,e&&e.enter()},mi||gi||Bi||!zi||!Ui?!$i&&Hi&&Hi.resolve?((Mi=Hi.resolve(void 0)).constructor=Hi,qi=Yo(Mi.then,Mi),Li=function(){qi(Ii)}):gi?Li=function(){Wi.nextTick(Ii)}:(Gi=Yo(Gi,h),Li=function(){Gi(Ii)}):(_i=!0,Vi=Ui.createTextNode(""),new zi(Ii).observe(Vi,{characterData:!0}),Li=function(){Vi.data=_i=!_i}));var Ji=Yi||function(e){var t={fn:e,next:void 0};Fi&&(Fi.next=t),Di||(Di=t,Li()),Fi=t},Xi=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Ce(t),this.reject=Ce(n)},Qi={f:function(e){return new Xi(e)}},Zi=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ea=function(){this.head=null,this.tail=null};ea.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ta,na,ra,oa,ia,aa=ea,ca="object"==typeof window,la=Ni.set,ua=pe("species"),sa="Promise",fa=Ft.getterFor(sa),da=Ft.set,pa=Ft.getterFor(sa),ya=Uo&&Uo.prototype,ha=Uo,va=ya,ma=h.TypeError,ga=h.document,ba=h.process,Ea=Qi.f,xa=Ea,Oa=!!(ga&&ga.createEvent&&h.dispatchEvent),Sa=m(h.PromiseRejectionEvent),wa=!1,ja=rn(sa,function(){var e=Et(ha),t=e!==String(ha);if(!t&&66===ae)return!0;if(ae>=51&&/native code/.test(e))return!1;var n=new ha(function(e){e(1)}),r=function(e){e(function(){},function(){})};return(n.constructor={})[ua]=r,!(wa=n.then(function(){})instanceof r)||!t&&ca&&!Sa}),Ta=ja||!function(e,t){if(!ci)return!1;var n=!1;try{var r={};r[ai]=function(){return{next:function(){return{done:n=!0}}}},ha.all(r).catch(function(){})}catch(e){}return n}(),Ra=function(e){var t;return!(!g(e)||!m(t=e.then))&&t},Ca=function(e,t){var n,r,o,i=t.value,a=1==t.state,c=a?e.ok:e.fail,l=e.resolve,u=e.reject,s=e.domain;try{c?(a||(2===t.rejection&&Da(t),t.rejection=1),!0===c?n=i:(s&&s.enter(),n=c(i),s&&(s.exit(),o=!0)),n===e.promise?u(ma("Promise-chain cycle")):(r=Ra(n))?xe(r,n,l,u):l(n)):u(i)}catch(e){s&&!o&&s.exit(),u(e)}},Pa=function(e,t){e.notified||(e.notified=!0,Ji(function(){for(var n,r=e.reactions;n=r.get();)Ca(n,e);e.notified=!1,t&&!e.rejection&&Aa(e)}))},ka=function(e,t,n){var r,o;Oa?((r=ga.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),h.dispatchEvent(r)):r={promise:t,reason:n},!Sa&&(o=h["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=h.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Aa=function(e){xe(la,h,function(){var t,n=e.facade,r=e.value;if(Ia(e)&&(t=Zi(function(){gi?ba.emit("unhandledRejection",r,n):ka("unhandledrejection",n,r)}),e.rejection=gi||Ia(e)?2:1,t.error))throw t.value})},Ia=function(e){return 1!==e.rejection&&!e.parent},Da=function(e){xe(la,h,function(){var t=e.facade;gi?ba.emit("rejectionHandled",t):ka("rejectionhandled",t,e.value)})},Fa=function(e,t,n){return function(r){e(t,r,n)}},La=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Pa(e,!0))},_a=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ma("Promise can't be resolved itself");var r=Ra(t);r?Ji(function(){var n={done:!1};try{xe(r,t,Fa(_a,n,e),Fa(La,n,e))}catch(t){La(n,t,e)}}):(e.value=t,e.state=1,Pa(e,!1))}catch(t){La({done:!1},t,e)}}};if(ja&&(ha=function(e){!function(e,t){if(Oe(va,e))return e;throw Ho("Incorrect invocation")}(this),Ce(e),xe(ta,this);var t=fa(this);try{e(Fa(_a,t),Fa(La,t))}catch(e){La(t,e)}},(ta=function(e){da(this,{type:sa,done:!1,notified:!1,parent:!1,reactions:new aa,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)zt(e,r,t[r],void 0);return e}(va=ha.prototype,{then:function(e,t){var n=pa(this),r=Ea(fo(this,ha));return n.parent=!0,r.ok=!m(e)||e,r.fail=m(t)&&t,r.domain=gi?ba.domain:void 0,0==n.state?n.reactions.add(r):Ji(function(){Ca(r,n)}),r.promise},catch:function(e){return this.then(void 0,e)}}),na=function(){var e=new ta,t=fa(e);this.promise=e,this.resolve=Fa(_a,t),this.reject=Fa(La,t)},Qi.f=Ea=function(e){return e===ha||e===ra?new na(e):xa(e)},m(Uo)&&ya!==Object.prototype)){oa=ya.then,wa||(zt(ya,"then",function(e,t){var n=this;return new ha(function(e,t){xe(oa,n,e,t)}).then(e,t)},{unsafe:!0}),zt(ya,"catch",va.catch,{unsafe:!0}));try{delete ya.constructor}catch(e){}Sn&&Sn(ya,va)}an({global:!0,wrap:!0,forced:ja},{Promise:ha}),gn(ha,sa,!1),ia=Z(sa),me&&ia&&!ia[Wo]&&(0,Ve.f)(ia,Wo,{configurable:!0,get:function(){return this}}),ra=Z(sa),an({target:sa,stat:!0,forced:ja},{reject:function(e){var t=Ea(this);return xe(t.reject,void 0,e),t.promise}}),an({target:sa,stat:!0,forced:ja},{resolve:function(e){return function(e,t){if(ve(e),g(t)&&t.constructor===e)return t;var n=Qi.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),an({target:sa,stat:!0,forced:Ta},{all:function(e){var t=this,n=Ea(t),r=n.resolve,o=n.reject,i=Zi(function(){var n=Ce(t.resolve),i=[],a=0,c=1;ii(e,function(e){var l=a++,u=!1;c++,xe(n,t,e).then(function(e){u||(u=!0,i[l]=e,--c||r(i))},o)}),--c||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Ea(t),r=n.reject,o=Zi(function(){var o=Ce(t.resolve);ii(e,function(e){xe(o,t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});const Va=r=>{let{config:o,data:i,render:a,fields:s,onChange:f,isVisible:d,isDisabled:p,id:y,onValidation:h,parentRunValidation:v,validateOn:m}=r;const[g]=t("form-"+(y||"noid")+"-"+ +new Date),[b,E]=t(!1),[x,O]=t(!1),[S,w]=t(!1),[j,T]=t(!1),[R,C]=t(),[P,k]=t({}),[A,I]=t(!1),D="function"==typeof o.fields?o.fields(i,R):[],F={};n(()=>{i&&!x&&O(i)},[i]);const L=e=>"collection"===e||"subform"===e,_=(e,t,n,r)=>{const o=!L(e.type)&&s[e.type].isValid(t[e.id],e),i=!L(e.type)&&e.customValidation?e.customValidation({data:t[e.id],allData:t,fieldConfig:e,isValid:o}):o;return n[e.id]&&delete n[e.id],L(e.type)||i?"collection"===e.type&&e.isRequired&&(!t[e.id]||0===t[e.id].length||1===t[e.id].length&&0===Object.keys(t[e.id][0]).length)?(r||(r=e.id),n[e.id]={value:t[e.id],field:e}):"collection"===e.type&&e.fields.forEach(r=>{t[e.id]&&t[e.id].forEach((o,i)=>{if(!(e.isRequired||o&&0!==Object.keys(o).length))return;const a=s[r.type]&&s[r.type].isValid(o[r.id],r),c=r.customValidation?r.customValidation(o[r.id],r,a):a;s[r.type]&&!c&&(n[e.id+"-"+i+"-"+r.id]={value:t[e.id],subField:r})})}):(r||(r=e.id),n[e.id]={value:t[e.id],field:e}),"collection"===e.type&&e.uniqEntries&&t[e.id]&&l(t[e.id],(e,t)=>JSON.stringify(e)===JSON.stringify(t)).length!==t[e.id].length&&(n[e.id]={value:t[e.id],field:e}),{errors:n,firstErrorField:r}},V=(e,t)=>{let n,r={};if(t||(t=i),D.forEach(e=>{if(!s[e.type]&&!L(e.type))return;const o=_(e,t,r,n);r=o.errors,n=o.firstErrorField}),n&&d&&e){const e=document.getElementById(n);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return r};n(()=>{if("function"==typeof h&&v){let e=V(!0);k(e),h(e)}},[h]);const M=(e,t)=>{V(!0),t&&Object.keys(t).length>0&&(P[e]=t)};n(()=>{let e=Object.assign({},i);if(D.forEach(t=>{if("collection"===t.type&&t.init){const n=t.min?Number(t.min):1;e[t.id]&&0!==e[t.id].length||(e[t.id]=[]);for(let r=e[t.id].length;r<n;r++)e[t.id].push({})}}),e=q(D,e),"function"==typeof o.asyncDataLoader&&d&&!j)try{return I(!0),Promise.resolve(o.asyncDataLoader()).then(function(e){C(e),T(!0),I(!1)})}catch(e){Promise.reject(e)}f(e,V(),y)},[d]);const q=(e,t)=>(e.forEach(e=>{"function"==typeof e.computedValue&&(t[e.id]=e.computedValue(t)),"collection"===e.type&&e.fields.forEach(n=>{"function"==typeof n.computedValue&&t[e.id].forEach((r,o)=>{t[e.id][o][n.id]=n.computedValue(t,t[e.id][o])})})}),t),N=e=>{let t={};return"string"==typeof e&&(t=c(D,{id:e})),Array.isArray(e)&&e.length>1&&(t=c(D,{id:e[0]})),t},$=(e,t,n)=>{const r=N(e);let o,a=Object.assign({},i);if(o=(n=>{let r;if(Array.isArray(e)){const t=c(D,{id:e[0]});r=c(t.fields,{id:e[1]})}else r=c(D,{id:e});return r&&"function"==typeof r.filter?r.filter(t):n})(t),Array.isArray(e)?o?a[e[0]][n][e[1]]=o:delete a[e[0]][n][e[1]]:o?a[e]=o:delete a[e],a=q(D,a),m.indexOf("change")>-1||r.validateOn&&r.validateOn.indexOf("change")>-1){const e=_(r,a,P);k(e.errors)}x&&E(!u(a,x)),f(a,V(),y),"undefined"!=typeof window&&"function"==typeof window.stagesLogging&&window.stagesLogging({id:g,data:i,errors:P,isDirty:b,loading:A,parsedFieldConfig:D})},B=(e,t)=>{const n=N(e);if(m.indexOf("blur")>-1||n.validateOn&&n.validateOn.indexOf("blur")>-1){let e=Object.assign({},i);const t=_(n,e,P);k(t.errors),f(e,t.errors,y)}};return D.forEach(t=>{(s[t.type]||L(t.type))&&(L(t.type)?"collection"===t.type?(Array.isArray(F[t.id])||(F[t.id]=[]),i[t.id]&&i[t.id].forEach((n,r)=>{const o={};t.fields.forEach(i=>{s[i.type]&&(o[i.id]=/*#__PURE__*/e.createElement(s[i.type].component,Object.assign({key:t.id+"-"+r+"-"+i.id,value:n[i.id],error:P[t.id+"-"+r+"-"+i.id],isDisabled:p||i.isDisabled,onChange:e=>$([t.id,i.id],e,r),onBlur:()=>B([t.id,i.id])},i)))}),F[t.id].push(o)})):"subform"===t.type&&(F[t.id]=/*#__PURE__*/e.createElement(Va,{config:t.config,render:n=>{let{fieldProps:r}=n;/*#__PURE__*/return e.createElement(t.render,r)},fields:s,id:y+"-"+t.id,onChange:(e,n)=>$(t.id,e),onValidation:e=>M(t.id,e),parentRunValidation:S,data:i&&i[t.id],isVisible:d,isDisabled:p,validateOn:m})):F[t.id]=/*#__PURE__*/e.createElement(s[t.type].component,Object.assign({key:t.id,value:i[t.id],error:P[t.id],isDisabled:p||t.isDisabled,onChange:e=>$(t.id,e),onBlur:()=>B(t.id)},t)))}),!1===d?null:a?a({actionProps:{handleActionClick:(e,t)=>{if(m.indexOf("action")>-1){t&&(w(!0),setTimeout(()=>w(!1),0));let e=t?V(!0):{};k(e)}setTimeout(()=>{0===Object.keys(P).length&&e()},0)},isDisabled:p,isDirty:b},fieldProps:{fields:F,onCollectionAction:(e,t,n)=>{const r=Object.assign({},i),o=c(D,{id:e}),a=o&&o.min?Number(o.min):0,l=o&&o.max?Number(o.max):99999999999999;let u;"add"===t&&(Array.isArray(r[e])||(r[e]=[]),l>r[e].length&&r[e].push({})),"remove"===t&&a<r[e].length&&r[e].splice(n,1),m.indexOf("collectionAction")>-1&&(u=V(),k(u)),f(r,u||V(),y)},data:i,errors:P,asyncData:R,isDirty:b},loading:A}):null};Va.propTypes={config:yr.object.isRequired,data:yr.object,render:yr.oneOfType([yr.node,yr.func]).isRequired,fields:yr.object.isRequired,onChange:yr.func,isVisible:yr.bool,isDisabled:yr.bool,id:yr.oneOfType([yr.string,yr.number]).isRequired,onValidation:yr.func,parentRunValidation:yr.bool,validateOn:yr.array},Va.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"]};const Ma=t=>{let{config:n,handleActionClick:r,isDisabled:o}=t;/*#__PURE__*/return e.createElement(e.Fragment,null,n.map((t,n)=>/*#__PURE__*/e.createElement("button",{type:"button",onClick:()=>r(t.onClick,t.validate),key:"action-"+n,disabled:o},"primary"===t.type?/*#__PURE__*/e.createElement("strong",null,t.title):t.title)))};function qa(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}const Na=["id","label","value","onChange","onBlur","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],$a=t=>{let{id:n,label:r,value:o,onChange:i,onBlur:a,error:c,placeholder:l,isRequired:u,isDisabled:s,prefix:f,suffix:d,secondaryText:p,type:y,errorRenderer:h}=t;return qa(t,Na),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,u?" *":""):null,/*#__PURE__*/e.createElement("div",null,f?/*#__PURE__*/e.createElement("span",null,f):null,/*#__PURE__*/e.createElement("input",{name:n,value:o||"",placeholder:l,type:y||"text",disabled:!!s,required:!!u,onChange:e=>{"function"==typeof i&&i(e.target.value)},onBlur:e=>{"function"==typeof a&&a(e.target.value)}}),d?/*#__PURE__*/e.createElement("span",null,d):null),p?/*#__PURE__*/e.createElement("div",null,p):null,c?h?h(c):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},Ba=(e,t)=>!t.isRequired||""!==e&&void 0!==e,Ga=["id","label","value","onChange","onBlur","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],za=["id","label","value","options","onChange","onBlur","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Ua=["id","label","value","options","onChange","onBlur","error","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Wa=["id","label","error","isRequired","secondaryText","errorRenderer"],Ha={text:{component:$a,isValid:Ba},number:{component:$a,isValid:Ba},email:{component:$a,isValid:Ba},password:{component:$a,isValid:Ba},tel:{component:$a,isValid:Ba},time:{component:$a,isValid:Ba},date:{component:$a,isValid:Ba},checkbox:{component:t=>{let{id:n,label:r,value:o,onChange:i,onBlur:a,error:c,placeholder:l,isRequired:u,isDisabled:s,prefix:f,suffix:d,secondaryText:p,type:y,errorRenderer:h}=t;return qa(t,Ga),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,u?" *":""):null,/*#__PURE__*/e.createElement("div",null,f?/*#__PURE__*/e.createElement("span",null,f):null,/*#__PURE__*/e.createElement("input",{name:n,value:"1",placeholder:l,type:y,disabled:!!s,required:!!u,checked:!!o,onChange:()=>{},onClick:e=>{"function"==typeof i&&i(!!e.target.checked),"function"==typeof a&&a(!!e.target.checked)}}),d?/*#__PURE__*/e.createElement("span",null,d):null),p?/*#__PURE__*/e.createElement("div",null,p):null,c?h?h(c):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:t=>{let{id:n,label:r,value:o,options:i,onChange:a,onBlur:c,error:l,placeholder:u,isRequired:s,isDisabled:f,prefix:d,suffix:p,secondaryText:y,errorRenderer:h}=t;return qa(t,za),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,s?" *":""):null,/*#__PURE__*/e.createElement("div",null,d?/*#__PURE__*/e.createElement("span",null,d):null,/*#__PURE__*/e.createElement("select",{name:n,value:o,options:i,placeholder:u,disabled:!!f,required:!!s,onChange:e=>{"function"==typeof a&&a(e.target.value)},onChange:e=>{"function"==typeof c&&c(e.target.value)}},i.map(t=>/*#__PURE__*/e.createElement("option",{value:t.value,key:t.value},t.text))),p?/*#__PURE__*/e.createElement("span",null,p):null),y?/*#__PURE__*/e.createElement("div",null,y):null,l?h?h(l):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:t=>{let{id:n,label:o,value:i,options:a,onChange:c,onBlur:l,error:u,isRequired:s,isDisabled:f,prefix:d,suffix:p,secondaryText:y,errorRenderer:h}=t;return qa(t,Ua),/*#__PURE__*/e.createElement("div",{id:n},o?/*#__PURE__*/e.createElement("label",null,o,s?" *":""):null,/*#__PURE__*/e.createElement("div",null,d?/*#__PURE__*/e.createElement("span",null,d):null,a.map(t=>/*#__PURE__*/e.createElement(r,{key:n+"-"+t.value},/*#__PURE__*/e.createElement("input",{type:"radio",name:n,id:n+"-"+t.value,value:t.value,checked:i===t.value,disabled:!!f,onChange:()=>{},onClick:e=>{"function"==typeof c&&c(t.value),"function"==typeof l&&l(t.value)}}),/*#__PURE__*/e.createElement("label",{htmlFor:n+"-"+t.value},t.text)," ")),p?/*#__PURE__*/e.createElement("span",null,p):null),y?/*#__PURE__*/e.createElement("div",null,y):null,u?h?h(u):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:t=>{let{id:n,label:r,error:o,isRequired:i,secondaryText:a,errorRenderer:c}=t;return qa(t,Wa),r||a||o?/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,i?" *":""):null,a?/*#__PURE__*/e.createElement("div",null,a):null,o?c?c(o):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null):null},isValid:()=>!0}};export{Ma as Actions,Va as Form,ko as HashRouter,Ao as Navigation,Io as Progression,hr as Stages,Ha as plainFields};
//# sourceMappingURL=lib.module.js.map

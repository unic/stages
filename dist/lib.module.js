import e,{useState as t,useEffect as n,Fragment as r}from"react";import o from"lodash.findindex";import{useHash as i,useMount as a}from"react-use";import c from"json-beautify";import l from"lodash.get";import s from"lodash.find";import u from"lodash.sortby";import f from"lodash.uniqwith";import d from"lodash.isequal";import p from"lodash.set";import y from"lodash.unset";import g from"lodash.merge";import h from"fast-json-stable-stringify";var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){var t={exports:{}};return e(t,t.exports),t.exports}var b,O,x=function(e){return e&&e.Math==Math&&e},E=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof m&&m)||function(){return this}()||Function("return this")(),w={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},S=function(e){return"function"==typeof e},j=function(e){return"object"==typeof e?null!==e:S(e)},A=E.document,C=j(A)&&j(A.createElement),k=function(e){return C?A.createElement(e):{}},R=k("span").classList,T=R&&R.constructor&&R.constructor.prototype,F=T===Object.prototype?void 0:T,P=function(e){try{return!!e()}catch(e){return!0}},I=!P(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),D=Function.prototype,L=D.call,_=I&&D.bind.bind(L,L),V=I?function(e){return e&&_(e)}:function(e){return e&&function(){return L.apply(e,arguments)}},M=V({}.toString),N=V("".slice),q=function(e){return N(M(e),8,-1)},B=E.Object,$=V("".split),W=P(function(){return!B("z").propertyIsEnumerable(0)})?function(e){return"String"==q(e)?$(e,""):B(e)}:B,U=E.TypeError,z=function(e){if(null==e)throw U("Can't call method on "+e);return e},G=function(e){return W(z(e))},H=Object.defineProperty,K=function(e,t){try{H(E,e,{value:t,configurable:!0,writable:!0})}catch(n){E[e]=t}return t},Y=E["__core-js_shared__"]||K("__core-js_shared__",{}),J=v(function(e){(e.exports=function(e,t){return Y[e]||(Y[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),X=E.Object,Q=function(e){return X(z(e))},Z=V({}.hasOwnProperty),ee=Object.hasOwn||function(e,t){return Z(Q(e),t)},te=0,ne=Math.random(),re=V(1..toString),oe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+re(++te+ne,36)},ie=function(e){return S(e)?e:void 0},ae=function(e,t){return arguments.length<2?ie(E[e]):E[e]&&E[e][t]},ce=ae("navigator","userAgent")||"",le=E.process,se=E.Deno,ue=le&&le.versions||se&&se.version,fe=ue&&ue.v8;fe&&(O=(b=fe.split("."))[0]>0&&b[0]<4?1:+(b[0]+b[1])),!O&&ce&&(!(b=ce.match(/Edge\/(\d+)/))||b[1]>=74)&&(b=ce.match(/Chrome\/(\d+)/))&&(O=+b[1]);var de,pe=O,ye=!!Object.getOwnPropertySymbols&&!P(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&pe&&pe<41}),ge=ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,he=J("wks"),me=E.Symbol,ve=me&&me.for,be=ge?me:me&&me.withoutSetter||oe,Oe=function(e){if(!ee(he,e)||!ye&&"string"!=typeof he[e]){var t="Symbol."+e;he[e]=ye&&ee(me,e)?me[e]:ge&&ve?ve(t):be(t)}return he[e]},xe=E.String,Ee=E.TypeError,we=function(e){if(j(e))return e;throw Ee(xe(e)+" is not an object")},Se=!P(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),je=Se&&P(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ae=!Se&&!P(function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a}),Ce=Function.prototype.call,ke=I?Ce.bind(Ce):function(){return Ce.apply(Ce,arguments)},Re=V({}.isPrototypeOf),Te=E.Object,Fe=ge?function(e){return"symbol"==typeof e}:function(e){var t=ae("Symbol");return S(t)&&Re(t.prototype,Te(e))},Pe=E.String,Ie=function(e){try{return Pe(e)}catch(e){return"Object"}},De=E.TypeError,Le=function(e){if(S(e))return e;throw De(Ie(e)+" is not a function")},_e=function(e,t){var n=e[t];return null==n?void 0:Le(n)},Ve=E.TypeError,Me=E.TypeError,Ne=Oe("toPrimitive"),qe=function(e){var t=function(e,t){if(!j(e)||Fe(e))return e;var n,r=_e(e,Ne);if(r){if(void 0===t&&(t="default"),n=ke(r,e,t),!j(n)||Fe(n))return n;throw Me("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&S(n=e.toString)&&!j(r=ke(n,e)))return r;if(S(n=e.valueOf)&&!j(r=ke(n,e)))return r;if("string"!==t&&S(n=e.toString)&&!j(r=ke(n,e)))return r;throw Ve("Can't convert object to primitive value")}(e,t)}(e,"string");return Fe(t)?t:t+""},Be=E.TypeError,$e=Object.defineProperty,We=Object.getOwnPropertyDescriptor,Ue={f:Se?je?function(e,t,n){if(we(e),t=qe(t),we(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=We(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return $e(e,t,n)}:$e:function(e,t,n){if(we(e),t=qe(t),we(n),Ae)try{return $e(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Be("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},ze=Math.ceil,Ge=Math.floor,He=function(e){var t=+e;return t!=t||0===t?0:(t>0?Ge:ze)(t)},Ke=Math.max,Ye=Math.min,Je=function(e,t){var n=He(e);return n<0?Ke(n+t,0):Ye(n,t)},Xe=Math.min,Qe=function(e){return e>0?Xe(He(e),9007199254740991):0},Ze=function(e){return Qe(e.length)},et=function(e){return function(t,n,r){var o,i=G(t),a=Ze(i),c=Je(r,a);if(e&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},tt={includes:et(!0),indexOf:et(!1)},nt={},rt=tt.indexOf,ot=V([].push),it=function(e,t){var n,r=G(e),o=0,i=[];for(n in r)!ee(nt,n)&&ee(r,n)&&ot(i,n);for(;t.length>o;)ee(r,n=t[o++])&&(~rt(i,n)||ot(i,n));return i},at=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ct=Object.keys||function(e){return it(e,at)},lt=Se&&!je?Object.defineProperties:function(e,t){we(e);for(var n,r=G(t),o=ct(t),i=o.length,a=0;i>a;)Ue.f(e,n=o[a++],r[n]);return e},st={f:lt},ut=ae("document","documentElement"),ft=J("keys"),dt=function(e){return ft[e]||(ft[e]=oe(e))},pt=dt("IE_PROTO"),yt=function(){},gt=function(e){return"<script>"+e+"<\/script>"},ht=function(e){e.write(gt("")),e.close();var t=e.parentWindow.Object;return e=null,t},mt=function(){try{de=new ActiveXObject("htmlfile")}catch(e){}var e,t;mt="undefined"!=typeof document?document.domain&&de?ht(de):((t=k("iframe")).style.display="none",ut.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(gt("document.F=Object")),e.close(),e.F):ht(de);for(var n=at.length;n--;)delete mt.prototype[at[n]];return mt()};nt[pt]=!0;var vt=Object.create||function(e,t){var n;return null!==e?(yt.prototype=we(e),n=new yt,yt.prototype=null,n[pt]=e):n=mt(),void 0===t?n:st.f(n,t)},bt=Oe("unscopables"),Ot=Array.prototype;null==Ot[bt]&&Ue.f(Ot,bt,{configurable:!0,value:vt(null)});var xt=function(e){Ot[bt][e]=!0},Et={},wt=V(Function.toString);S(Y.inspectSource)||(Y.inspectSource=function(e){return wt(e)});var St,jt,At,Ct=Y.inspectSource,kt=E.WeakMap,Rt=S(kt)&&/native code/.test(Ct(kt)),Tt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ft=Se?function(e,t,n){return Ue.f(e,t,Tt(1,n))}:function(e,t,n){return e[t]=n,e},Pt=E.TypeError;if(Rt||Y.state){var It=Y.state||(Y.state=new(0,E.WeakMap)),Dt=V(It.get),Lt=V(It.has),_t=V(It.set);St=function(e,t){if(Lt(It,e))throw new Pt("Object already initialized");return t.facade=e,_t(It,e,t),t},jt=function(e){return Dt(It,e)||{}},At=function(e){return Lt(It,e)}}else{var Vt=dt("state");nt[Vt]=!0,St=function(e,t){if(ee(e,Vt))throw new Pt("Object already initialized");return t.facade=e,Ft(e,Vt,t),t},jt=function(e){return ee(e,Vt)?e[Vt]:{}},At=function(e){return ee(e,Vt)}}var Mt,Nt,qt,Bt={set:St,get:jt,has:At,enforce:function(e){return At(e)?jt(e):St(e,{})},getterFor:function(e){return function(t){var n;if(!j(t)||(n=jt(t)).type!==e)throw Pt("Incompatible receiver, "+e+" required");return n}}},$t={}.propertyIsEnumerable,Wt=Object.getOwnPropertyDescriptor,Ut=Wt&&!$t.call({1:2},1)?function(e){var t=Wt(this,e);return!!t&&t.enumerable}:$t,zt={f:Ut},Gt=Object.getOwnPropertyDescriptor,Ht={f:Se?Gt:function(e,t){if(e=G(e),t=qe(t),Ae)try{return Gt(e,t)}catch(e){}if(ee(e,t))return Tt(!ke(zt.f,e,t),e[t])}},Kt=Function.prototype,Yt=Se&&Object.getOwnPropertyDescriptor,Jt=ee(Kt,"name"),Xt={EXISTS:Jt,PROPER:Jt&&"something"===function(){}.name,CONFIGURABLE:Jt&&(!Se||Se&&Yt(Kt,"name").configurable)},Qt=v(function(e){var t=Xt.CONFIGURABLE,n=Bt.get,r=Bt.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var c,l=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;S(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ee(i,"name")||t&&i.name!==f)&&Ft(i,"name",f),(c=r(i)).source||(c.source=o.join("string"==typeof f?f:""))),e!==E?(l?!u&&e[n]&&(s=!0):delete e[n],s?e[n]=i:Ft(e,n,i)):s?e[n]=i:K(n,i)})(Function.prototype,"toString",function(){return S(this)&&n(this).source||Ct(this)})}),Zt=at.concat("length","prototype"),en={f:Object.getOwnPropertyNames||function(e){return it(e,Zt)}},tn={f:Object.getOwnPropertySymbols},nn=V([].concat),rn=ae("Reflect","ownKeys")||function(e){var t=en.f(we(e)),n=tn.f;return n?nn(t,n(e)):t},on=function(e,t,n){for(var r=rn(t),o=Ue.f,i=Ht.f,a=0;a<r.length;a++){var c=r[a];ee(e,c)||n&&ee(n,c)||o(e,c,i(t,c))}},an=/#|\.prototype\./,cn=function(e,t){var n=sn[ln(e)];return n==fn||n!=un&&(S(t)?P(t):!!t)},ln=cn.normalize=function(e){return String(e).replace(an,".").toLowerCase()},sn=cn.data={},un=cn.NATIVE="N",fn=cn.POLYFILL="P",dn=cn,pn=Ht.f,yn=function(e,t){var n,r,o,i,a,c=e.target,l=e.global,s=e.stat;if(n=l?E:s?E[c]||K(c,{}):(E[c]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=pn(n,r))&&a.value:n[r],!dn(l?r:c+(s?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;on(i,o)}(e.sham||o&&o.sham)&&Ft(i,"sham",!0),Qt(n,r,i,e)}},gn=!P(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),hn=dt("IE_PROTO"),mn=E.Object,vn=mn.prototype,bn=gn?mn.getPrototypeOf:function(e){var t=Q(e);if(ee(t,hn))return t[hn];var n=t.constructor;return S(n)&&t instanceof n?n.prototype:t instanceof mn?vn:null},On=Oe("iterator"),xn=!1;[].keys&&("next"in(qt=[].keys())?(Nt=bn(bn(qt)))!==Object.prototype&&(Mt=Nt):xn=!0);var En=null==Mt||P(function(){var e={};return Mt[On].call(e)!==e});En&&(Mt={}),S(Mt[On])||Qt(Mt,On,function(){return this});var wn={IteratorPrototype:Mt,BUGGY_SAFARI_ITERATORS:xn},Sn=Ue.f,jn=Oe("toStringTag"),An=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ee(e,jn)&&Sn(e,jn,{configurable:!0,value:t})},Cn=wn.IteratorPrototype,kn=function(){return this},Rn=E.String,Tn=E.TypeError,Fn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=V(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return we(n),function(e){if("object"==typeof e||S(e))return e;throw Tn("Can't set "+Rn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Pn=Xt.PROPER,In=Xt.CONFIGURABLE,Dn=wn.IteratorPrototype,Ln=wn.BUGGY_SAFARI_ITERATORS,_n=Oe("iterator"),Vn=function(){return this},Mn=Ue.f,Nn=Bt.set,qn=Bt.getterFor("Array Iterator"),Bn=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o="Array Iterator";e.prototype=vt(Cn,{next:Tt(1,function(){var e=qn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}})}),An(e,o,!1),Et[o]=kn}(n);var c,l,s,u=function(e){if(e===o&&y)return y;if(!Ln&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=!1,d=e.prototype,p=d[_n]||d["@@iterator"]||d.values,y=!Ln&&p||u(o),g=d.entries||p;if(g&&(c=bn(g.call(new e)))!==Object.prototype&&c.next&&(bn(c)!==Dn&&(Fn?Fn(c,Dn):S(c[_n])||Qt(c,_n,Vn)),An(c,"Array Iterator",!0)),Pn&&p&&"values"!==p.name&&(In?Ft(d,"name","values"):(f=!0,y=function(){return ke(p,this)})),void(l={values:u("values"),keys:u("keys"),entries:u("entries")}))for(s in l)(Ln||f||!(s in d))&&Qt(d,s,l[s]);else yn({target:"Array",proto:!0,forced:Ln||f},l);return d[_n]!==y&&Qt(d,_n,y,{name:o}),Et.Array=y,l}(Array,0,function(e,t){Nn(this,{type:"Array Iterator",target:G(e),index:0,kind:t})},0,"values"),$n=Et.Arguments=Et.Array;if(xt("keys"),xt("values"),xt("entries"),Se&&"values"!==$n.name)try{Mn($n,"name",{value:"values"})}catch(e){}var Wn=Oe("iterator"),Un=Oe("toStringTag"),zn=Bn.values,Gn=function(e,t){if(e){if(e[Wn]!==zn)try{Ft(e,Wn,zn)}catch(t){e[Wn]=zn}if(e[Un]||Ft(e,Un,t),w[t])for(var n in Bn)if(e[n]!==Bn[n])try{Ft(e,n,Bn[n])}catch(t){e[n]=Bn[n]}}};for(var Hn in w)Gn(E[Hn]&&E[Hn].prototype,Hn);Gn(F,"DOMTokenList");var Kn=Object.assign,Yn=Object.defineProperty,Jn=V([].concat),Xn=!Kn||P(function(){if(Se&&1!==Kn({b:1},Kn(Yn({},"a",{enumerable:!0,get:function(){Yn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Kn({},e)[n]||ct(Kn({},t)).join("")!=r})?function(e,t){for(var n=Q(e),r=arguments.length,o=1,i=tn.f,a=zt.f;r>o;)for(var c,l=W(arguments[o++]),s=i?Jn(ct(l),i(l)):ct(l),u=s.length,f=0;u>f;)c=s[f++],Se&&!ke(a,l,c)||(n[c]=l[c]);return n}:Kn;yn({target:"Object",stat:!0,forced:Object.assign!==Xn},{assign:Xn});var Qn="function"==typeof Symbol&&Symbol.for,Zn=Qn?Symbol.for("react.element"):60103,er=Qn?Symbol.for("react.portal"):60106,tr=Qn?Symbol.for("react.fragment"):60107,nr=Qn?Symbol.for("react.strict_mode"):60108,rr=Qn?Symbol.for("react.profiler"):60114,or=Qn?Symbol.for("react.provider"):60109,ir=Qn?Symbol.for("react.context"):60110,ar=Qn?Symbol.for("react.async_mode"):60111,cr=Qn?Symbol.for("react.concurrent_mode"):60111,lr=Qn?Symbol.for("react.forward_ref"):60112,sr=Qn?Symbol.for("react.suspense"):60113,ur=Qn?Symbol.for("react.suspense_list"):60120,fr=Qn?Symbol.for("react.memo"):60115,dr=Qn?Symbol.for("react.lazy"):60116,pr=Qn?Symbol.for("react.block"):60121,yr=Qn?Symbol.for("react.fundamental"):60117,gr=Qn?Symbol.for("react.responder"):60118,hr=Qn?Symbol.for("react.scope"):60119;function mr(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Zn:switch(e=e.type){case ar:case cr:case tr:case rr:case nr:case sr:return e;default:switch(e=e&&e.$$typeof){case ir:case lr:case dr:case fr:case or:return e;default:return t}}case er:return t}}}function vr(e){return mr(e)===cr}var br={AsyncMode:ar,ConcurrentMode:cr,ContextConsumer:ir,ContextProvider:or,Element:Zn,ForwardRef:lr,Fragment:tr,Lazy:dr,Memo:fr,Portal:er,Profiler:rr,StrictMode:nr,Suspense:sr,isAsyncMode:function(e){return vr(e)||mr(e)===ar},isConcurrentMode:vr,isContextConsumer:function(e){return mr(e)===ir},isContextProvider:function(e){return mr(e)===or},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Zn},isForwardRef:function(e){return mr(e)===lr},isFragment:function(e){return mr(e)===tr},isLazy:function(e){return mr(e)===dr},isMemo:function(e){return mr(e)===fr},isPortal:function(e){return mr(e)===er},isProfiler:function(e){return mr(e)===rr},isStrictMode:function(e){return mr(e)===nr},isSuspense:function(e){return mr(e)===sr},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===tr||e===cr||e===rr||e===nr||e===sr||e===ur||"object"==typeof e&&null!==e&&(e.$$typeof===dr||e.$$typeof===fr||e.$$typeof===or||e.$$typeof===ir||e.$$typeof===lr||e.$$typeof===yr||e.$$typeof===gr||e.$$typeof===hr||e.$$typeof===pr)},typeOf:mr};function Or(){}function xr(){}v(function(e,t){}),v(function(e){e.exports=br}),xr.resetWarningCache=Or;var Er=v(function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xr,resetWarningCache:Or};return n.PropTypes=n,n}()});const wr=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,Sr=e=>{let{children:r,initialData:i,initialStep:a,render:c,validateOnStepChange:l,onChange:s}=e;const[u]=t("stages-"+ +new Date),[f,d]=t(i),[p,y]=t([]),[g,h]=t({}),[m,v]=t(a||0),[b,O]=t([]),x=e=>{const t=b&&b[e]?b[e].key:e;return f&&f[t]?f[t]:{}},E=(e,t)=>(b[t]||(b[t]={key:e,visible:!0},O([...b])),e),w=(e,t,n)=>{const r=Object.assign({},f),o=b&&b[n]?b[n].key:n;wr()&&window.stagesLogging('Handle onChange for "'+o+'"',u),g[n]=t,h(Object.assign({},g)),r[o]=e,d(Object.assign({},r)),"function"==typeof s&&s({data:r,errors:g})};n(()=>{wr()&&window.stagesLogging({id:u,keys:b,data:f,errors:g,currentStep:m})},[b,f,g,m]),n(()=>{wr()&&window.stagesLogging("Init Stages",u),r.map((e,t)=>e({index:t,setStepKey:E,initializing:!0})).filter(e=>e)},[]),n(()=>{if(l){const e=j();e<m&&v(-1===e?0:e+1)}y(r.map((e,t)=>e({data:x(t),allData:f,onChange:w,onNav:S,isActive:t===m,index:t,errors:g[t]||{},setStepKey:E})).filter((e,t)=>{const n=null!==e;return b[t]&&(b[t].visible=n),n}))},[m,f]);const S=(e,t)=>{let n=m;if(wr()&&window.stagesLogging('On nav "'+e+'" -> "'+t+'"',u),"next"===e){let e=!1;for(let t=m+1;t<b.length;t++)b[t].visible&&!e&&(n=t,e=!0)}if("prev"===e){let e=!1;for(let t=m-1;t>=0;t--)b[t].visible&&!e&&(n=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<b.length;t++)b[t].visible&&!e&&(n=t,e=!0)}if("last"===e){let e=!1;for(let t=b.length-1;t>=0;t--)b[t].visible&&!e&&(n=t,e=!0)}if("lastValid"===e&&(n=j()),"step"===e&&b[t]&&b[t].visible)n=Number(t);else if("step"===e&&"string"==typeof t){const e=o(b,{key:t});e>-1&&(n=e)}n<0&&(n=0),n>b.length&&(n=b.length),v(n)},j=()=>{let e=-1,t=!1;return Object.keys(g).forEach(n=>{const r=o(b,{key:n});(0===Object.keys(g[n]).length||r>-1&&!b[r].visible)&&!t?e=Number(n):t=!0}),e};return 0===p.length?null:c?c({navigationProps:{currentStep:m,data:f,onChangeStep:e=>{const t=j();wr()&&window.stagesLogging('On change step "'+e+'"',u),(t+1>=e||!1===l)&&v(e)},errors:g,keys:b,stepCount:p.length,lastValidStep:j()},progressionProps:(()=>{const e=p.length,t=j();let n=0;return Object.keys(g).forEach(e=>{const r=x(e);e<=t&&0===Object.keys(g[e]).length&&Object.keys(r).length>0&&n++}),{currentStep:m,stepCount:e,validSteps:n,percentage:100/e*n,data:f,errors:g}})(),routerProps:{step:m,onChange:v,keys:b},steps:p}):null};Sr.propTypes={children:Er.arrayOf(Er.oneOfType([Er.node,Er.func])).isRequired,initialData:Er.object,render:Er.oneOfType([Er.node,Er.func]).isRequired,initialStep:Er.number,validateOnStepChange:Er.bool},Sr.defaultProps={initialData:{},validateOnStepChange:!0};var jr={};jr[Oe("toStringTag")]="z";var Ar,Cr,kr="[object z]"===String(jr),Rr=Oe("toStringTag"),Tr=E.Object,Fr="Arguments"==q(function(){return arguments}()),Pr=kr?q:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Tr(e),Rr))?n:Fr?q(t):"Object"==(r=q(t))&&S(t.callee)?"Arguments":r},Ir=E.String,Dr=function(e){if("Symbol"===Pr(e))throw TypeError("Cannot convert a Symbol value to a string");return Ir(e)},Lr=function(){var e=we(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},_r=E.RegExp,Vr=P(function(){var e=_r("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),Mr=Vr||P(function(){return!_r("a","y").sticky}),Nr={BROKEN_CARET:Vr||P(function(){var e=_r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:Mr,UNSUPPORTED_Y:Vr},qr=E.RegExp,Br=P(function(){var e=qr(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),$r=E.RegExp,Wr=P(function(){var e=$r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),Ur=Bt.get,zr=J("native-string-replace",String.prototype.replace),Gr=RegExp.prototype.exec,Hr=Gr,Kr=V("".charAt),Yr=V("".indexOf),Jr=V("".replace),Xr=V("".slice),Qr=(Cr=/b*/g,ke(Gr,Ar=/a/,"a"),ke(Gr,Cr,"a"),0!==Ar.lastIndex||0!==Cr.lastIndex),Zr=Nr.BROKEN_CARET,eo=void 0!==/()??/.exec("")[1];(Qr||eo||Zr||Br||Wr)&&(Hr=function(e){var t,n,r,o,i,a,c,l=this,s=Ur(l),u=Dr(e),f=s.raw;if(f)return f.lastIndex=l.lastIndex,t=ke(Hr,f,u),l.lastIndex=f.lastIndex,t;var d=s.groups,p=Zr&&l.sticky,y=ke(Lr,l),g=l.source,h=0,m=u;if(p&&(y=Jr(y,"y",""),-1===Yr(y,"g")&&(y+="g"),m=Xr(u,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Kr(u,l.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,h++),n=new RegExp("^(?:"+g+")",y)),eo&&(n=new RegExp("^"+g+"$(?!\\s)",y)),Qr&&(r=l.lastIndex),o=ke(Gr,p?n:l,m),p?o?(o.input=Xr(o.input,h),o[0]=Xr(o[0],h),o.index=l.lastIndex,l.lastIndex+=o[0].length):l.lastIndex=0:Qr&&o&&(l.lastIndex=l.global?o.index+o[0].length:r),eo&&o&&o.length>1&&ke(zr,o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o&&d)for(o.groups=a=vt(null),i=0;i<d.length;i++)a[(c=d[i])[0]]=o[c[1]];return o});var to=Hr;yn({target:"RegExp",proto:!0,forced:/./.exec!==to},{exec:to});var no=Function.prototype,ro=no.apply,oo=no.call,io="object"==typeof Reflect&&Reflect.apply||(I?oo.bind(ro):function(){return oo.apply(ro,arguments)}),ao=Oe("species"),co=RegExp.prototype,lo=Oe("match"),so=function(e){var t;return j(e)&&(void 0!==(t=e[lo])?!!t:"RegExp"==q(e))},uo=function(){},fo=[],po=ae("Reflect","construct"),yo=/^\s*(?:class|function)\b/,go=V(yo.exec),ho=!yo.exec(uo),mo=function(e){if(!S(e))return!1;try{return po(uo,fo,e),!0}catch(e){return!1}},vo=function(e){if(!S(e))return!1;switch(Pr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ho||!!go(yo,Ct(e))}catch(e){return!0}};vo.sham=!0;var bo=!po||P(function(){var e;return mo(mo.call)||!mo(Object)||!mo(function(){e=!0})||e})?vo:mo,Oo=E.TypeError,xo=Oe("species"),Eo=function(e,t){var n,r=we(e).constructor;return void 0===r||null==(n=we(r)[xo])?t:function(e){if(bo(e))return e;throw Oo(Ie(e)+" is not a constructor")}(n)},wo=V("".charAt),So=V("".charCodeAt),jo=V("".slice),Ao=function(e){return function(t,n){var r,o,i=Dr(z(t)),a=He(n),c=i.length;return a<0||a>=c?e?"":void 0:(r=So(i,a))<55296||r>56319||a+1===c||(o=So(i,a+1))<56320||o>57343?e?wo(i,a):r:e?jo(i,a,a+2):o-56320+(r-55296<<10)+65536}},Co=(Ao(!1),Ao(!0)),ko=function(e,t,n){return t+(n?Co(e,t).length:1)},Ro=E.Array,To=Math.max,Fo=function(e,t,n){for(var r,o,i,a=Ze(e),c=Je(t,a),l=Je(void 0===n?a:n,a),s=Ro(To(l-c,0)),u=0;c<l;c++,u++)r=s,o=e[c],(i=qe(u))in r?Ue.f(r,i,Tt(0,o)):r[i]=o;return s.length=u,s},Po=E.TypeError,Io=function(e,t){var n=e.exec;if(S(n)){var r=ke(n,e,t);return null!==r&&we(r),r}if("RegExp"===q(e))return ke(to,e,t);throw Po("RegExp#exec called on incompatible receiver")},Do=Nr.UNSUPPORTED_Y,Lo=Math.min,_o=[].push,Vo=V(/./.exec),Mo=V(_o),No=V("".slice);!function(e,t,n,r){var o=Oe(e),i=!P(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),a=i&&!P(function(){var e=!1,t=/a/;return(t={}).constructor={},t.constructor[ao]=function(){return t},t.flags="",t[o]=/./[o],t.exec=function(){return e=!0,null},t[o](""),!e});if(!i||!a||n){var c=V(/./[o]),l=t(o,""[e],function(e,t,n,r,o){var a=V(e),l=t.exec;return l===to||l===co.exec?i&&!o?{done:!0,value:c(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}});Qt(String.prototype,e,l[0]),Qt(co,o,l[1])}r&&Ft(co[o],"sham",!0)}("split",function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=Dr(z(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!so(e))return ke(t,r,e,o);for(var i,a,c,l=[],s=0,u=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=ke(to,u,r))&&!((a=u.lastIndex)>s&&(Mo(l,No(r,s,i.index)),i.length>1&&i.index<r.length&&io(_o,l,Fo(i,1)),c=i[0].length,s=a,l.length>=o));)u.lastIndex===i.index&&u.lastIndex++;return s===r.length?!c&&Vo(u,"")||Mo(l,""):Mo(l,No(r,s)),l.length>o?Fo(l,0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:ke(t,this,e,n)}:t,[function(t,n){var o=z(this),i=null==t?void 0:_e(t,e);return i?ke(i,t,o,n):ke(r,Dr(o),t,n)},function(e,o){var i=we(this),a=Dr(e),c=n(r,i,a,o,r!==t);if(c.done)return c.value;var l=Eo(i,RegExp),s=i.unicode,u=new l(Do?"^(?:"+i.source+")":i,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Do?"g":"y")),f=void 0===o?4294967295:o>>>0;if(0===f)return[];if(0===a.length)return null===Io(u,a)?[a]:[];for(var d=0,p=0,y=[];p<a.length;){u.lastIndex=Do?0:p;var g,h=Io(u,Do?No(a,p):a);if(null===h||(g=Lo(Qe(u.lastIndex+(Do?p:0)),a.length))===d)p=ko(a,p,s);else{if(Mo(y,No(a,d,p)),y.length===f)return y;for(var m=1;m<=h.length-1;m++)if(Mo(y,h[m]),y.length===f)return y;p=d=g}}return Mo(y,No(a,d)),y}]},!!P(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),Do);const qo=e=>{let{step:r,onChange:c,keys:l,prefix:s,hashFormat:u="#!"}=e;const[f,d]=i(),[p,y]=t(!1),g=e=>l&&l[e]?l[e].key:s?s+"-"+e:e,h=()=>{if(-1!==f.indexOf(u)){const e=(e=>{const t=e.split(u);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):o(l,{key:e})}return-1})(f);-1!==e&&(d(""+u+g(e)),c(e))}else d(""+u+g(r))};return n(()=>{p&&h()},[f]),n(()=>{p&&d(""+u+g(r))},[r]),a(()=>{h(),y(!0)}),null},Bo=t=>{let{currentStep:n,onChangeStep:r,lastValidStep:o,keys:i}=t;const a=[];for(let t=0;t<i.length;t++)if(i&&i[t]&&i[t].visible){const c=i&&i[t]?i[t].key:"Step "+(t+1);a.push(n===t?/*#__PURE__*/e.createElement("li",{key:c,style:{textTransform:"capitalize"}},/*#__PURE__*/e.createElement("strong",null,c)):/*#__PURE__*/e.createElement("li",o>-1&&o+1<t||-1===o&&t>0?{key:c,style:{color:"#999",textTransform:"capitalize"}}:{key:c,style:{textTransform:"capitalize"},onClick:()=>r(t)},c))}/*#__PURE__*/return e.createElement("ul",null,a)},$o=t=>{let{stepCount:n,validSteps:r,percentage:o}=t;/*#__PURE__*/return e.createElement("div",null,r+" / "+n+" ("+Math.round(o)+"%)")},Wo=()=>{const[r,o]=t({}),[i,a]=t({}),[s,u]=t({}),[f,d]=t({}),[p,y]=t(!1),g=(e,t)=>{if("string"==typeof e)i[t]||(i[t]=[]),i[t].push({action:e,time:+new Date}),a(i);else{const t=Object.assign(r,{}),n=Object.keys(t)[0];t[e.id]=e,o(Object.assign({},t)),u(e=>({key:e.key?e.key:n,tab:e.tab?e.tab:"data"}))}};return n(()=>{"undefined"!=typeof window&&(window.stagesLogging=g)},[]),0===Object.keys(r).length?null:/*#__PURE__*/e.createElement("div",{style:{position:"absolute",top:"8px",right:"8px",width:"320px",padding:"8px",fontSize:"14px",color:"#333",border:"1px #bbb solid",borderRadius:"4px",background:"#fbfbfb",fontFamily:"Open Sans, Helvetica, Arial, sans"}},/*#__PURE__*/e.createElement("strong",{style:{lineHeight:"22px"}},"Debugger:"),/*#__PURE__*/e.createElement("button",{type:"button",style:{float:"right"},onClick:()=>y(!p)},p?"hide":"show"),p?Object.keys(r).map(t=>{const n=t.split("-");n.pop();let o="";return o="logs"===s.tab?i[s.key]?i[s.key].map(e=>e.time+": "+e.action).join("\n"):"":c(f[t]?l(r[s.key][s.tab],f[t]||""):r[s.key][s.tab],null,2),/*#__PURE__*/e.createElement("div",{key:t+"-"+s.tab},/*#__PURE__*/e.createElement("h3",{style:{background:"#333",color:"#fff",margin:"8px 0 0 0",padding:"2px 6px",textTransform:"capitalize",position:"relative"}},n.join(" "),":",r[t].isDirty?/*#__PURE__*/e.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"4px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"dirty"):null,Object.keys(r[t].errors).length?/*#__PURE__*/e.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"48px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"errors"):null,r[t].loading?/*#__PURE__*/e.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"98px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"loading"):null),/*#__PURE__*/e.createElement("ul",{style:{listStyle:"none",display:"flex",margin:"8px 0 0 0",padding:0,gap:"24px"}},/*#__PURE__*/e.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:s.key===t&&"data"===s.tab?"#f30":"#000"},onClick:()=>u({key:t,tab:"data"})},"Data"),/*#__PURE__*/e.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:s.key===t&&"errors"===s.tab?"#f30":"#000"},onClick:()=>u({key:t,tab:"errors"})},"Errors"),/*#__PURE__*/e.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:s.key===t&&"parsedFieldConfig"===s.tab?"#f30":"#000"},onClick:()=>u({key:t,tab:"parsedFieldConfig"})},"Field Config"),/*#__PURE__*/e.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:s.key===t&&"logs"===s.tab?"#f30":"#000"},onClick:()=>u({key:t,tab:"logs"})},"Logs")),/*#__PURE__*/e.createElement("input",{value:f[t]||"",placeholder:"your.data.filter.path",onChange:e=>{const n=Object.assign({},f);n[t]=e.target.value,d(n)},style:{width:"calc(100% - 12px)",minWidth:"calc(100% - 12px)",maxWidth:"calc(100% - 12px)",fontSize:"12px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"4px",padding:"4px",overflowX:"scroll",whiteSpace:"pre"}}),s&&s.key===t?/*#__PURE__*/e.createElement("textarea",{readOnly:!0,style:{width:"calc(100% - 8px)",minWidth:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)",height:"200px",fontSize:"10px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"8px",overflowX:"scroll",whiteSpace:"pre"},value:o}):null)}):null)};var Uo=E.Promise,zo=Oe("species"),Go=E.TypeError,Ho=V(V.bind),Ko=function(e,t){return Le(e),void 0===t?e:I?Ho(e,t):function(){return e.apply(t,arguments)}},Yo=Oe("iterator"),Jo=Array.prototype,Xo=Oe("iterator"),Qo=function(e){if(null!=e)return _e(e,Xo)||_e(e,"@@iterator")||Et[Pr(e)]},Zo=E.TypeError,ei=function(e,t,n){var r,o;we(e);try{if(!(r=_e(e,"return"))){if("throw"===t)throw n;return n}r=ke(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return we(r),n},ti=E.TypeError,ni=function(e,t){this.stopped=e,this.result=t},ri=ni.prototype,oi=function(e,t,n){var r,o,i,a,c,l,s,u,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),y=Ko(t,n&&n.that),g=function(e){return r&&ei(r,"normal",e),new ni(!0,e)},h=function(e){return f?(we(e),p?y(e[0],e[1],g):y(e[0],e[1])):p?y(e,g):y(e)};if(d)r=e;else{if(!(o=Qo(e)))throw ti(Ie(e)+" is not iterable");if(void 0!==(u=o)&&(Et.Array===u||Jo[Yo]===u)){for(i=0,a=Ze(e);a>i;i++)if((c=h(e[i]))&&Re(ri,c))return c;return new ni(!1)}r=function(e,t){var n=arguments.length<2?Qo(e):t;if(Le(n))return we(ke(n,e));throw Zo(Ie(e)+" is not iterable")}(e,o)}for(l=r.next;!(s=ke(l,r)).done;){try{c=h(s.value)}catch(e){ei(r,"throw",e)}if("object"==typeof c&&c&&Re(ri,c))return c}return new ni(!1)},ii=Oe("iterator"),ai=!1;try{var ci=0,li={next:function(){return{done:!!ci++}},return:function(){ai=!0}};li[ii]=function(){return this},Array.from(li,function(){throw 2})}catch(e){}var si,ui,fi,di,pi=V([].slice),yi=E.TypeError,gi=function(e,t){if(e<t)throw yi("Not enough arguments");return e},hi=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),mi="process"==q(E.process),vi=E.setImmediate,bi=E.clearImmediate,Oi=E.process,xi=E.Dispatch,Ei=E.Function,wi=E.MessageChannel,Si=E.String,ji=0,Ai={};try{si=E.location}catch(e){}var Ci=function(e){if(ee(Ai,e)){var t=Ai[e];delete Ai[e],t()}},ki=function(e){return function(){Ci(e)}},Ri=function(e){Ci(e.data)},Ti=function(e){E.postMessage(Si(e),si.protocol+"//"+si.host)};vi&&bi||(vi=function(e){gi(arguments.length,1);var t=S(e)?e:Ei(e),n=pi(arguments,1);return Ai[++ji]=function(){io(t,void 0,n)},ui(ji),ji},bi=function(e){delete Ai[e]},mi?ui=function(e){Oi.nextTick(ki(e))}:xi&&xi.now?ui=function(e){xi.now(ki(e))}:wi&&!hi?(di=(fi=new wi).port2,fi.port1.onmessage=Ri,ui=Ko(di.postMessage,di)):E.addEventListener&&S(E.postMessage)&&!E.importScripts&&si&&"file:"!==si.protocol&&!P(Ti)?(ui=Ti,E.addEventListener("message",Ri,!1)):ui="onreadystatechange"in k("script")?function(e){ut.appendChild(k("script")).onreadystatechange=function(){ut.removeChild(this),Ci(e)}}:function(e){setTimeout(ki(e),0)});var Fi,Pi,Ii,Di,Li,_i,Vi,Mi,Ni={set:vi,clear:bi},qi=/ipad|iphone|ipod/i.test(ce)&&void 0!==E.Pebble,Bi=/web0s(?!.*chrome)/i.test(ce),$i=Ni.set,Wi=E.MutationObserver||E.WebKitMutationObserver,Ui=E.document,zi=E.process,Gi=E.Promise,Hi=(0,Ht.f)(E,"queueMicrotask"),Ki=Hi&&Hi.value;Ki||(Fi=function(){var e,t;for(mi&&(e=zi.domain)&&e.exit();Pi;){t=Pi.fn,Pi=Pi.next;try{t()}catch(e){throw Pi?Di():Ii=void 0,e}}Ii=void 0,e&&e.enter()},hi||mi||Bi||!Wi||!Ui?!qi&&Gi&&Gi.resolve?((Vi=Gi.resolve(void 0)).constructor=Gi,Mi=Ko(Vi.then,Vi),Di=function(){Mi(Fi)}):mi?Di=function(){zi.nextTick(Fi)}:($i=Ko($i,E),Di=function(){$i(Fi)}):(Li=!0,_i=Ui.createTextNode(""),new Wi(Fi).observe(_i,{characterData:!0}),Di=function(){_i.data=Li=!Li}));var Yi=Ki||function(e){var t={fn:e,next:void 0};Ii&&(Ii.next=t),Pi||(Pi=t,Di()),Ii=t},Ji=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Le(t),this.reject=Le(n)},Xi={f:function(e){return new Ji(e)}},Qi=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Zi=function(){this.head=null,this.tail=null};Zi.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ea,ta,na,ra,oa,ia=Zi,aa="object"==typeof window,ca=Ni.set,la=Oe("species"),sa="Promise",ua=Bt.getterFor(sa),fa=Bt.set,da=Bt.getterFor(sa),pa=Uo&&Uo.prototype,ya=Uo,ga=pa,ha=E.TypeError,ma=E.document,va=E.process,ba=Xi.f,Oa=ba,xa=!!(ma&&ma.createEvent&&E.dispatchEvent),Ea=S(E.PromiseRejectionEvent),wa=!1,Sa=dn(sa,function(){var e=Ct(ya),t=e!==String(ya);if(!t&&66===pe)return!0;if(pe>=51&&/native code/.test(e))return!1;var n=new ya(function(e){e(1)}),r=function(e){e(function(){},function(){})};return(n.constructor={})[la]=r,!(wa=n.then(function(){})instanceof r)||!t&&aa&&!Ea}),ja=Sa||!function(e,t){if(!ai)return!1;var n=!1;try{var r={};r[ii]=function(){return{next:function(){return{done:n=!0}}}},ya.all(r).catch(function(){})}catch(e){}return n}(),Aa=function(e){var t;return!(!j(e)||!S(t=e.then))&&t},Ca=function(e,t){var n,r,o,i=t.value,a=1==t.state,c=a?e.ok:e.fail,l=e.resolve,s=e.reject,u=e.domain;try{c?(a||(2===t.rejection&&Pa(t),t.rejection=1),!0===c?n=i:(u&&u.enter(),n=c(i),u&&(u.exit(),o=!0)),n===e.promise?s(ha("Promise-chain cycle")):(r=Aa(n))?ke(r,n,l,s):l(n)):s(i)}catch(e){u&&!o&&u.exit(),s(e)}},ka=function(e,t){e.notified||(e.notified=!0,Yi(function(){for(var n,r=e.reactions;n=r.get();)Ca(n,e);e.notified=!1,t&&!e.rejection&&Ta(e)}))},Ra=function(e,t,n){var r,o;xa?((r=ma.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),E.dispatchEvent(r)):r={promise:t,reason:n},!Ea&&(o=E["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=E.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ta=function(e){ke(ca,E,function(){var t,n=e.facade,r=e.value;if(Fa(e)&&(t=Qi(function(){mi?va.emit("unhandledRejection",r,n):Ra("unhandledrejection",n,r)}),e.rejection=mi||Fa(e)?2:1,t.error))throw t.value})},Fa=function(e){return 1!==e.rejection&&!e.parent},Pa=function(e){ke(ca,E,function(){var t=e.facade;mi?va.emit("rejectionHandled",t):Ra("rejectionhandled",t,e.value)})},Ia=function(e,t,n){return function(r){e(t,r,n)}},Da=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ka(e,!0))},La=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ha("Promise can't be resolved itself");var r=Aa(t);r?Yi(function(){var n={done:!1};try{ke(r,t,Ia(La,n,e),Ia(Da,n,e))}catch(t){Da(n,t,e)}}):(e.value=t,e.state=1,ka(e,!1))}catch(t){Da({done:!1},t,e)}}};if(Sa&&(ya=function(e){!function(e,t){if(Re(ga,e))return e;throw Go("Incorrect invocation")}(this),Le(e),ke(ea,this);var t=ua(this);try{e(Ia(La,t),Ia(Da,t))}catch(e){Da(t,e)}},(ea=function(e){fa(this,{type:sa,done:!1,notified:!1,parent:!1,reactions:new ia,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)Qt(e,r,t[r],void 0);return e}(ga=ya.prototype,{then:function(e,t){var n=da(this),r=ba(Eo(this,ya));return n.parent=!0,r.ok=!S(e)||e,r.fail=S(t)&&t,r.domain=mi?va.domain:void 0,0==n.state?n.reactions.add(r):Yi(function(){Ca(r,n)}),r.promise},catch:function(e){return this.then(void 0,e)}}),ta=function(){var e=new ea,t=ua(e);this.promise=e,this.resolve=Ia(La,t),this.reject=Ia(Da,t)},Xi.f=ba=function(e){return e===ya||e===na?new ta(e):Oa(e)},S(Uo)&&pa!==Object.prototype)){ra=pa.then,wa||(Qt(pa,"then",function(e,t){var n=this;return new ya(function(e,t){ke(ra,n,e,t)}).then(e,t)},{unsafe:!0}),Qt(pa,"catch",ga.catch,{unsafe:!0}));try{delete pa.constructor}catch(e){}Fn&&Fn(pa,ga)}yn({global:!0,wrap:!0,forced:Sa},{Promise:ya}),An(ya,sa,!1),oa=ae(sa),Se&&oa&&!oa[zo]&&(0,Ue.f)(oa,zo,{configurable:!0,get:function(){return this}}),na=ae(sa),yn({target:sa,stat:!0,forced:Sa},{reject:function(e){var t=ba(this);return ke(t.reject,void 0,e),t.promise}}),yn({target:sa,stat:!0,forced:Sa},{resolve:function(e){return function(e,t){if(we(e),j(t)&&t.constructor===e)return t;var n=Xi.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),yn({target:sa,stat:!0,forced:ja},{all:function(e){var t=this,n=ba(t),r=n.resolve,o=n.reject,i=Qi(function(){var n=Le(t.resolve),i=[],a=0,c=1;oi(e,function(e){var l=a++,s=!1;c++,ke(n,t,e).then(function(e){s||(s=!0,i[l]=e,--c||r(i))},o)}),--c||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=ba(t),r=n.reject,o=Qi(function(){var o=Le(t.resolve);oi(e,function(e){ke(o,t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});var _a=V(1..valueOf),Va=E.RangeError,Ma=E.RangeError,Na=E.String,qa=Math.floor,Ba=V(function(e){var t=Dr(z(this)),n="",r=He(e);if(r<0||Infinity==r)throw Va("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}),$a=V("".slice),Wa=V(1..toFixed),Ua=function(e,t,n){return 0===t?n:t%2==1?Ua(e,t-1,n*e):Ua(e*e,t/2,n)},za=function(e,t,n){for(var r=-1,o=n;++r<6;)e[r]=(o+=t*e[r])%1e7,o=qa(o/1e7)},Ga=function(e,t){for(var n=6,r=0;--n>=0;)e[n]=qa((r+=e[n])/t),r=r%t*1e7},Ha=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=Na(e[t]);n=""===n?r:n+Ba("0",7-r.length)+r}return n},Ka=P(function(){return"0.000"!==Wa(8e-5,3)||"1"!==Wa(.9,0)||"1.25"!==Wa(1.255,2)||"1000000000000000128"!==Wa(0xde0b6b3a7640080,0)})||!P(function(){Wa({})});yn({target:"Number",proto:!0,forced:Ka},{toFixed:function(e){var t,n,r,o,i=_a(this),a=He(e),c=[0,0,0,0,0,0],l="",s="0";if(a<0||a>20)throw Ma("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return Na(i);if(i<0&&(l="-",i=-i),i>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*Ua(2,69,1))-69,n=t<0?i*Ua(2,-t,1):i/Ua(2,t,1),n*=4503599627370496,(t=52-t)>0){for(za(c,0,n),r=a;r>=7;)za(c,1e7,0),r-=7;for(za(c,Ua(10,r,1),0),r=t-1;r>=23;)Ga(c,1<<23),r-=23;Ga(c,1<<r),za(c,1,1),Ga(c,2),s=Ha(c)}else za(c,0,n),za(c,1<<-t,0),s=Ha(c)+Ba("0",a);return a>0?l+((o=s.length)<=a?"0."+Ba("0",a-o)+s:$a(s,0,o-a)+"."+$a(s,o-a)):l+s}});var Ya,Ja=Math.floor,Xa=function(e,t){var n=e.length,r=Ja(n/2);return n<8?Qa(e,t):Za(e,Xa(Fo(e,0,r),t),Xa(Fo(e,r),t),t)},Qa=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},Za=function(e,t,n,r){for(var o=t.length,i=n.length,a=0,c=0;a<o||c<i;)e[a+c]=a<o&&c<i?r(t[a],n[c])<=0?t[a++]:n[c++]:a<o?t[a++]:n[c++];return e},ec=Xa,tc=ce.match(/firefox\/(\d+)/i),nc=!!tc&&+tc[1],rc=/MSIE|Trident/.test(ce),oc=ce.match(/AppleWebKit\/(\d+)\./),ic=!!oc&&+oc[1],ac=[],cc=V(ac.sort),lc=V(ac.push),sc=P(function(){ac.sort(void 0)}),uc=P(function(){ac.sort(null)}),fc=!!(Ya=[].sort)&&P(function(){Ya.call(null,function(){return 1},1)}),dc=!P(function(){if(pe)return pe<70;if(!(nc&&nc>3)){if(rc)return!0;if(ic)return ic<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)ac.push({k:t+r,v:n})}for(ac.sort(function(e,t){return t.v-e.v}),r=0;r<ac.length;r++)t=ac[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}});yn({target:"Array",proto:!0,forced:sc||!uc||!fc||!dc},{sort:function(e){void 0!==e&&Le(e);var t=Q(this);if(dc)return void 0===e?cc(t):cc(t,e);var n,r,o=[],i=Ze(t);for(r=0;r<i;r++)r in t&&lc(o,t[r]);for(ec(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Dr(t)>Dr(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<i;)delete t[r++];return t}});var pc,yc=E.TypeError,gc=function(e){if(so(e))throw yc("The method doesn't accept regular expressions");return e},hc=Oe("match"),mc=Ht.f,vc=V("".endsWith),bc=V("".slice),Oc=Math.min,xc=function(e){var t=/./;try{"/./".endsWith(t)}catch(e){try{return t[hc]=!1,"/./".endsWith(t)}catch(e){}}return!1}(),Ec=!(xc||(pc=mc(String.prototype,"endsWith"),!pc||pc.writable));yn({target:"String",proto:!0,forced:!Ec&&!xc},{endsWith:function(e){var t=Dr(z(this));gc(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:Oc(Qe(n),r),i=Dr(e);return vc?vc(t,i,o):bc(t,o-i.length,o)===i}});const wc=(e,t,n)=>n&&Array.isArray(e)?"number"===t?e.map(e=>Number(e)):"string"===t?e.map(e=>String(e)):"boolean"===t?e.map(e=>Boolean(e)):"date"===t?e.map(e=>new Date(e)):e:"number"===t?Number(e):"string"===t?String(e):"boolean"===t?Boolean(e):"date"===t?new Date(e):e,Sc=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,jc={};let Ac,Cc,kc=0;const Rc={},Tc=r=>{let{config:i,data:a,render:c,fields:m,onChange:v,isVisible:b,isDisabled:O,id:x,onValidation:E,parentRunValidation:w,validateOn:S,throttleWait:j,customEvents:A,enableUndo:C,undoMaxDepth:k=10,customRuleHandlers:R}=r;const[T,F]=t({}),P=Object.assign({},a);g(P,T);const[I]=t("form-"+(x||"noid")+"-"+ +new Date),[D,L]=t(!1),[_,V]=t({}),[M,N]=t(!1),[q,B]=t([]),[$,W]=t(0),[U,z]=t(!1),[G,H]=t(!1),[K,Y]=t({}),[J,X]=t({}),[Q,Z]=t(),[ee,te]=t({}),[ne,re]=t(!1),[oe,ie]=t(),[ae,ce]=t(),[le,se]=t([]),ue=((e,t,n,r,i)=>{let a="function"==typeof e.fields?e.fields(t,n,r):[];const c=o=>"string"==typeof o&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[o]?e.fieldConfigs[o](t,n,r):"function"==typeof o?o(t,n,r):o;return a=a.map(e=>("object"!=typeof e||"group"!==e.type&&"collection"!==e.type||!Array.isArray(e.fields)||(e.fields=e.fields.map(e=>c(e))),c(e))),i.forEach(e=>{const r=l(a,e.path);if(Array.isArray(r)){if("add"===e.action&&r.push(e.fields(t,n)),"remove"===e.action){const i=e.fields(t,n),a=o(r,{id:i.id});a>-1&&r.splice(a,1)}p(a,e.path,r)}}),a})(i,P,Q,T,le),fe=((e,t)=>{const n=[];return function r(o,i){void 0===o&&(o="");let a=[o?l(e,o):e],c=[];Array.isArray(a[0])||(c=Object.keys(a[0]),a=Object.values(a[0])),a.forEach((e,a)=>{const s=void 0!==c[a]?c[a]:void 0;Array.isArray(e)&&e.forEach((e,a)=>{const c=i?i+"."+e.id:e.id,u=l(t,c),f=l(t,i);if((s&&f&&f.__typename===s||!s)&&n.push({path:c,config:e,data:u}),"collection"===e.type){const n=i?l(t,i+"."+e.id):t[e.id];n&&Array.isArray(n)&&n.forEach((t,n)=>{r(o+"["+a+"].fields",i?i+"."+e.id+"["+n+"]":e.id+"["+n+"]")})}else"group"===e.type&&r(o+"["+a+"].fields",c)})})}(),n})(ue,P);n(()=>{if(a&&!M){Sc()&&window.stagesLogging("Set initial data",I),fe.forEach(e=>{void 0!==e.config.defaultValue&&void 0===l(a,e.path)&&(p(a,e.path,e.config.defaultValue),p(P,e.path,e.config.defaultValue))});const e=h(a);N(JSON.parse(e))}},[a]),n(()=>{Sc()&&window.stagesLogging({id:I,data:a,errors:ee,isDirty:D,focusedField:oe,lastFocusedField:ae,dirtyFields:_,loading:ne,parsedFieldConfig:ue})},[a,ee,D,oe,ae,_,ne]);const de=e=>"collection"===e||"subform"===e||"group"===e||"config"===e,pe=(e,t,n,r)=>{if(!m[t.type])return!0;const o=l(n,e),i=!de(t.type)&&m[t.type].isValid(o,t);return!de(t.type)&&t.customValidation?t.customValidation({data:o,allData:n,interfaceState:T,fieldConfig:t,isValid:i,fieldHasFocus:!(!oe||oe!==e),fieldIsDirty:void 0!==_[e],triggeringEvent:r}):i},ye=(e,t,n,r,o)=>{const i=s(fe,{path:e}).config;Sc()&&window.stagesLogging('Validate field "'+e+'"',I);const a=pe(e,i,n,t),c=l(n,e);return r[e]&&delete r[e],de(i.type)||!0===a?"collection"===i.type&&i.isRequired&&(!c||0===c.length||1===c.length&&0===Object.keys(c[0]).length)?(o||(o=e),r[e]={value:c,field:i}):"collection"===i.type&&(Array.isArray(i.fields)?i.fields.forEach(o=>{c&&c.forEach((a,s)=>{if(!(i.isRequired||a&&0!==Object.keys(a).length))return;const u=pe(o,a,t);if(m[o.type]&&!0!==u)r[e]={value:c,subField:o,errorCode:!1!==u?u:void 0};else if(m[o.type]&&o.isUnique){let t=l(n,e,[]).filter(e=>void 0!==e[o.id]).map(e=>e[o.id]);[...new Set(t)].length!==t.length&&(r[e]={value:c,subField:o,errorCode:"notUnique"})}})}):c&&c.forEach((n,o)=>{(i.isRequired||n&&0!==Object.keys(n).length)&&i.fields[n.__typename]&&i.fields[n.__typename].forEach(o=>{const i=pe(o,n,t);m[o.type]&&!0!==i&&(r[e]={value:c,subField:o,errorCode:!1!==i?i:void 0})})})):(o||(o=e),r[e]={value:c,field:i,errorCode:!1!==a?a:void 0}),"collection"===i.type&&i.uniqEntries&&c&&f(c,(e,t)=>h(e)===h(t)).length!==c.length&&(r[e]={value:c,field:i}),"collection"===i.type&&i.rules&&"object"==typeof i.rules&&c&&Object.keys(i.rules).forEach(t=>{const n=i.rules[t];Object.keys(n).forEach(o=>{const a=n[o],s=t.indexOf(",")>-1?t.split(","):[t],u=o.indexOf(",")>-1?o.split(","):[o],f=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);const n=[];return e.forEach(e=>{t.forEach(t=>{n.push([e,t])})}),n}(s,u);let p=!0;if(a.maxCount&&"number"==typeof a.maxCount&&f.forEach(e=>{let t=0;c.forEach(n=>l(n,e[0])===e[1]?t++:void 0),t>a.maxCount&&(p=!1)}),a.minCount&&"number"==typeof a.minCount&&f.forEach(e=>{let t=0;c.forEach(n=>l(n,e[0])===e[1]?t++:void 0),t<a.minCount&&(p=!1)}),a.exactCount&&"number"==typeof a.exactCount&&f.forEach(e=>{let t=0;c.forEach(n=>l(n,e[0])===e[1]?t++:void 0),t!==a.exactCount&&(p=!1)}),a.sameCountAs&&"string"==typeof a.sameCountAs&&f.forEach(e=>{let t=0,n=0;c.forEach(r=>{l(r,e[0])===e[1]&&t++,l(r,e[0])===a.sameCountAs&&n++}),t!==n&&(p=!1)}),a.differentCountAs&&"string"==typeof a.differentCountAs&&f.forEach(e=>{let t=0,n=0;c.forEach(r=>{l(r,e[0])===e[1]&&t++,l(r,e[0])===a.differentCountAs&&n++}),t===n&&(p=!1)}),(a.sameSumAs&&"string"==typeof a.sameSumAs||a.differentSumAs&&"string"==typeof a.differentSumAs||a.biggerSumAs&&"string"==typeof a.biggerSumAs||a.smallerSumAs&&"string"==typeof a.smallerSumAs)&&f.forEach(e=>{let t=0,n=0;c.forEach(r=>{const o=Number(l(r,e[0])),i=Number(l(r,a.sameSumAs||a.differentSumAs||a.biggerSumAs||a.smallerSumAs));isNaN(o)||(t+=o),isNaN(i)||(n+=i)}),a.sameSumAs&&t!==n&&(p=!1),a.differentSumAs&&t===n&&(p=!1),a.biggerSumAs&&t<=n&&(p=!1),a.smallerSumAs&&t>=n&&(p=!1)}),a.isUnique&&s.length>0){const e=[];let t=!1;c.forEach(n=>{const r=s.map(e=>l(n,e));e.forEach(e=>{d(r,e)&&(t=!0)}),e.push(r)}),t&&(p=!1)}a.disallow&&f.forEach(e=>{let t=!1,n=!1;c.forEach(r=>{l(r,e[0])===e[1]&&(n=!0),Array.isArray(a.disallow)?a.disallow.forEach(n=>{l(r,e[0])===n&&(t=!0)}):l(r,e[0])===a.disallow&&(t=!0)}),n&&t&&(p=!1)}),a.disallow&&f.forEach(e=>{let t=!1,n=!1;c.forEach(r=>{l(r,e[0])===e[1]&&(n=!0),Array.isArray(a.disallow)?a.disallow.forEach(n=>{l(r,e[0])===n&&(t=!0)}):l(r,e[0])===a.disallow&&(t=!0)}),n&&!t&&(p=!1)}),p&&"object"==typeof R&&Object.keys(R).forEach(e=>{void 0!==a[e]&&"function"==typeof R[e]&&(R[e]({fieldValueCombos:f,fieldValidationData:c,valueRules:a,get:l})||(p=!1))}),p||(r[e]={value:c,field:i,errorCode:a.errorCode||"invalidRule"})})}),{errors:r,firstErrorField:o}},ge=(e,t)=>{let n,r={};if(t||(t=P),fe.forEach(e=>{if(!m[e.config.type]&&!de(e.config.type))return;const o=ye(e.path,"action",t,r,n);r=o.errors,n=o.firstErrorField}),n&&b&&e){const e=document.getElementById(n);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return r};n(()=>{if("function"==typeof E&&w){Sc()&&window.stagesLogging("Get errors on validation",I);let e=ge(!0);te(e),E(e)}},[E]);const he=(e,t)=>{Sc()&&window.stagesLogging('Get sub form errors for sub id "'+e+'"',I),ge(!0),t&&Object.keys(t).length>0&&(ee[e]=t)},me=function(e,t,n){try{const r=function(){if(t.loader&&"function"==typeof t.loader){function r(){t.enableCaching&&((e,t)=>{Sc()&&window.stagesLogging('Update options cache for "'+e+'"',I),X(n=>Object.assign({},n,{[e]:t}))})(i,a),s===c&&(((e,t)=>{Sc()&&window.stagesLogging('Update options loaded for "'+e+'"',I),Y(n=>Object.assign({},n,{[e]:t}))})(e,a),t.onOptionsChange&&"function"==typeof t.onOptionsChange&&t.onOptionsChange(a,n,we))}const o={};let i,a;const c="number"==typeof jc[e]?jc[e]+1:0;let s=c;jc[e]=c,Sc()&&window.stagesLogging('Create dynamic options for field "'+e+'"',I),t.enableCaching&&(t.watchFields.forEach(e=>{const t=l(n,e);t&&(o[e]=t)}),i=e+"-"+h(o));const u=function(){if(!t.enableCaching||!J[i])return Promise.resolve(t.loader(n,we)).then(function(t){a=t,s=jc[e]});a=J[i]}();return u&&u.then?u.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},ve=(e,t,n,r)=>{let o;try{o=h({newData:e,errors:Object.keys(t),id:n,fieldKey:r})}catch(e){}o!==Cc&&(v((e=>{const t={},n=Object.assign({},e);return fe.forEach(r=>{if(r.config.isInterfaceState){const o=l(e,r.path);void 0!==o&&(p(t,r.path,o),y(n,r.path))}}),F(t),n})(e),t,n,r),Cc=o)};n(()=>{let e=Object.assign({},P);if(Sc()&&window.stagesLogging('Is visible change to "'+(b?"visible":"invisible")+'"',I),fe.forEach(t=>{const n=t.config;let r=l(e,t.path);if("collection"===n.type&&n.init){const o=n.min?Number(n.min):1;r&&0!==r.length||(r=[]);for(let t=r.length;t<o;t++)r.push("string"==typeof n.init?"function"==typeof n.setInitialData?n.setInitialData(r,e,n.init):{__typename:n.init}:"function"==typeof n.setInitialData?n.setInitialData(r,e):{});p(e,t.path,r)}}),e=be(e),"function"==typeof i.asyncDataLoader&&b&&!G)try{return re(!0),Promise.resolve(i.asyncDataLoader()).then(function(e){Z(e),H(!0),re(!1)})}catch(e){Promise.reject(e)}b&&(Array.isArray(fe)&&fe.forEach(t=>{t.config.dynamicOptions&&t.config.dynamicOptions.events&&t.config.dynamicOptions.events.indexOf("init")>-1&&me(t.path,t.config.dynamicOptions,e)}),0===$&&0===q.length&&B([h({data:e,isDirty:D,dirtyFields:_,errors:ee})])),ve(e,ge(),x)},[b]);const be=e=>{const t=Object.assign({},e);return fe.forEach(n=>{if("function"==typeof n.config.computedValue){const r=l(P,n.path.split(".").slice(0,-1).join(".")),o=n.config.computedValue(e,r,T);p(t,n.path,o)}}),t},Oe=e=>s(fe,{path:e}).config,xe=(e,t)=>{const n=[];return"object"==typeof A&&Object.keys(A).forEach(r=>{"function"==typeof A[r]&&A[r]({data:t,dirtyFields:_,optionsLoaded:K,asyncData:Q,errors:ee,focusedField:oe,triggeringEvent:e})&&n.push(r)}),n},Ee=e=>Array.isArray(e)&&1===e.length?e[0]:e,we=function e(t,n,r,o){void 0===o&&(o=!1);let i,a=!1;const c=+new Date;(0===kc||c-kc<Number(j||400))&&(Ac&&clearTimeout(Ac),Ac=setTimeout(()=>e(t,n,r,!0),100),a=!0),o||(kc=c);const s=Oe(t);let u=Object.assign({},r||P),f="function"==typeof s.filter?s.filter(n):n;s.cast&&"function"==typeof s.cast.data&&(f=s.cast.data(f)),s.cast&&"string"==typeof s.cast.data&&(f=wc(f,s.cast.data)),s.cast&&Array.isArray(s.cast.data)&&(f=wc(f,s.cast.data[0],!0)),Sc()&&window.stagesLogging('Handle change for field "'+t+'"',I),p(u,t,f||void 0),u=be(u);const y={data:l(u,t),fieldIsDirty:!!_[t],fieldConfig:s,fieldHasFocus:!(!oe||oe!==t)},g=xe("change",u);if(!s.validateOn&&Array.isArray(S)&&g.some(e=>S.indexOf(e)>-1)||s.validateOn&&Array.isArray(s.validateOn)&&g.some(e=>s.validateOn.indexOf(e)>-1)){const e=ye(t,Ee(g),u,ee);i=Object.assign({},ee,e.errors),te(i)}else if(!s.validateOn&&Array.isArray(S)&&S.indexOf("change")>-1||s.validateOn&&Array.isArray(s.validateOn)&&s.validateOn.indexOf("change")>-1||!s.validateOn&&Array.isArray(S)&&S.indexOf("throttledChange")>-1&&!a||s.validateOn&&Array.isArray(s.validateOn)&&s.validateOn.indexOf("throttledChange")>-1&&!a||!s.validateOn&&"function"==typeof S&&S(y).indexOf("change")>-1||s.validateOn&&"function"==typeof s.validateOn&&s.validateOn(y).indexOf("change")>-1||!s.validateOn&&"function"==typeof S&&S(y).indexOf("throttledChange")>-1&&!a||s.validateOn&&"function"==typeof s.validateOn&&s.validateOn(y).indexOf("throttledChange")>-1&&!a){const e=ye(t,"change",u,ee);i=Object.assign({},ee,e.errors),te(i)}if(M&&(d(l(u,t),l(M,t))?void 0!==_[t]&&delete _[t]:_[t]={oldData:l(M,t),newData:l(u,t)},L(Object.keys(_).length>0),V(_)),s.clearFields&&Array.isArray(s.clearFields)){const e=Object.assign({},K);s.clearFields.forEach(t=>{p(u,t,void 0),delete e[t]}),Y(e)}Array.isArray(fe)&&fe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("change")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t)>-1&&(!s.dynamicOptions||s.dynamicOptions&&K[e.path]&&K[e.path].indexOf(l(u,t))>-1||!K[e.path])&&me(e.path,e.config.dynamicOptions,u)}),ve(u,i||ee,x,t)};return!1===b?null:c?c({actionProps:{handleActionClick:(e,t,n)=>{Sc()&&window.stagesLogging("Handle action click",I),n&&(ve(M,ge(),x),V({}),L(!1));const r=xe("action",P);if(Array.isArray(S)&&S.indexOf("action")>-1||Array.isArray(S)&&r.some(e=>S.indexOf(e)>-1)){t&&(z(!0),setTimeout(()=>z(!1),0));let e=t?ge(!0):{};te(e)}setTimeout(()=>{0===Object.keys(ee).length&&e()},0)},handleUndo:()=>{if(C&&$>0){const e=$-1,t=JSON.parse(q[e]);W(e),te(t.errors),L(t.isDirty),V(t.dirtyFields),ve(t.data,t.errors,x)}},handleRedo:()=>{if(C&&$<q.length-1){const e=$+1,t=JSON.parse(q[e]);W(e),te(t.errors),L(t.isDirty),V(t.dirtyFields),ve(t.data,t.errors,x)}},isDisabled:O,isDirty:D,focusedField:oe,lastFocusedField:ae,dirtyFields:_,silentlyGetValidationErrors:()=>ge(!1)},fieldProps:{fields:(()=>{const t={};return fe.forEach(n=>{const r=((t,n,r)=>{if(!m[t.type]&&"subform"!==t.type||"function"==typeof t.isRendered&&!t.isRendered(r,n,P))return null;const i=Object.assign({},t);if(i.id=r,K[r])i.options=K[r];else if("function"==typeof i.options)i.options=i.options(r,n,P);else if("object"==typeof i.computedOptions){let e=l(a,i.computedOptions.source,[]),n=l(P,r);"function"==typeof i.computedOptions.filter&&(e=e.filter(i.computedOptions.filter)),"function"==typeof i.computedOptions.sort&&(e=e.sort(i.computedOptions.sort)),"function"==typeof i.computedOptions.map&&(e=e.map(i.computedOptions.map)),i.computedOptions.initWith&&Array.isArray(i.computedOptions.initWith)&&(e=i.computedOptions.initWith.concat(e)),t.isUnique&&(e=e.map(e=>{if(""===e.value)return e;const i=r.substring(0,r.lastIndexOf("["));let c=l(a,i,[]);return o(c,{[t.id]:e.value})>-1&&e.value!==n?Object.assign({},e,{disabled:!0}):e})),i.options=e,s(e,{value:n})||(i.value="",p(P,r,""))}return delete i.computedValue,delete i.computedOptions,delete i.filter,delete i.clearFields,delete i.dynamicOptions,delete i.isRendered,delete i.defaultValue,i.placeholder&&Array.isArray(i.placeholder)&&i.placeholder.length>1&&(void 0===Rc[r]&&(Rc[r]=i.placeholder[Math.floor(Math.random()*i.placeholder.length)]),i.placeholder=Rc[r]),"subform"!==t.type?/*#__PURE__*/e.createElement(m[t.type].component,Object.assign({key:r,value:(c=n,t.cast&&"function"==typeof t.cast.field?t.cast.field(c):t.cast&&"string"==typeof t.cast.field?wc(c,t.cast.field):t.cast&&Array.isArray(t.cast.field)?wc(c,t.cast.field[0],!0):c),initialValue:l(M,r),error:ee[r],isDirty:!!_[r],isDisabled:O||t.isDisabled,onChange:e=>we(r,e),onFocus:()=>{return ie(e=r),void ce(e);var e},onBlur:()=>(e=>{ie();const t=Oe(e),n=Object.assign({},P);kc=0,Sc()&&window.stagesLogging('Handle blur for field "'+e+'"',I),t.cleanUp&&"function"==typeof t.cleanUp&&l(n,e)&&(p(n,e,t.cleanUp(l(n,e))),ve(n,ee,x,e)),"number"==typeof t.precision&&(p(n,e,Number(l(n,e)).toFixed(t.precision)),ve(n,ee,x,e));const r={data:l(n,e),fieldIsDirty:!!_[e],fieldConfig:t,fieldHasFocus:!(!oe||oe!==e)},o=xe("blur",n);if(!t.validateOn&&Array.isArray(S)&&o.some(e=>S.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&o.some(e=>t.validateOn.indexOf(e)>-1)){const t=ye(e,Ee(o),n,ee);te(Object.assign({},ee,t.errors)),ve(n,t.errors,x,e)}else if(!t.validateOn&&Array.isArray(S)&&S.indexOf("blur")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("blur")>-1||!t.validateOn&&"function"==typeof S&&S(r).indexOf("blur")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(r).indexOf("blur")>-1){const t=ye(e,"blur",n,ee);te(Object.assign({},ee,t.errors)),ve(n,t.errors,x,e)}Array.isArray(fe)&&fe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("blur")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t.id)>-1&&me(e.config.id,e.config.dynamicOptions,n)}),(e=>{if(C){const t=[...q];t.length=$+1,t.push(h({data:e,isDirty:D,dirtyFields:_,errors:ee})),t.length>k&&t.shift(),B(t),W(t.length-1)}})(n)})(r)},i)):/*#__PURE__*/e.createElement(Tc,{config:t.config,render:n=>{let{fieldProps:r}=n;/*#__PURE__*/return e.createElement(t.render,r)},fields:m,id:r,onChange:(e,t)=>we(r,e),onValidation:e=>he(r,e),parentRunValidation:U,data:P&&l(P,r),isVisible:b,isDisabled:O,validateOn:S});var c})(n.config,n.data,n.path);r&&p(t,n.path,r)}),t})(),onCollectionAction:(e,t,n,r)=>{const o=Object.assign({},P),i=Oe(e),a=i&&i.min?Number(i.min):0,c=i&&i.max?Number(i.max):99999999999999;let s,f=l(o,e,[]);if(Sc()&&window.stagesLogging('On collection action "'+e+'"',I),"add"===t&&("string"==typeof n&&i.fields[n]?c>f.length&&f.push("function"==typeof i.setInitialData?i.setInitialData(f,o,n):{__typename:n}):c>f.length&&f.push("function"==typeof i.setInitialData?i.setInitialData(f,o):{})),"remove"===t&&a<f.length&&f.splice(n,1),"move"===t&&n>-1&&r>-1){const[e]=f.splice(n,1);f.splice(r,0,e)}"sort"===t&&f.length>0&&n&&(f=u(f,n)),"duplicate"===t&&n>-1&&f.splice(n+1,0,Object.assign({},f[n])),p(o,e,f),S.indexOf("collectionAction")>-1&&(s=ge(),te(s)),ve(o,s||ge(),x,e)},modifyConfig:(e,t,n)=>{if(i.fieldConfigs&&"function"==typeof i.fieldConfigs[t]){const r=e.split(".");let a="";r.forEach(e=>{const t=a?l(ue,a):ue;if(e.endsWith("]")){const n=e.split("["),r=o(t,{id:n[0]});r>-1&&(a+="["+r+"].fields")}else{const n=o(t,{id:e});n>-1&&(a+="["+n+"].fields")}}),""!==a&&(le.push({fields:i.fieldConfigs[t],path:a,action:n}),se([...le]))}},data:a,interfaceState:T,errors:ee,asyncData:Q,isDirty:D,focusedField:oe,lastFocusedField:ae,dirtyFields:_},loading:ne}):null};Tc.propTypes={config:Er.object.isRequired,data:Er.object,render:Er.oneOfType([Er.node,Er.func]).isRequired,fields:Er.object.isRequired,onChange:Er.func,isVisible:Er.bool,isDisabled:Er.bool,id:Er.oneOfType([Er.string,Er.number]).isRequired,onValidation:Er.func,parentRunValidation:Er.bool,validateOn:Er.array,customRuleHandlers:Er.object},Tc.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"],customRuleHandlers:{}};const Fc=t=>{let{config:n,handleActionClick:r,isDisabled:o}=t;/*#__PURE__*/return e.createElement(e.Fragment,null,n.map((t,n)=>/*#__PURE__*/e.createElement("button",{type:"button",onClick:()=>r(t.onClick,t.validate),key:"action-"+n,disabled:o},"primary"===t.type?/*#__PURE__*/e.createElement("strong",null,t.title):t.title)))};function Pc(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}const Ic=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Dc=t=>{let{id:n,label:r,value:o,onChange:i,onBlur:a,onFocus:c,error:l,placeholder:s,isRequired:u,isDisabled:f,prefix:d,suffix:p,secondaryText:y,type:g,errorRenderer:h}=t;return Pc(t,Ic),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,u?" *":""):null,/*#__PURE__*/e.createElement("div",null,d?/*#__PURE__*/e.createElement("span",null,d):null,/*#__PURE__*/e.createElement("input",{name:n,value:o||"",placeholder:s,type:g||"text",disabled:!!f,required:!!u,onChange:e=>{"function"==typeof i&&i(e.target.value)},onFocus:e=>{"function"==typeof c&&c()},onBlur:e=>{"function"==typeof a&&a()}}),p?/*#__PURE__*/e.createElement("span",null,p):null),y?/*#__PURE__*/e.createElement("div",null,y):null,l?h?h(l):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},Lc=(e,t)=>!t.isRequired||""!==e&&void 0!==e,_c=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Vc=["id","label","value","options","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Mc=["id","label","value","options","onChange","onBlur","onFocus","error","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Nc=["id","label","error","isRequired","secondaryText","errorRenderer"],qc={text:{component:Dc,isValid:Lc},number:{component:Dc,isValid:Lc},email:{component:Dc,isValid:Lc},password:{component:Dc,isValid:Lc},tel:{component:Dc,isValid:Lc},time:{component:Dc,isValid:Lc},date:{component:Dc,isValid:Lc},checkbox:{component:t=>{let{id:n,label:r,value:o,onChange:i,onBlur:a,onFocus:c,error:l,placeholder:s,isRequired:u,isDisabled:f,prefix:d,suffix:p,secondaryText:y,type:g,errorRenderer:h}=t;return Pc(t,_c),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,u?" *":""):null,/*#__PURE__*/e.createElement("div",null,d?/*#__PURE__*/e.createElement("span",null,d):null,/*#__PURE__*/e.createElement("input",{name:n,value:"1",placeholder:s,type:g,disabled:!!f,required:!!u,checked:!!o,onChange:()=>{},onClick:e=>{"function"==typeof i&&i(!!e.target.checked)},onBlur:e=>{"function"==typeof a&&a()},onFocus:e=>{"function"==typeof c&&c()}}),p?/*#__PURE__*/e.createElement("span",null,p):null),y?/*#__PURE__*/e.createElement("div",null,y):null,l?h?h(l):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:t=>{let{id:n,label:r,value:o,options:i,onChange:a,onBlur:c,onFocus:l,error:s,placeholder:u,isRequired:f,isDisabled:d,prefix:p,suffix:y,secondaryText:g,errorRenderer:h}=t;return Pc(t,Vc),/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,f?" *":""):null,/*#__PURE__*/e.createElement("div",null,p?/*#__PURE__*/e.createElement("span",null,p):null,/*#__PURE__*/e.createElement("select",{name:n,value:void 0===o?"":o,placeholder:u,disabled:!!d,required:!!f,onChange:e=>{"function"==typeof a&&a(e.target.value)},onBlur:e=>{"function"==typeof c&&c()},onFocus:e=>{"function"==typeof l&&l()}},i.map(t=>/*#__PURE__*/e.createElement("option",{value:t.value,key:t.value,disabled:!!t.disabled||null},t.text))),y?/*#__PURE__*/e.createElement("span",null,y):null),g?/*#__PURE__*/e.createElement("div",null,g):null,s?h?h(s):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:t=>{let{id:n,label:o,value:i,options:a,onChange:c,onBlur:l,onFocus:s,error:u,isRequired:f,isDisabled:d,prefix:p,suffix:y,secondaryText:g,errorRenderer:h}=t;return Pc(t,Mc),/*#__PURE__*/e.createElement("div",{id:n},o?/*#__PURE__*/e.createElement("label",null,o,f?" *":""):null,/*#__PURE__*/e.createElement("div",null,p?/*#__PURE__*/e.createElement("span",null,p):null,a.map(t=>/*#__PURE__*/e.createElement(r,{key:n+"-"+t.value},/*#__PURE__*/e.createElement("input",{type:"radio",name:n,id:n+"-"+t.value,value:t.value,checked:i===t.value,disabled:!!d,onChange:()=>{},onClick:e=>{"function"==typeof c&&c(t.value)},onBlur:e=>{"function"==typeof l&&l()},onFocus:e=>{"function"==typeof s&&s()}}),/*#__PURE__*/e.createElement("label",{htmlFor:n+"-"+t.value},t.text)," ")),y?/*#__PURE__*/e.createElement("span",null,y):null),g?/*#__PURE__*/e.createElement("div",null,g):null,u?h?h(u):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:t=>{let{id:n,label:r,error:o,isRequired:i,secondaryText:a,errorRenderer:c}=t;return Pc(t,Nc),r||a||o?/*#__PURE__*/e.createElement("div",{id:n},r?/*#__PURE__*/e.createElement("label",{htmlFor:n},r,i?" *":""):null,a?/*#__PURE__*/e.createElement("div",null,a):null,o?c?c(o):/*#__PURE__*/e.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null):null},isValid:()=>!0}};export{Fc as Actions,Wo as Debugger,Tc as Form,qo as HashRouter,Bo as Navigation,$o as Progression,Sr as Stages,qc as plainFields};
//# sourceMappingURL=lib.module.js.map

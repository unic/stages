var e=require("lodash/get");require("core-js/modules/es.object.assign.js"),require("core-js/modules/web.dom-collections.iterator.js");var t=require("react"),a=require("lodash/findindex");require("core-js/modules/es.json.stringify.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js");var i=require("json-beautify");require("core-js/modules/es.array.reverse.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.number.to-fixed.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.regexp.constructor.js"),require("core-js/modules/es.regexp.test.js"),require("core-js/modules/es.string.ends-with.js"),require("core-js/modules/es.string.starts-with.js");var n=require("lodash/find"),o=require("lodash/sortby"),l=require("lodash/uniqwith"),r=require("lodash/isequal"),s=require("lodash/set"),d=require("lodash/unset"),f=require("lodash/merge"),c=require("fast-json-stable-stringify");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=/*#__PURE__*/u(e),y=/*#__PURE__*/u(t),g=/*#__PURE__*/u(a),h=/*#__PURE__*/u(i),m=/*#__PURE__*/u(n),b=/*#__PURE__*/u(o),v=/*#__PURE__*/u(l),O=/*#__PURE__*/u(r),E=/*#__PURE__*/u(s),x=/*#__PURE__*/u(d),j=/*#__PURE__*/u(f),S=/*#__PURE__*/u(c);function w(e){var t={exports:{}};return e(t,t.exports),t.exports}var A="function"==typeof Symbol&&Symbol.for,C=A?Symbol.for("react.element"):60103,D=A?Symbol.for("react.portal"):60106,k=A?Symbol.for("react.fragment"):60107,F=A?Symbol.for("react.strict_mode"):60108,V=A?Symbol.for("react.profiler"):60114,q=A?Symbol.for("react.provider"):60109,R=A?Symbol.for("react.context"):60110,P=A?Symbol.for("react.async_mode"):60111,T=A?Symbol.for("react.concurrent_mode"):60111,I=A?Symbol.for("react.forward_ref"):60112,L=A?Symbol.for("react.suspense"):60113,N=A?Symbol.for("react.suspense_list"):60120,W=A?Symbol.for("react.memo"):60115,z=A?Symbol.for("react.lazy"):60116,$=A?Symbol.for("react.block"):60121,_=A?Symbol.for("react.fundamental"):60117,H=A?Symbol.for("react.responder"):60118,B=A?Symbol.for("react.scope"):60119;function U(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case C:switch(e=e.type){case P:case T:case k:case V:case F:case L:return e;default:switch(e=e&&e.$$typeof){case R:case I:case z:case W:case q:return e;default:return t}}case D:return t}}}function M(e){return U(e)===T}var J={AsyncMode:P,ConcurrentMode:T,ContextConsumer:R,ContextProvider:q,Element:C,ForwardRef:I,Fragment:k,Lazy:z,Memo:W,Portal:D,Profiler:V,StrictMode:F,Suspense:L,isAsyncMode:function(e){return M(e)||U(e)===P},isConcurrentMode:M,isContextConsumer:function(e){return U(e)===R},isContextProvider:function(e){return U(e)===q},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===C},isForwardRef:function(e){return U(e)===I},isFragment:function(e){return U(e)===k},isLazy:function(e){return U(e)===z},isMemo:function(e){return U(e)===W},isPortal:function(e){return U(e)===D},isProfiler:function(e){return U(e)===V},isStrictMode:function(e){return U(e)===F},isSuspense:function(e){return U(e)===L},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===k||e===T||e===V||e===F||e===L||e===N||"object"==typeof e&&null!==e&&(e.$$typeof===z||e.$$typeof===W||e.$$typeof===q||e.$$typeof===R||e.$$typeof===I||e.$$typeof===_||e.$$typeof===H||e.$$typeof===B||e.$$typeof===$)},typeOf:U};function G(){}function K(){}w(function(e,t){}),w(function(e){e.exports=J}),K.resetWarningCache=G;var X=w(function(e){e.exports=function(){function e(e,t,a,i,n,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:K,resetWarningCache:G};return a.PropTypes=a,a}()});const Y=function(e,t,a){if(void 0===a&&(a="stages-form-"),"local"===t&&"undefined"!=typeof localStorage||"session"===t&&"undefined"!=typeof sessionStorage){const t=localStorage.getItem(""+a+e)||"{}";let i={};try{i=JSON.parse(t)}catch(e){}return i}return{}},Q=function(e,t,a,i){if(void 0===t&&(t={}),void 0===i&&(i="stages-form-"),("local"===a&&"undefined"!=typeof localStorage||"session"===a&&"undefined"!=typeof sessionStorage)&&"object"==typeof t){let a="{}";try{a=JSON.stringify(t)}catch(e){}localStorage.setItem(""+i+e,a)}},Z=function(e,t,a){void 0===a&&(a="stages-form-"),("local"===t&&"undefined"!=typeof localStorage||"session"===t&&"undefined"!=typeof sessionStorage)&&localStorage.removeItem(""+a+e)},ee=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,te=e=>{let{children:a,initialData:i,initialStep:n,render:o,validateOnStepChange:l,onChange:r,autoSave:s,id:d}=e;const[f]=t.useState("stages-"+(d||+new Date)),[c,u]=t.useState((()=>{if(!d||"local"!==s&&"session"!==s&&("object"!=typeof s||"local"!==s.type&&"session"!==s.type)){if(d&&"object"==typeof s&&"custom"===s.type&&"function"==typeof s.get){const e=s.get(d);if(Object.keys(e).length>0)return e}}else{const e=Y(d,"object"==typeof s?s.type:s);if(Object.keys(e).length>0)return e}return i})()),[p,y]=t.useState([]),[h,m]=t.useState({}),[b,v]=t.useState(n||0),[O,E]=t.useState([]),x=e=>{const t=O&&O[e]?O[e].key:e;return c&&c[t]?c[t]:{}},j=(e,t)=>(O[t]||(O[t]={key:e,visible:!0},E([...O])),e),S=(e,t,a)=>{const i=Object.assign({},c),n=O&&O[a]?O[a].key:a;ee()&&window.stagesLogging('Handle onChange for "'+n+'"',f),h[a]=t,m(Object.assign({},h)),i[n]=e,c[n]=e,u(Object.assign({},i)),"function"==typeof r&&r({data:i,errors:h}),d&&("local"===s||"session"===s?0===Object.keys(h).length&&Q(d,i,s):"object"!=typeof s||"local"!==s.type&&"session"!==s.type?d&&"object"==typeof s&&"custom"===s.type&&"function"==typeof s.save&&(s.validDataOnly&&0===Object.keys(h).length||!s.validDataOnly)&&s.save(d,i):(s.validDataOnly&&0===Object.keys(h).length||!s.validDataOnly)&&Q(d,i,s.type))},w=()=>{d&&("local"!==s&&"session"!==s||Z(d,s),"object"!=typeof s||"local"!==s.type&&"session"!==s.type||Z(d,s.type),d&&"object"==typeof s&&"custom"===s.type&&"function"==typeof s.remove&&s.remove(d)),u(i),v(0),"function"==typeof r&&r({data:i,errors:h})};t.useEffect(()=>{ee()&&(!d||"local"!==s&&"session"!==s&&("object"!=typeof s||"local"!==s.type&&"session"!==s.type)?d&&"object"==typeof s&&"custom"===s.type&&"function"==typeof s.get?window.stagesLogging({id:f,keys:O,data:c,initialData:i,initialStep:n,errors:h,currentStep:b,savedData:s.get(d)}):window.stagesLogging({id:f,keys:O,data:c,initialData:i,initialStep:n,errors:h,currentStep:b,savedData:{}}):window.stagesLogging({id:f,keys:O,data:c,initialData:i,initialStep:n,errors:h,currentStep:b,savedData:Y(d,"object"==typeof s?s.type:s)}))},[O,c,h,b]),t.useEffect(()=>{ee()&&window.stagesLogging("Init Stages",f),a.map((e,t)=>e({index:t,setStepKey:j,initializing:!0})).filter(e=>e)},[]),t.useEffect(()=>{if(l){const e=C();e<b&&v(-1===e?0:e+1)}y(a.map((e,t)=>e({data:x(t),allData:c,onChange:S,reset:w,onNav:A,isActive:t===b,index:t,errors:h[t]||{},setStepKey:j})).filter((e,t)=>{const a=null!==e;return O[t]&&(O[t].visible=a),a}))},[b,c]);const A=(e,t)=>{let a=b;if(ee()&&window.stagesLogging('On nav "'+e+'" -> "'+t+'"',f),"next"===e){let e=!1;for(let t=b+1;t<O.length;t++)O[t].visible&&!e&&(a=t,e=!0)}if("prev"===e){let e=!1;for(let t=b-1;t>=0;t--)O[t].visible&&!e&&(a=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<O.length;t++)O[t].visible&&!e&&(a=t,e=!0)}if("last"===e){let e=!1;for(let t=O.length-1;t>=0;t--)O[t].visible&&!e&&(a=t,e=!0)}if("lastValid"===e&&(a=C()),"step"===e&&O[t]&&O[t].visible)a=Number(t);else if("step"===e&&"string"==typeof t){const e=g.default(O,{key:t});e>-1&&(a=e)}a<0&&(a=0),a>O.length&&(a=O.length),v(a)},C=()=>{let e=-1,t=!1;return Object.keys(h).forEach(a=>{const i=g.default(O,{key:a});(0===Object.keys(h[a]).length||i>-1&&!O[i].visible)&&!t?e=Number(a):t=!0}),e};return 0===p.length?null:o?o({navigationProps:{currentStep:b,data:c,onChangeStep:e=>{const t=C();ee()&&window.stagesLogging('On change step "'+e+'"',f),("number"==typeof t&&"number"==typeof e&&t+1>=e||!1===l)&&v(e)},errors:h,keys:O,stepCount:p.length,lastValidStep:C(),reset:w},progressionProps:(()=>{const e=p.length,t=C();let a=0;return Object.keys(h).forEach((e,i)=>{const n=x(i);i<=t&&0===Object.keys(h[i]).length&&Object.keys(n).length>0&&a++}),{currentStep:b,stepCount:e,validSteps:a,percentage:100/e*a,data:c,errors:h}})(),routerProps:{step:b,onChange:v,keys:O},steps:p}):null};te.propTypes={children:X.arrayOf(X.oneOfType([X.node,X.func])).isRequired,initialData:X.object,render:X.oneOfType([X.node,X.func]).isRequired,initialStep:X.number,validateOnStepChange:X.bool,id:X.oneOfType([X.string,X.number])},te.defaultProps={initialData:{},validateOnStepChange:!0,autoSave:!1};const ae=(e,t,a)=>a&&Array.isArray(e)?"number"===t?e.map(e=>Number(e)):"string"===t?e.map(e=>String(e)):"boolean"===t?e.map(e=>Boolean(e)):"date"===t?e.map(e=>new Date(e)):e:"number"===t?Number(e):"string"===t?String(e):"boolean"===t?Boolean(e):"date"===t?new Date(e):e,ie=(e,t)=>{const a={};return Object.keys(t).forEach(i=>{a[i]=void 0!==e[i]?e[i]:t[i].default,void 0===e[i]&&t[i].required&&console.warn('Param "'+i+'" is required but is missing in field configs!'),void 0!==e[i]&&typeof e[i]!==t[i].type&&console.warn('Param "'+i+'" is not of type "'+t[i].type+'"!')}),a},ne={};let oe,le,re,se=0;const de={},fe=e=>{let{config:a,data:i,render:n,renderFields:o,fields:l,onChange:r,isVisible:s,isDisabled:d,id:f,onValidation:c,parentRunValidation:u,validateOn:h,throttleWait:w,customEvents:A,enableUndo:C,undoMaxDepth:D,customRuleHandlers:k,autoSave:F,typeValidations:V,fieldsets:q,initialInterfaceState:R,hashSeparator:P}=e;const T=t.useRef(!1),[I,L]=t.useState(R),N=Object.assign({},i);j.default(N,I);const[W]=t.useState("form-"+(f||"noid")+"-"+ +new Date),[z,$]=t.useState(!1),[_,H]=t.useState({}),[B,U]=t.useState(!1),[M,J]=t.useState([]),[G,K]=t.useState(0),[X,te]=t.useState(!1),[ce,ue]=t.useState(!1),[pe,ye]=t.useState({}),[ge,he]=t.useState({}),[me,be]=t.useState(),[ve,Oe]=t.useState({}),[Ee,xe]=t.useState(!1),[je,Se]=t.useState(""),[we,Ae]=t.useState(""),[Ce,De]=t.useState([]),[ke,Fe]=t.useState({}),Ve=((e,t,a,i,n,o)=>{let l="function"==typeof e.fields?e.fields(t,a,i):"function"==typeof e?e(t,a,i):Array.isArray(e)?e:[];const r=n=>{if("string"==typeof n&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[n])return e.fieldConfigs[n](t,a,i);if("object"==typeof n&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[n.type]){const o=e.fieldConfigs[n.type](t,a,i);return Object.assign({},o,n,{type:o.type})}return"object"==typeof n&&o[n.type]?{id:n.id,type:"fieldset",fieldset:n.type,fields:o[n.type].config({data:t,asyncData:a,interfaceState:i,params:ie(n.params||{},o[n.type].params)}),params:n.params}:"function"==typeof n?n(t,a,i):n};return l=l.map(e=>("object"!=typeof e||"group"!==e.type&&"collection"!==e.type&&"fieldset"!==e.type||!Array.isArray(e.fields)||(e.fields=e.fields.map(e=>r(e))),"object"==typeof e&&"wizard"===e.type&&Array.isArray(e.stages)&&(e.stages=e.stages.map(e=>r(e))),r(e))),n.forEach(e=>{const i=p.default(l,e.path);if(Array.isArray(i)){if("add"===e.action&&i.push(e.fields(t,a)),"remove"===e.action){const n=e.fields(t,a),o=g.default(i,{id:n.id});o>-1&&i.splice(o,1)}E.default(l,e.path,i)}}),l})(a,N,me,I,Ce,q),qe=((e,t,a)=>{const i=[];return function n(o,l,r){void 0===o&&(o=""),void 0===l&&(l=""),void 0===r&&(r="");let s=[o?p.default(e,o):e],d=[];Array.isArray(s[0])||(d=Object.keys(s[0]),s=Object.values(s[0])),("stage"!==r||((e,t)=>{let a=!1;return Object.keys(e).forEach(i=>{i+"."+e[i]===t&&(a=!0)}),a})(a,l))&&s.forEach((e,a)=>{const r=void 0!==d[a]?d[a]:void 0;Array.isArray(e)&&e.forEach((e,a)=>{const s=l?l+"."+e.id:e.id,d=p.default(t,s),f=p.default(t,l);if((r&&f&&f.__typename===r||!r)&&i.push({path:s,config:e,data:d}),"collection"===e.type){const i=l?p.default(t,l+"."+e.id):t[e.id];i&&Array.isArray(i)&&i.forEach((t,i)=>{n(o+"["+a+"].fields",l?l+"."+e.id+"["+i+"]":e.id+"["+i+"]")})}else"group"===e.type||"fieldset"===e.type||"stage"===e.type?n(o+"["+a+"].fields",s,e.type):"wizard"===e.type&&n(o+"["+a+"].stages",s,"wizard")})})}(),i})(Ve,N,ke);t.useEffect(()=>(T.current=!0,()=>{T.current=!1}),[]),t.useEffect(()=>{const e=("undefined"!=typeof window?window.location.hash.substring(2):"").split(P||":"),t=Object.assign({},ke);e.forEach(e=>{const a=e.split("."),i=a.slice(0,-1).join("."),n=a[a.length-1];i&&n&&(t[i]=n)}),qe.forEach(e=>{"wizard"!==e.config.type||t[e.path]&&(!t[e.path]||m.default(e.config.stages,{id:t[e.path]}))||(t[e.path]=e.config.stages[0].id)}),JSON.stringify(ke)!==JSON.stringify(t)&&Fe(t)},[a]);const Re=()=>T&&!0===T.current;t.useEffect(()=>{if(i&&!B){let e;ee()&&window.stagesLogging("Set initial data",W),qe.forEach(t=>{if(void 0!==t.config.defaultValue&&void 0===p.default(i,t.path)){const e="function"==typeof t.config.defaultValue?t.config.defaultValue(i):t.config.defaultValue;E.default(i,t.path,e),E.default(N,t.path,e)}if(Array.isArray(t.config.validateOn)&&t.config.validateOn.indexOf("init")>-1||Array.isArray(h)&&h.indexOf("init")>-1){const a=Ie(t.path,"init",i,ve);e=Object.assign({},ve,a)}e&&Oe(e)});const t=S.default(i);let a;U(JSON.parse(t)),"local"===F||"session"===F||"object"==typeof F&&("local"===F.type||"session"===F.type)?a=Y(f,"object"==typeof F?F.type:F):f&&"object"==typeof F&&"custom"===F.type&&"function"==typeof F.get&&(a=F.get(f)),a&&Object.keys(a).length>0&&setTimeout(()=>{$(!!a.isDirty),H("object"==typeof a.dirtyFields?a.dirtyFields:{}),$e(a.data,Le(!1,a.data),f)},0)}},[i]),t.useEffect(()=>{if(ee()){let e;e="local"===F||"session"===F||"object"==typeof F&&("local"===F.type||"session"===F.type)?Y(f,"object"==typeof F?F.type:F):f&&"object"==typeof F&&"custom"===F.type&&"function"==typeof F.get?F.get(f):{},window.stagesLogging({id:W,data:i,initialData:B,interfaceState:I,undoData:M,asyncData:me,errors:ve,fieldPaths:qe,isDirty:z,focusedField:je,lastFocusedField:we,dirtyFields:_,loading:Ee,parsedFieldConfig:Ve,savedData:e})}},[i,ve,z,je,we,_,Ee]);const Pe=e=>"collection"===e||"subform"===e||"group"===e||"fieldset"===e||"config"===e||"wizard"===e||"stage"===e,Te=(e,t,a,i)=>{if(!l[t.type])return!0;const n=p.default(a,e),o=!Pe(t.type)&&l[t.type].isValid(n,t);if(V[t.type]&&"function"==typeof V[t.type].validation&&!t.customValidation)return V[t.type].validation({data:n,allData:a,interfaceState:I,fieldConfig:t,isValid:o,fieldHasFocus:!(!je||je!==e),fieldIsDirty:void 0!==_[e],triggeringEvent:i});if(("string"==typeof t.regexValidation||t.regexValidation instanceof RegExp)&&!t.customValidation){let e;if("string"==typeof t.regexValidation)try{e=new RegExp(t.regexValidation)}catch(e){}else e=t.regexValidation;return o&&(e.test(n)||!n)}if(!Pe(t.type)&&"function"==typeof t.customValidation){const l=t.customValidation({data:n,allData:a,interfaceState:I,fieldConfig:t,isValid:o,fieldHasFocus:!(!je||je!==e),fieldIsDirty:void 0!==_[e],triggeringEvent:i});if(!function(e){return e&&"[object Promise]"===Object.prototype.toString.call(e)}(l))return l;!function(){const a=+new Date;oe=Object.assign({},oe,{[e]:a}),l.then(i=>{oe[e]===a&&(!0!==i?(delete oe[e],Oe(Object.assign({},ve,{[e]:{field:t}}))):(delete oe[e],Oe(Object.assign({},ve))),oe=Object.assign({},oe))})}()}return o},Ie=(e,t,a,i,n)=>{const o=m.default(qe,{path:e}).config;ee()&&"render"!==t&&window.stagesLogging('Validate field "'+e+'"',W);const r=Te(e,o,a,t),s=p.default(a,e);return i[e]&&delete i[e],Pe(o.type)||!0===r?"collection"===o.type&&o.isRequired&&(!s||0===s.length||1===s.length&&0===Object.keys(s[0]).length)?(n||(n=e),i[e]={value:s,field:o}):"collection"===o.type&&(Array.isArray(o.fields)?o.fields.forEach(n=>{s&&s.forEach((r,d)=>{const f=e+"["+d+"]."+n.id;if(!(o.isRequired||r&&0!==Object.keys(r).length))return;const c=Te(n,f,r,t);if(l[n.type]&&!0!==c)i[e]={value:s,subField:n,errorCode:!1!==c?c:void 0};else if(l[n.type]&&n.isUnique){let t=p.default(a,e,[]).filter(e=>void 0!==e[n.id]).map(e=>e[n.id]);[...new Set(t)].length!==t.length&&(i[e]={value:s,subField:n,errorCode:"notUnique"})}})}):s&&s.forEach((a,n)=>{(o.isRequired||a&&0!==Object.keys(a).length)&&o.fields[a.__typename]&&o.fields[a.__typename].forEach(o=>{const r=Te(o,e+"["+n+"]."+o.id,a,t);l[o.type]&&!0!==r&&(i[e]={value:s,subField:o,errorCode:!1!==r?r:void 0})})})):(n||(n=e),i[e]={value:s,field:o,errorCode:!1!==r?r:void 0}),"collection"===o.type&&o.uniqEntries&&s&&v.default(s,(e,t)=>S.default(e)===S.default(t)).length!==s.length&&(i[e]={value:s,field:o}),"collection"===o.type&&o.rules&&"object"==typeof o.rules&&s&&Object.keys(o.rules).forEach(t=>{const a=o.rules[t];Object.keys(a).forEach(n=>{const l=a[n],r=t.indexOf(",")>-1?t.split(","):[t],d=n.indexOf(",")>-1?n.split(","):[n],f=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);const a=[];return e.forEach(e=>{t.forEach(t=>{a.push([e,t])})}),a}(r,d);let c=!0;if(l.maxCount&&"number"==typeof l.maxCount&&f.forEach(e=>{let t=0;s.forEach(a=>p.default(a,e[0])===e[1]?t++:void 0),t>l.maxCount&&(c=!1)}),l.minCount&&"number"==typeof l.minCount&&f.forEach(e=>{let t=0;s.forEach(a=>p.default(a,e[0])===e[1]?t++:void 0),t<l.minCount&&(c=!1)}),l.exactCount&&"number"==typeof l.exactCount&&f.forEach(e=>{let t=0;s.forEach(a=>p.default(a,e[0])===e[1]?t++:void 0),t!==l.exactCount&&(c=!1)}),l.sameCountAs&&"string"==typeof l.sameCountAs&&f.forEach(e=>{let t=0,a=0;s.forEach(i=>{p.default(i,e[0])===e[1]&&t++,p.default(i,e[0])===l.sameCountAs&&a++}),t!==a&&(c=!1)}),l.differentCountAs&&"string"==typeof l.differentCountAs&&f.forEach(e=>{let t=0,a=0;s.forEach(i=>{p.default(i,e[0])===e[1]&&t++,p.default(i,e[0])===l.differentCountAs&&a++}),t===a&&(c=!1)}),(l.sameSumAs&&"string"==typeof l.sameSumAs||l.differentSumAs&&"string"==typeof l.differentSumAs||l.biggerSumAs&&"string"==typeof l.biggerSumAs||l.smallerSumAs&&"string"==typeof l.smallerSumAs)&&f.forEach(e=>{let t=0,a=0;s.forEach(i=>{const n=Number(p.default(i,e[0])),o=Number(p.default(i,l.sameSumAs||l.differentSumAs||l.biggerSumAs||l.smallerSumAs));isNaN(n)||(t+=n),isNaN(o)||(a+=o)}),l.sameSumAs&&t!==a&&(c=!1),l.differentSumAs&&t===a&&(c=!1),l.biggerSumAs&&t<=a&&(c=!1),l.smallerSumAs&&t>=a&&(c=!1)}),l.isUnique&&r.length>0){const e=[];let t=!1;s.forEach(a=>{const i=r.map(e=>p.default(a,e));e.forEach(e=>{O.default(i,e)&&(t=!0)}),e.push(i)}),t&&(c=!1)}l.disallow&&f.forEach(e=>{let t=!1,a=!1;s.forEach(i=>{p.default(i,e[0])===e[1]&&(a=!0),Array.isArray(l.disallow)?l.disallow.forEach(a=>{p.default(i,e[0])===a&&(t=!0)}):p.default(i,e[0])===l.disallow&&(t=!0)}),a&&t&&(c=!1)}),l.disallow&&f.forEach(e=>{let t=!1,a=!1;s.forEach(i=>{p.default(i,e[0])===e[1]&&(a=!0),Array.isArray(l.disallow)?l.disallow.forEach(a=>{p.default(i,e[0])===a&&(t=!0)}):p.default(i,e[0])===l.disallow&&(t=!0)}),a&&!t&&(c=!1)}),c&&"object"==typeof k&&Object.keys(k).forEach(e=>{void 0!==l[e]&&"function"==typeof k[e]&&(k[e]({fieldValueCombos:f,fieldValidationData:s,valueRules:l,get:p.default})||(c=!1))}),c||(i[e]={value:s,field:o,errorCode:l.errorCode||"invalidRule"})})}),{errors:i,firstErrorField:n}},Le=function(e,t,a){void 0===a&&(a="");let i,n={};if(t||(t=N),qe.forEach(e=>{if(""===a||e.path.startsWith(a)){if(!l[e.config.type]&&!Pe(e.config.type))return;const o=Ie(e.path,""!==a?"render":"action",t,n,i);n=o.errors,i=o.firstErrorField}}),i&&s&&e){const e=document.getElementById(i);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return n},Ne=()=>Le(!1);t.useEffect(()=>{if("function"==typeof c&&u){ee()&&window.stagesLogging("Get errors on validation",W);let e=Le(!0);Oe(e),c(e)}},[c]);const We=(e,t)=>{ee()&&window.stagesLogging('Get sub form errors for sub id "'+e+'"',W),Le(!0),t&&Object.keys(t).length>0&&(ve[e]=t)},ze=function(e,t,a){try{const i=function(){if(t.loader&&"function"==typeof t.loader){function i(){t.enableCaching&&((e,t)=>{ee()&&window.stagesLogging('Update options cache for "'+e+'"',W),he(a=>Object.assign({},a,{[e]:t}))})(o,l),s===r&&(((e,t)=>{ee()&&window.stagesLogging('Update options loaded for "'+e+'"',W),ye(a=>Object.assign({},a,{[e]:t}))})(e,l),t.onOptionsChange&&"function"==typeof t.onOptionsChange&&t.onOptionsChange(l,a,Ge))}const n={};let o,l;const r="number"==typeof ne[e]?ne[e]+1:0;let s=r;ne[e]=r,ee()&&window.stagesLogging('Create dynamic options for field "'+e+'"',W),t.enableCaching&&(t.watchFields.forEach(e=>{const t=p.default(a,e);t&&(n[e]=t)}),o=e+"-"+S.default(n));const d=function(){if(!t.enableCaching||!ge[o])return Promise.resolve(t.loader(a,Ge)).then(function(t){l=t,s=ne[e]});l=ge[o]}();return d&&d.then?d.then(i):i()}}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},$e=function(e,t,a,i,n){let o;void 0===n&&(n=!1);try{o=S.default({newData:e,errors:Object.keys(t),id:a,fieldKey:i,interfaceState:I})}catch(e){}(o!==re||n)&&(r((e=>{const t={},a=Object.assign({},e);return qe.forEach(i=>{if(i.config.isInterfaceState){const n=p.default(e,i.path);void 0!==n&&(E.default(t,i.path,n),x.default(a,i.path))}}),L(t),a})(e),t,a,i,I,Le(!1,e)),re=o)},_e=()=>{if(Re()&&C&&G>0){const e=G-1,t=JSON.parse(M[e]);K(e),Oe(t.errors),$(t.isDirty),H(t.dirtyFields),$e(t.data,t.errors,f)}},He=()=>{if(Re()&&C&&G<M.length-1){const e=G+1,t=JSON.parse(M[e]);K(e),Oe(t.errors),$(t.isDirty),H(t.dirtyFields),$e(t.data,t.errors,f)}};t.useEffect(()=>{let e=Object.assign({},N);if(ee()&&window.stagesLogging('Is visible change to "'+(s?"visible":"invisible")+'"',W),qe.forEach(t=>{const a=t.config;let i=p.default(e,t.path);if("collection"===a.type&&a.init){const n=a.min?Number(a.min):1;i&&0!==i.length||(i=[]);for(let t=i.length;t<n;t++)i.push("string"==typeof a.init?"function"==typeof a.setInitialData?a.setInitialData(i,e,a.init):{__typename:a.init}:"function"==typeof a.setInitialData?a.setInitialData(i,e):{});E.default(e,t.path,i)}}),e=Be(e),"function"==typeof a.asyncDataLoader&&s&&!ce)try{return xe(!0),Promise.resolve(a.asyncDataLoader()).then(function(e){be(e),ue(!0),xe(!1)})}catch(e){Promise.reject(e)}s&&(Array.isArray(qe)&&qe.forEach(t=>{t.config.dynamicOptions&&t.config.dynamicOptions.events&&t.config.dynamicOptions.events.indexOf("init")>-1&&ze(t.path,t.config.dynamicOptions,e)}),0===G&&0===M.length&&J([S.default({data:e,isDirty:z,dirtyFields:_,errors:ve})])),$e(e,Le(),f)},[s]);const Be=e=>{const t=Object.assign({},e);return qe.forEach(a=>{if("function"==typeof a.config.computedValue){const i=p.default(N,a.path.split(".").slice(0,-1).join(".")),n=a.config.computedValue(e,i,I);E.default(t,a.path,n)}}),t},Ue=e=>m.default(qe,{path:e}).config,Me=(e,t,a)=>{const i=[];return"object"==typeof A&&Object.keys(A).forEach(n=>{"function"==typeof A[n]&&A[n]({fieldValue:a,data:t,dirtyFields:_,optionsLoaded:pe,asyncData:me,errors:ve,focusedField:je,triggeringEvent:e})&&i.push(n)}),i},Je=e=>Array.isArray(e)&&1===e.length?e[0]:e,Ge=function e(t,a,i,n){if(void 0===n&&(n=!1),!Re())return;let o,l=!1;const r=+new Date,s=Ue(t);n||(se=r);let d=Object.assign({},i||N),c="function"==typeof s.filter?s.filter(a):a;s.cast&&"function"==typeof s.cast.data&&(c=s.cast.data(c)),s.cast&&"string"==typeof s.cast.data&&(c=ae(c,s.cast.data)),s.cast&&Array.isArray(s.cast.data)&&(c=ae(c,s.cast.data[0],!0)),ee()&&window.stagesLogging('Handle change for field "'+t+'"',W),E.default(d,t,c||void 0),d=Be(d);const u={data:p.default(d,t),fieldIsDirty:!!_[t],fieldConfig:s,fieldHasFocus:!(!je||je!==t)};n||(0===se||r-se<Number(w||400))&&(!s.validateOn&&Array.isArray(h)&&h.indexOf("throttledChange")>-1||s.validateOn&&Array.isArray(s.validateOn)&&s.validateOn.indexOf("throttledChange")>-1||!s.validateOn&&"function"==typeof h&&h(u).indexOf("throttledChange")>-1||s.validateOn&&"function"==typeof s.validateOn&&s.validateOn(u).indexOf("throttledChange")>-1)&&(le&&clearTimeout(le),le=setTimeout(()=>e(t,a,i,!0),w||400),l=!0);const y=Me("change",d,c);if(!s.validateOn&&Array.isArray(h)&&y.some(e=>h.indexOf(e)>-1)||s.validateOn&&Array.isArray(s.validateOn)&&y.some(e=>s.validateOn.indexOf(e)>-1)){const e=Ie(t,Je(y),d,ve);o=Object.assign({},ve,e.errors),Oe(o)}else if(!s.validateOn&&Array.isArray(h)&&h.indexOf("change")>-1||s.validateOn&&Array.isArray(s.validateOn)&&s.validateOn.indexOf("change")>-1||!s.validateOn&&Array.isArray(h)&&h.indexOf("throttledChange")>-1&&!l||s.validateOn&&Array.isArray(s.validateOn)&&s.validateOn.indexOf("throttledChange")>-1&&!l||!s.validateOn&&"function"==typeof h&&h(u).indexOf("change")>-1||s.validateOn&&"function"==typeof s.validateOn&&s.validateOn(u).indexOf("change")>-1||!s.validateOn&&"function"==typeof h&&h(u).indexOf("throttledChange")>-1&&!l||s.validateOn&&"function"==typeof s.validateOn&&s.validateOn(u).indexOf("throttledChange")>-1&&!l){const e=Ie(t,"change",d,ve);o=Object.assign({},ve,e.errors),Oe(o)}if(B&&(O.default(p.default(d,t),p.default(B,t))?void 0!==_[t]&&delete _[t]:_[t]={oldData:p.default(B,t),newData:p.default(d,t)},$(Object.keys(_).length>0),H(_)),s.clearFields&&(Array.isArray(s.clearFields)||"function"==typeof s.clearFields)){const e=Object.assign({},pe);(Array.isArray(s.clearFields)?s.clearFields:s.clearFields(c,d,o)).forEach(t=>{E.default(d,t,void 0),delete e[t]}),ye(e)}if(Array.isArray(qe)&&qe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("change")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t)>-1&&(!s.dynamicOptions||s.dynamicOptions&&pe[e.path]&&pe[e.path].indexOf(p.default(d,t))>-1||!pe[e.path])&&ze(e.path,e.config.dynamicOptions,d)}),(e=>{const t=e.split(".").at(-2);return"]"===(t?t.slice(-1):"")})(t)){const e=(e=>{const t=e.split(".");t.pop();let a=t.join(".");if("]"===a.slice(-1)){const e=a.lastIndexOf("[");a=a.substring(0,e)}return a})(t),a=Ue(e);if(a.sort&&a.sort.by&&a.sort.by.indexOf(s.id)>-1){let t=p.default(d,e,[]);t=b.default(t,a.sort.by),"desc"===a.sort.dir&&(t=t.reverse()),E.default(d,e,t)}}$e(d,Le(!1,d),f,t)},Ke=e=>{const t={},a=[];return qe.forEach(n=>{if(!e||n.path.startsWith(e+"."))if("fieldset"===n.config.type&&q[n.config.fieldset]){const e=Ke(n.path);E.default(t,n.path,q[n.config.fieldset].render({params:ie(n.config.params||{},q[n.config.fieldset].params),fieldProps:{fields:p.default(e,n.path),onCollectionAction:Xe,onWizardNav:Ye,getWizardNavHash:Qe,isWizardStepActive:Ze,isWizardStepDisabled:et,modifyConfig:tt,data:i,interfaceState:I,errors:ve,asyncData:me,isDirty:z,focusedField:je,lastFocusedField:we,dirtyFields:_,get:p.default,getConfig:it},actionProps:{handleActionClick:at,handleUndo:_e,handleRedo:He,isDisabled:d,isDirty:z,focusedField:je,lastFocusedField:we,dirtyFields:_,silentlyGetValidationErrors:Ne}}))}else{const e=((e,t,n)=>{let o=!1;if(a.forEach(e=>{n.startsWith(e)&&(o=!0)}),o)return null;if(!l[e.type]&&"subform"!==e.type&&"group"!==e.type)return null;if("function"==typeof e.isRendered&&!e.isRendered(n,t,N,I))return"group"===e.type&&a.push(n),null;if("group"===e.type)return null;const r=Object.assign({},e);if(r.id=n,pe[n])r.options=pe[n];else if("function"==typeof r.options)r.options=r.options(n,t,N);else if("object"==typeof r.computedOptions){let t=p.default(i,r.computedOptions.source,[]),a=p.default(N,n);"function"==typeof r.computedOptions.filter&&(t=t.filter(r.computedOptions.filter)),"function"==typeof r.computedOptions.sort&&(t=t.sort(r.computedOptions.sort)),"function"==typeof r.computedOptions.map&&(t=t.map(r.computedOptions.map)),r.computedOptions.initWith&&Array.isArray(r.computedOptions.initWith)&&(t=r.computedOptions.initWith.concat(t)),e.isUnique&&(t=t.map(t=>{if(""===t.value)return t;const o=n.substring(0,n.lastIndexOf("["));let l=p.default(i,o,[]);return g.default(l,{[e.id]:t.value})>-1&&t.value!==a?Object.assign({},t,{disabled:!0}):t})),r.options=t,m.default(t,{value:a})||(r.value="",E.default(N,n,""))}return delete r.computedValue,delete r.computedOptions,delete r.filter,delete r.clearFields,delete r.dynamicOptions,delete r.isRendered,delete r.defaultValue,delete r.cleanUp,delete r.precision,r.placeholder&&Array.isArray(r.placeholder)&&r.placeholder.length>1&&(void 0===de[n]&&(de[n]=r.placeholder[Math.floor(Math.random()*r.placeholder.length)]),r.placeholder=de[n]),V[e.type]&&"function"==typeof V[e.type].renderer&&!e.errorRenderer&&(r.errorRenderer=V[e.type].renderer),oe&&oe[n]&&(r.isValidating=!0),Pe(e.type)||Object.keys(r).forEach(e=>{"id"!==e&&"function"==typeof r[e]&&e.endsWith("Fn")&&(r[e.substring(0,e.length-2)]=r[e]({path:n,fieldData:t,alldata:N,interfaceState:I}),delete r[e])}),"fieldset"===e.type?null:"subform"!==e.type?/*#__PURE__*/y.default.createElement(l[e.type].component,Object.assign({key:n,value:(c=t,e.cast&&"function"==typeof e.cast.field?e.cast.field(c):e.cast&&"string"==typeof e.cast.field?ae(c,e.cast.field):e.cast&&Array.isArray(e.cast.field)?ae(c,e.cast.field[0],!0):c),initialValue:p.default(B,n),error:ve[n],isDirty:!!_[n],isDisabled:d||e.isDisabled,hasFocus:!(!je||je!==n),onChange:e=>Ge(n,e),onFocus:()=>(e=>{if(!Re())return;const t=Ue(e),a=Object.assign({},N),i=p.default(a,e);Se(e),Ae(e);const n={data:i,fieldIsDirty:!!_[e],fieldConfig:t,fieldHasFocus:!(!je||je!==e)},o=Me("focus",a,i);if(!t.validateOn&&Array.isArray(h)&&o.some(e=>h.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&o.some(e=>t.validateOn.indexOf(e)>-1)){const t=Ie(e,Je(o),a,ve);Oe(Object.assign({},ve,t.errors)),$e(a,t.errors,f,e)}else if(!t.validateOn&&Array.isArray(h)&&h.indexOf("focus")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("focus")>-1||!t.validateOn&&"function"==typeof h&&h(n).indexOf("focus")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(n).indexOf("focus")>-1){const t=Ie(e,"focus",a,ve);Oe(Object.assign({},ve,t.errors)),$e(a,t.errors,f,e)}})(n),onBlur:()=>(e=>{if(!Re())return;Se("");const t=Ue(e),a=Object.assign({},N),i=Object.assign({},N);let n=p.default(a,e);se=0,ee()&&window.stagesLogging('Handle blur for field "'+e+'"',W),t.cleanUp&&"function"==typeof t.cleanUp&&void 0!==n&&(n=t.cleanUp(n),E.default(a,e,n),Ge(e,n,a,!0)),"number"==typeof t.precision&&(E.default(a,e,Number(n).toFixed(t.precision)),$e(a,ve,f,e));const o={data:n,fieldIsDirty:!!_[e],fieldConfig:t,fieldHasFocus:!(!je||je!==e)},l=Me("blur",a,n);if(!t.validateOn&&Array.isArray(h)&&l.some(e=>h.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&l.some(e=>t.validateOn.indexOf(e)>-1)){const t=Ie(e,Je(l),a,ve);Oe(Object.assign({},ve,t.errors)),$e(a,t.errors,f,e)}else if(!t.validateOn&&Array.isArray(h)&&h.indexOf("blur")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("blur")>-1||!t.validateOn&&"function"==typeof h&&h(o).indexOf("blur")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(o).indexOf("blur")>-1){const t=Ie(e,"blur",a,ve);Oe(Object.assign({},ve,t.errors)),$e(a,t.errors,f,e)}if(Array.isArray(qe)&&qe.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("blur")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t.id)>-1&&ze(e.config.id,e.config.dynamicOptions,a),void 0!==F&&e.config.disableAutoSave&&x.default(i,e.path)}),(e=>{if(C){const t=[...M];t.length=G+1,t.push(S.default({data:e,isDirty:z,dirtyFields:_,errors:ve})),t.length>D&&t.shift(),J(t),K(t.length-1)}})(a),void 0!==F)if("local"===F||"session"===F){const e=Le(!1,a);0===Object.keys(e).length&&Q(f,{data:i,isDirty:z,dirtyFields:_},F)}else if("object"!=typeof F||"local"!==F.type&&"session"!==F.type){if("object"==typeof F&&"custom"===F.type&&"function"==typeof F.save){const e=Le(!1,a);(F.validDataOnly&&0===Object.keys(e).length||!F.validDataOnly)&&F.save(f,{data:i,isDirty:z,dirtyFields:_})}}else{const e=Le(!1,a);(F.validDataOnly&&0===Object.keys(e).length||!F.validDataOnly)&&Q(f,{data:i,isDirty:z,dirtyFields:_},F.type)}})(n)},r)):/*#__PURE__*/y.default.createElement(fe,{config:e.config,render:t=>{let{fieldProps:a}=t;/*#__PURE__*/return y.default.createElement(e.render,a)},fields:l,id:n,onChange:(e,t)=>Ge(n,e),onValidation:e=>We(n,e),parentRunValidation:X,data:N&&p.default(N,n),isVisible:s,isDisabled:d,validateOn:h});var c})(n.config,n.data,n.path);e&&E.default(t,n.path,e)}}),t},Xe=(e,t,a,i)=>{if(!Re())return;const n=Object.assign({},N),o=Ue(e),l=o&&o.min?Number(o.min):0,r=o&&o.max?Number(o.max):99999999999999;let s,d=p.default(n,e,[]),c=!1;if("last"===a&&(a=d.length-1),"last"===i&&(i=d.length-1),ee()&&window.stagesLogging('On collection action "'+e+'"',W),"add"===t&&("string"==typeof a&&o.fields[a]?r>d.length&&d.push("function"==typeof o.setInitialData?o.setInitialData(d,n,a):{__typename:a}):r>d.length&&d.push("function"==typeof o.setInitialData?o.setInitialData(d,n):{}),c=!0),"remove"===t&&(l<d.length&&d.splice(a,1),c=!0),"move"===t&&"number"==typeof a&&"number"==typeof i&&a>-1&&i>-1){const[e]=d.splice(a,1);d.splice(i,0,e),c=!0}if("sort"===t&&d.length>0&&a&&(d=b.default(d,a),c=!0),"duplicate"===t&&"number"==typeof a&&a>-1&&(d.splice(a+1,0,Object.assign({},d[a])),c=!0),o.sort&&o.sort.by&&(d=b.default(d,o.sort.by),"desc"===o.sort.dir&&(d=d.reverse()),c=!0),"update"===t&&Array.isArray(a)?(c=!0,E.default(n,e,a)):E.default(n,e,d),c){const t=p.default(B,e),a=p.default(n,e);try{JSON.stringify(t)!==JSON.stringify(a)?($(!0),_[e]={oldData:t,newData:a},H(_)):(delete _[e],Object.keys(_).forEach(t=>{t.startsWith(e)&&delete _[t]}),H(_),$(Object.keys(_).length>0))}catch(e){}}if(h.indexOf("collectionAction")>-1||o.validateOn&&o.validateOn.indexOf("collectionAction")>-1){const t=Ie(e,"collectionAction",n,ve);s=Object.assign({},ve,t.errors),Oe(s)}$e(n,s||Le(),f,e)},Ye=(e,t,a)=>{const i=Object.assign({},ke),n=i[t],o=Ue(t);if("step"===e&&(i[t]=a),"next"===e){const e=g.default(o.stages,{id:n})+1;o.stages[e]&&(i[t]=o.stages[e].id)}if("prev"===e){const e=g.default(o.stages,{id:n})-1;o.stages[e]&&(i[t]=o.stages[e].id)}"first"===e&&(i[t]=o.stages[0].id),"last"===e&&(i[t]=o.stages[o.stages.length-1].id),Fe(i)},Qe=function(e,t,a){void 0===a&&(a="step");const i=ke[e],n=Ue(e),o=[];if("step"===a||"first"===a||"last"===a)return Object.keys(ke).forEach(i=>{i.startsWith(e)?("step"===a&&o.push(i+"."+t),"first"===a&&o.push(i+"."+n.stages[0].id),"last"===a&&o.push(i+"."+n.stages[n.stages.length-1].id)):o.push(i+"."+ke[i])}),"#!"+o.join(P||":");if("prev"===a){const t=g.default(n.stages,{id:i})-1;return!!n.stages[t]&&(Object.keys(ke).forEach(a=>{a.startsWith(e)?o.push(a+"."+n.stages[t].id):o.push(a+"."+ke[a])}),"#!"+o.join(P||":"))}if("next"===a){const t=g.default(n.stages,{id:i})+1;return!!n.stages[t]&&(Object.keys(ke).forEach(a=>{a.startsWith(e)?o.push(a+"."+n.stages[t].id):o.push(a+"."+ke[a])}),"#!"+o.join(P||":"))}return!1},Ze=(e,t)=>ke[e]===t,et=function(e,t,a){void 0===a&&(a=!1);const n=t.substring(2).split(P||":");let o="";if(n.forEach(t=>{t.startsWith(e+".")&&(o=t.substring(e.length+1))}),o){const t=Ue(e),n=g.default(t.stages,{id:o});if(n>g.default(t.stages,{id:ke[e]})+1)return!0;if(a&&Ze(e,o))return!0;for(let a=0;a<n;a++){const n=Le(!1,i,e+"."+t.stages[a].id);if(Object.keys(n).length>0)return!0}}return!1},tt=(e,t,i)=>{if(a.fieldConfigs&&"function"==typeof a.fieldConfigs[t]){const n=e.split(".");let o="";n.forEach(e=>{const t=o?p.default(Ve,o):Ve;if(e.endsWith("]")){const a=e.split("["),i=g.default(t,{id:a[0]});i>-1&&(o+="["+i+"].fields")}else{const a=g.default(t,{id:e});a>-1&&(o+="["+a+"].fields")}}),""!==o&&(Ce.push({fields:a.fieldConfigs[t],path:o,action:i}),De([...Ce]))}},at=(e,t,a)=>{ee()&&window.stagesLogging("Handle action click",W),a&&("local"!==F&&"session"!==F||Z(f,F),"object"!=typeof F||"local"!==F.type&&"session"!==F.type||Z(f,F.type),f&&"object"==typeof F&&"custom"===F.type&&"function"==typeof F.remove&&F.remove(f),$e(B,Le(),f),H({}),$(!1));const i=Me("action",N);let n=!1;if(Array.isArray(h)&&h.indexOf("action")>-1||Array.isArray(h)&&i.some(e=>h.indexOf(e)>-1)){t&&(te(!0),setTimeout(()=>te(!1),0));let e=t?Le(!0):{};Oe(e),Object.keys(e).length>0&&(n=!0)}n||e()},it=e=>{const t=m.default(qe,{path:e});return t?t.config:void 0};return!1===s?null:n?n({actionProps:{handleActionClick:at,handleUndo:_e,handleRedo:He,isDisabled:!!(oe&&Object.keys(oe).length>0)||d,isDirty:z,focusedField:je,lastFocusedField:we,dirtyFields:_,silentlyGetValidationErrors:Ne,updateData:e=>{$e(e,Le(),f);let t=!1,a={};qe.forEach(i=>{if(!i.config.isInterfaceState){const n=p.default(e,i.path),o=p.default(B,i.path);n!==o&&(t=!0,void 0!==n&&(a[i.path]={oldData:o,newData:n}))}}),$(t),H(a)}},fieldProps:{fields:Ke(),onCollectionAction:Xe,onWizardNav:Ye,getWizardNavHash:Qe,isWizardStepActive:Ze,isWizardStepDisabled:et,modifyConfig:tt,data:i,interfaceState:I,errors:ve,asyncData:me,isDirty:z,focusedField:je,lastFocusedField:we,dirtyFields:_,get:p.default,getConfig:it},loading:Ee}):o?o(Ke()):null};function ce(e,t){if(null==e)return{};var a,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(a=o[i])>=0||(n[a]=e[a]);return n}fe.propTypes={config:X.oneOfType([X.object,X.array,X.func]).isRequired,data:X.object,render:X.oneOfType([X.node,X.func]),renderFields:X.oneOfType([X.node,X.func]),fields:X.object.isRequired,onChange:X.func,isVisible:X.bool,isDisabled:X.bool,id:X.oneOfType([X.string,X.number]),onValidation:X.func,parentRunValidation:X.bool,validateOn:X.array,customRuleHandlers:X.object,undoMaxDepth:X.number,typeValidations:X.object,fieldsets:X.object,initialInterfaceState:X.object},fe.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"],customRuleHandlers:{},undoMaxDepth:10,autoSave:!1,typeValidations:{},fieldsets:{},initialInterfaceState:{}};const ue=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","hasFocus","prefix","suffix","secondaryText","type","errorRenderer"],pe=e=>{let{id:t,label:a,value:i,onChange:n,onBlur:o,onFocus:l,error:r,placeholder:s,isRequired:d,isDisabled:f,isValidating:c,prefix:u,suffix:p,secondaryText:g,type:h,errorRenderer:m}=e;return ce(e,ue),console.log({id:t,value:i}),/*#__PURE__*/y.default.createElement("div",null,a?/*#__PURE__*/y.default.createElement("label",{htmlFor:t},a,d?" *":""):null,/*#__PURE__*/y.default.createElement("div",null,u?/*#__PURE__*/y.default.createElement("span",null,u):null,/*#__PURE__*/y.default.createElement("input",{id:t,name:t,value:void 0!==i?i:"number"===h?0:"",placeholder:s,type:h||"text",disabled:!!f,required:!!d,autoComplete:"password"===h?"current-password":"off",onChange:e=>{"function"==typeof n&&n(e.target.value)},onFocus:e=>{"function"==typeof l&&l()},onBlur:e=>{"function"==typeof o&&o()}}),p?/*#__PURE__*/y.default.createElement("span",null,p):null),g?/*#__PURE__*/y.default.createElement("div",null,g):null,r&&!c?m?m(r):/*#__PURE__*/y.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,c?/*#__PURE__*/y.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},ye=(e,t)=>!t.isRequired||""!==e&&void 0!==e,ge=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","type","errorRenderer"],he=["id","label","value","options","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","errorRenderer"],me=["id","label","value","options","onChange","onBlur","onFocus","error","isRequired","isDisabled","isValidating","prefix","suffix","secondaryText","errorRenderer"],be=["id","label","error","isRequired","isValidating","secondaryText","errorRenderer"],ve={text:{component:pe,isValid:ye},number:{component:pe,isValid:ye},email:{component:pe,isValid:ye},password:{component:pe,isValid:ye},tel:{component:pe,isValid:ye},time:{component:pe,isValid:ye},date:{component:pe,isValid:ye},checkbox:{component:e=>{let{id:t,label:a,value:i,onChange:n,onBlur:o,onFocus:l,error:r,placeholder:s,isRequired:d,isDisabled:f,isValidating:c,prefix:u,suffix:p,secondaryText:g,type:h,errorRenderer:m}=e;return ce(e,ge),/*#__PURE__*/y.default.createElement("div",null,a?/*#__PURE__*/y.default.createElement("label",{htmlFor:t},a,d?" *":""):null,/*#__PURE__*/y.default.createElement("div",null,u?/*#__PURE__*/y.default.createElement("span",null,u):null,/*#__PURE__*/y.default.createElement("input",{id:t,name:t,value:"1",placeholder:s,type:h,disabled:!!f,required:!!d,checked:!!i,onChange:()=>{},onClick:e=>{"function"==typeof n&&n(!!e.target.checked)},onBlur:e=>{"function"==typeof o&&o()},onFocus:e=>{"function"==typeof l&&l()}}),p?/*#__PURE__*/y.default.createElement("span",null,p):null),g?/*#__PURE__*/y.default.createElement("div",null,g):null,r&&!c?m?m(r):/*#__PURE__*/y.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,c?/*#__PURE__*/y.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:e=>{let{id:t,label:a,value:i,options:n,onChange:o,onBlur:l,onFocus:r,error:s,placeholder:d,isRequired:f,isDisabled:c,isValidating:u,prefix:p,suffix:g,secondaryText:h,errorRenderer:m}=e;return ce(e,he),/*#__PURE__*/y.default.createElement("div",null,a?/*#__PURE__*/y.default.createElement("label",{htmlFor:t},a,f?" *":""):null,/*#__PURE__*/y.default.createElement("div",null,p?/*#__PURE__*/y.default.createElement("span",null,p):null,/*#__PURE__*/y.default.createElement("select",{id:t,name:t,value:void 0===i?"":i,placeholder:d,disabled:!!c,required:!!f,onChange:e=>{"function"==typeof o&&o(e.target.value)},onBlur:e=>{"function"==typeof l&&l()},onFocus:e=>{"function"==typeof r&&r()}},n.map(e=>/*#__PURE__*/y.default.createElement("option",{value:e.value,key:e.value,disabled:!!e.disabled||null},e.text))),g?/*#__PURE__*/y.default.createElement("span",null,g):null),h?/*#__PURE__*/y.default.createElement("div",null,h):null,s&&!u?m?m(s):/*#__PURE__*/y.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,u?/*#__PURE__*/y.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:e=>{let{id:a,label:i,value:n,options:o,onChange:l,onBlur:r,onFocus:s,error:d,isRequired:f,isDisabled:c,isValidating:u,prefix:p,suffix:g,secondaryText:h,errorRenderer:m}=e;return ce(e,me),/*#__PURE__*/y.default.createElement("div",{id:a},i?/*#__PURE__*/y.default.createElement("label",null,i,f?" *":""):null,/*#__PURE__*/y.default.createElement("div",null,p?/*#__PURE__*/y.default.createElement("span",null,p):null,o.map(e=>/*#__PURE__*/y.default.createElement(t.Fragment,{key:a+"-"+e.value},/*#__PURE__*/y.default.createElement("input",{type:"radio",name:a,id:a+"-"+e.value,value:e.value,checked:n===e.value,disabled:!!c,onChange:()=>{},onClick:t=>{"function"==typeof l&&l(e.value)},onBlur:e=>{"function"==typeof r&&r()},onFocus:e=>{"function"==typeof s&&s()}}),/*#__PURE__*/y.default.createElement("label",{htmlFor:a+"-"+e.value},e.text)," ")),g?/*#__PURE__*/y.default.createElement("span",null,g):null),h?/*#__PURE__*/y.default.createElement("div",null,h):null,d&&!u?m?m(d):/*#__PURE__*/y.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,u?/*#__PURE__*/y.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:e=>{let{id:t,label:a,error:i,isRequired:n,isValidating:o,secondaryText:l,errorRenderer:r}=e;return ce(e,be),a||l||i?/*#__PURE__*/y.default.createElement("div",{id:t},a?/*#__PURE__*/y.default.createElement("label",{htmlFor:t},a,n?" *":""):null,l?/*#__PURE__*/y.default.createElement("div",null,l):null,i&&!o?r?r(i):/*#__PURE__*/y.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null,o?/*#__PURE__*/y.default.createElement("div",{style:{color:"#999"}},"Field is validating ..."):null):null},isValid:()=>!0}};Object.defineProperty(exports,"get",{enumerable:!0,get:function(){return p.default}}),exports.Actions=e=>{let{config:t,handleActionClick:a,isDisabled:i}=e;/*#__PURE__*/return y.default.createElement(y.default.Fragment,null,t.map((e,t)=>/*#__PURE__*/y.default.createElement("button",{type:"button",onClick:()=>a(e.onClick,e.validate),key:"action-"+t,disabled:i},"primary"===e.type?/*#__PURE__*/y.default.createElement("strong",null,e.title):e.title)))},exports.Debugger=()=>{const[e,a]=t.useState({}),[i,n]=t.useState({}),[o,l]=t.useState({}),[r,s]=t.useState({}),[d,f]=t.useState(!1),c=(t,o)=>{if("string"==typeof t)i[o]||(i[o]=[]),i[o].push({action:t,time:+new Date}),n(i);else{const i=Object.assign(e,{}),n=Object.keys(i)[0];i[t.id]=t,a(Object.assign({},i)),l(e=>({key:e.key?e.key:n,tab:e.tab?e.tab:"data"}))}};return t.useEffect(()=>{"undefined"!=typeof window&&(window.stagesLogging=c)},[]),0===Object.keys(e).length?null:/*#__PURE__*/y.default.createElement("div",{style:{position:"absolute",top:"8px",right:"8px",width:"320px",padding:"8px",fontSize:"14px",color:"#333",border:"1px #bbb solid",borderRadius:"4px",background:"#fbfbfb",fontFamily:"Open Sans, Helvetica, Arial, sans",zIndex:1e3}},/*#__PURE__*/y.default.createElement("strong",{style:{lineHeight:"22px"}},"Debugger:"),/*#__PURE__*/y.default.createElement("button",{type:"button",style:{float:"right"},onClick:()=>f(!d)},d?"hide":"show"),d?Object.keys(e).map(t=>{const a=t.split("-");a.pop();let n="";return n="logs"===o.tab?i[o.key]?i[o.key].map(e=>e.time+": "+e.action).join("\n"):"":h.default(r[t]?p.default(e[o.key][o.tab],r[t]||""):e[o.key][o.tab],null,2),/*#__PURE__*/y.default.createElement("div",{key:t+"-"+o.tab},/*#__PURE__*/y.default.createElement("h3",{style:{background:"#333",color:"#fff",margin:"8px 0 0 0",padding:"2px 6px",textTransform:"capitalize",position:"relative"}},a.join(" "),":",e[t].isDirty?/*#__PURE__*/y.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"4px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"dirty"):null,Object.keys(e[t].errors).length?/*#__PURE__*/y.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"48px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"errors"):null,e[t].loading?/*#__PURE__*/y.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"98px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"loading"):null),/*#__PURE__*/y.default.createElement("div",null,/*#__PURE__*/y.default.createElement("select",{onChange:e=>l({key:t,tab:e.target.value}),value:o.key===t?o.tab:"data",style:{width:"47%",minWidth:"47%",maxWidth:"47%",marginRight:"2%",height:"25px"}},e[t].keys?/*#__PURE__*/y.default.createElement(y.default.Fragment,null,/*#__PURE__*/y.default.createElement("option",{value:"data"},"Data"),/*#__PURE__*/y.default.createElement("option",{value:"errors"},"Errors"),/*#__PURE__*/y.default.createElement("option",{value:"initialData"},"Initial Data"),/*#__PURE__*/y.default.createElement("option",{value:"savedData"},"Saved Data"),/*#__PURE__*/y.default.createElement("option",{value:"keys"},"Keys"),/*#__PURE__*/y.default.createElement("option",{value:"logs"},"Logs")):/*#__PURE__*/y.default.createElement(y.default.Fragment,null,/*#__PURE__*/y.default.createElement("option",{value:"data"},"Data"),/*#__PURE__*/y.default.createElement("option",{value:"errors"},"Errors"),/*#__PURE__*/y.default.createElement("option",{value:"parsedFieldConfig"},"Field Config"),/*#__PURE__*/y.default.createElement("option",{value:"initialData"},"Initial Data"),/*#__PURE__*/y.default.createElement("option",{value:"interfaceState"},"Interface State"),/*#__PURE__*/y.default.createElement("option",{value:"undoData"},"Undo Data"),/*#__PURE__*/y.default.createElement("option",{value:"asyncData"},"Async Data"),/*#__PURE__*/y.default.createElement("option",{value:"savedData"},"Saved Data"),/*#__PURE__*/y.default.createElement("option",{value:"fieldPaths"},"Field Paths"),/*#__PURE__*/y.default.createElement("option",{value:"logs"},"Logs"))),/*#__PURE__*/y.default.createElement("input",{value:r[t]||"",placeholder:"your.data.filter.path",onChange:e=>{const a=Object.assign({},r);a[t]=e.target.value,s(a)},style:{width:"47%",minWidth:"47%",maxWidth:"47%",fontSize:"12px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"4px",padding:"4px",overflowX:"scroll",whiteSpace:"pre"}})),o&&o.key===t?/*#__PURE__*/y.default.createElement("textarea",{readOnly:!0,style:{width:"calc(100% - 8px)",minWidth:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)",height:"200px",fontSize:"10px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"8px",overflowX:"scroll",whiteSpace:"pre"},value:n}):null)}):null)},exports.Form=fe,exports.HashRouter=e=>{let{step:a,onChange:i,keys:n,prefix:o,hashFormat:l="#!"}=e;const[r,s]=(()=>{const[e,a]=t.useState(()=>window.location.hash),i=t.useCallback(()=>{a(window.location.hash)},[]);var n,o;n=()=>{!function(e){e&&e.addEventListener&&e.addEventListener(...[].slice.call(arguments,1))}(window,"hashchange",i)},o=()=>{!function(e){e&&e.removeEventListener&&e.removeEventListener(...[].slice.call(arguments,1))}(window,"hashchange",i)},t.useEffect(()=>(n&&n(),()=>{o&&o()}),[]);const l=t.useCallback(t=>{t!==e&&(window.location.hash=t)},[e]);return[e,l]})(),[d,f]=t.useState(!1),c=e=>n&&n[e]?n[e].key:o?o+"-"+e:e,u=()=>{if("string"==typeof r&&-1!==r.indexOf(l)){const e=(e=>{const t=e.split(l);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):g.default(n,{key:e})}return-1})(r);-1!==e&&("function"==typeof s&&s(""+l+c(e)),i(e))}else"function"==typeof s&&s(""+l+c(a))};return t.useEffect(()=>{d&&u()},[r]),t.useEffect(()=>{d&&"function"==typeof s&&s(""+l+c(a))},[a]),p=()=>{u(),f(!0)},t.useEffect(()=>{p()},[]),null;var p},exports.Navigation=e=>{let{currentStep:t,onChangeStep:a,lastValidStep:i,keys:n}=e;const o=[];for(let e=0;e<n.length;e++)if(n&&n[e]&&n[e].visible){const l=n&&n[e]?n[e].key:"Step "+(e+1);o.push(t===e?/*#__PURE__*/y.default.createElement("li",{key:l,style:{textTransform:"capitalize"}},/*#__PURE__*/y.default.createElement("strong",null,l)):/*#__PURE__*/y.default.createElement("li",i>-1&&i+1<e||-1===i&&e>0?{key:l,style:{color:"#999",textTransform:"capitalize"}}:{key:l,style:{textTransform:"capitalize"},onClick:()=>a(e)},l))}/*#__PURE__*/return y.default.createElement("ul",null,o)},exports.Progression=e=>{let{stepCount:t,validSteps:a,percentage:i}=e;/*#__PURE__*/return y.default.createElement("div",null,a+" / "+t+" ("+Math.round(i)+"%)")},exports.Stages=te,exports.plainFields=ve;
//# sourceMappingURL=lib.js.map

var e=require("react"),t=require("lodash.findindex"),n=require("json-beautify"),r=require("lodash.get"),o=require("lodash.find"),i=require("lodash.sortby"),a=require("lodash.uniqwith"),l=require("lodash.isequal"),c=require("lodash.set"),s=require("lodash.unset"),u=require("lodash.merge"),f=require("fast-json-stable-stringify");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=/*#__PURE__*/d(e),y=/*#__PURE__*/d(t),g=/*#__PURE__*/d(n),h=/*#__PURE__*/d(r),v=/*#__PURE__*/d(o),m=/*#__PURE__*/d(i),b=/*#__PURE__*/d(a),O=/*#__PURE__*/d(l),x=/*#__PURE__*/d(c),E=/*#__PURE__*/d(s),w=/*#__PURE__*/d(u),S=/*#__PURE__*/d(f),j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function A(e){var t={exports:{}};return e(t,t.exports),t.exports}var C,k,R=function(e){return e&&e.Math==Math&&e},T=R("object"==typeof globalThis&&globalThis)||R("object"==typeof window&&window)||R("object"==typeof self&&self)||R("object"==typeof j&&j)||function(){return this}()||Function("return this")(),F={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},P=function(e){return"function"==typeof e},D=function(e){return"object"==typeof e?null!==e:P(e)},I=T.document,L=D(I)&&D(I.createElement),_=function(e){return L?I.createElement(e):{}},V=_("span").classList,q=V&&V.constructor&&V.constructor.prototype,M=q===Object.prototype?void 0:q,N=function(e){try{return!!e()}catch(e){return!0}},B=!N(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),$=Function.prototype,U=$.call,W=B&&$.bind.bind(U,U),z=B?function(e){return e&&W(e)}:function(e){return e&&function(){return U.apply(e,arguments)}},H=z({}.toString),G=z("".slice),K=function(e){return G(H(e),8,-1)},Y=T.Object,J=z("".split),X=N(function(){return!Y("z").propertyIsEnumerable(0)})?function(e){return"String"==K(e)?J(e,""):Y(e)}:Y,Q=T.TypeError,Z=function(e){if(null==e)throw Q("Can't call method on "+e);return e},ee=function(e){return X(Z(e))},te=Object.defineProperty,ne=function(e,t){try{te(T,e,{value:t,configurable:!0,writable:!0})}catch(n){T[e]=t}return t},re=T["__core-js_shared__"]||ne("__core-js_shared__",{}),oe=A(function(e){(e.exports=function(e,t){return re[e]||(re[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),ie=T.Object,ae=function(e){return ie(Z(e))},le=z({}.hasOwnProperty),ce=Object.hasOwn||function(e,t){return le(ae(e),t)},se=0,ue=Math.random(),fe=z(1..toString),de=function(e){return"Symbol("+(void 0===e?"":e)+")_"+fe(++se+ue,36)},pe=function(e){return P(e)?e:void 0},ye=function(e,t){return arguments.length<2?pe(T[e]):T[e]&&T[e][t]},ge=ye("navigator","userAgent")||"",he=T.process,ve=T.Deno,me=he&&he.versions||ve&&ve.version,be=me&&me.v8;be&&(k=(C=be.split("."))[0]>0&&C[0]<4?1:+(C[0]+C[1])),!k&&ge&&(!(C=ge.match(/Edge\/(\d+)/))||C[1]>=74)&&(C=ge.match(/Chrome\/(\d+)/))&&(k=+C[1]);var Oe,xe=k,Ee=!!Object.getOwnPropertySymbols&&!N(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&xe&&xe<41}),we=Ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Se=oe("wks"),je=T.Symbol,Ae=je&&je.for,Ce=we?je:je&&je.withoutSetter||de,ke=function(e){if(!ce(Se,e)||!Ee&&"string"!=typeof Se[e]){var t="Symbol."+e;Se[e]=Ee&&ce(je,e)?je[e]:we&&Ae?Ae(t):Ce(t)}return Se[e]},Re=T.String,Te=T.TypeError,Fe=function(e){if(D(e))return e;throw Te(Re(e)+" is not an object")},Pe=!N(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),De=Pe&&N(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ie=!Pe&&!N(function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a}),Le=Function.prototype.call,_e=B?Le.bind(Le):function(){return Le.apply(Le,arguments)},Ve=z({}.isPrototypeOf),qe=T.Object,Me=we?function(e){return"symbol"==typeof e}:function(e){var t=ye("Symbol");return P(t)&&Ve(t.prototype,qe(e))},Ne=T.String,Be=function(e){try{return Ne(e)}catch(e){return"Object"}},$e=T.TypeError,Ue=function(e){if(P(e))return e;throw $e(Be(e)+" is not a function")},We=function(e,t){var n=e[t];return null==n?void 0:Ue(n)},ze=T.TypeError,He=T.TypeError,Ge=ke("toPrimitive"),Ke=function(e){var t=function(e,t){if(!D(e)||Me(e))return e;var n,r=We(e,Ge);if(r){if(void 0===t&&(t="default"),n=_e(r,e,t),!D(n)||Me(n))return n;throw He("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&P(n=e.toString)&&!D(r=_e(n,e)))return r;if(P(n=e.valueOf)&&!D(r=_e(n,e)))return r;if("string"!==t&&P(n=e.toString)&&!D(r=_e(n,e)))return r;throw ze("Can't convert object to primitive value")}(e,t)}(e,"string");return Me(t)?t:t+""},Ye=T.TypeError,Je=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,Qe={f:Pe?De?function(e,t,n){if(Fe(e),t=Ke(t),Fe(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=Xe(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Je(e,t,n)}:Je:function(e,t,n){if(Fe(e),t=Ke(t),Fe(n),Ie)try{return Je(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Ye("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ze=Math.ceil,et=Math.floor,tt=function(e){var t=+e;return t!=t||0===t?0:(t>0?et:Ze)(t)},nt=Math.max,rt=Math.min,ot=function(e,t){var n=tt(e);return n<0?nt(n+t,0):rt(n,t)},it=Math.min,at=function(e){return e>0?it(tt(e),9007199254740991):0},lt=function(e){return at(e.length)},ct=function(e){return function(t,n,r){var o,i=ee(t),a=lt(i),l=ot(r,a);if(e&&n!=n){for(;a>l;)if((o=i[l++])!=o)return!0}else for(;a>l;l++)if((e||l in i)&&i[l]===n)return e||l||0;return!e&&-1}},st={includes:ct(!0),indexOf:ct(!1)},ut={},ft=st.indexOf,dt=z([].push),pt=function(e,t){var n,r=ee(e),o=0,i=[];for(n in r)!ce(ut,n)&&ce(r,n)&&dt(i,n);for(;t.length>o;)ce(r,n=t[o++])&&(~ft(i,n)||dt(i,n));return i},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gt=Object.keys||function(e){return pt(e,yt)},ht=Pe&&!De?Object.defineProperties:function(e,t){Fe(e);for(var n,r=ee(t),o=gt(t),i=o.length,a=0;i>a;)Qe.f(e,n=o[a++],r[n]);return e},vt={f:ht},mt=ye("document","documentElement"),bt=oe("keys"),Ot=function(e){return bt[e]||(bt[e]=de(e))},xt=Ot("IE_PROTO"),Et=function(){},wt=function(e){return"<script>"+e+"<\/script>"},St=function(e){e.write(wt("")),e.close();var t=e.parentWindow.Object;return e=null,t},jt=function(){try{Oe=new ActiveXObject("htmlfile")}catch(e){}var e,t;jt="undefined"!=typeof document?document.domain&&Oe?St(Oe):((t=_("iframe")).style.display="none",mt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(wt("document.F=Object")),e.close(),e.F):St(Oe);for(var n=yt.length;n--;)delete jt.prototype[yt[n]];return jt()};ut[xt]=!0;var At=Object.create||function(e,t){var n;return null!==e?(Et.prototype=Fe(e),n=new Et,Et.prototype=null,n[xt]=e):n=jt(),void 0===t?n:vt.f(n,t)},Ct=ke("unscopables"),kt=Array.prototype;null==kt[Ct]&&Qe.f(kt,Ct,{configurable:!0,value:At(null)});var Rt=function(e){kt[Ct][e]=!0},Tt={},Ft=z(Function.toString);P(re.inspectSource)||(re.inspectSource=function(e){return Ft(e)});var Pt,Dt,It,Lt=re.inspectSource,_t=T.WeakMap,Vt=P(_t)&&/native code/.test(Lt(_t)),qt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Mt=Pe?function(e,t,n){return Qe.f(e,t,qt(1,n))}:function(e,t,n){return e[t]=n,e},Nt=T.TypeError;if(Vt||re.state){var Bt=re.state||(re.state=new(0,T.WeakMap)),$t=z(Bt.get),Ut=z(Bt.has),Wt=z(Bt.set);Pt=function(e,t){if(Ut(Bt,e))throw new Nt("Object already initialized");return t.facade=e,Wt(Bt,e,t),t},Dt=function(e){return $t(Bt,e)||{}},It=function(e){return Ut(Bt,e)}}else{var zt=Ot("state");ut[zt]=!0,Pt=function(e,t){if(ce(e,zt))throw new Nt("Object already initialized");return t.facade=e,Mt(e,zt,t),t},Dt=function(e){return ce(e,zt)?e[zt]:{}},It=function(e){return ce(e,zt)}}var Ht,Gt,Kt,Yt={set:Pt,get:Dt,has:It,enforce:function(e){return It(e)?Dt(e):Pt(e,{})},getterFor:function(e){return function(t){var n;if(!D(t)||(n=Dt(t)).type!==e)throw Nt("Incompatible receiver, "+e+" required");return n}}},Jt={}.propertyIsEnumerable,Xt=Object.getOwnPropertyDescriptor,Qt=Xt&&!Jt.call({1:2},1)?function(e){var t=Xt(this,e);return!!t&&t.enumerable}:Jt,Zt={f:Qt},en=Object.getOwnPropertyDescriptor,tn={f:Pe?en:function(e,t){if(e=ee(e),t=Ke(t),Ie)try{return en(e,t)}catch(e){}if(ce(e,t))return qt(!_e(Zt.f,e,t),e[t])}},nn=Function.prototype,rn=Pe&&Object.getOwnPropertyDescriptor,on=ce(nn,"name"),an={EXISTS:on,PROPER:on&&"something"===function(){}.name,CONFIGURABLE:on&&(!Pe||Pe&&rn(nn,"name").configurable)},ln=A(function(e){var t=an.CONFIGURABLE,n=Yt.get,r=Yt.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var l,c=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;P(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ce(i,"name")||t&&i.name!==f)&&Mt(i,"name",f),(l=r(i)).source||(l.source=o.join("string"==typeof f?f:""))),e!==T?(c?!u&&e[n]&&(s=!0):delete e[n],s?e[n]=i:Mt(e,n,i)):s?e[n]=i:ne(n,i)})(Function.prototype,"toString",function(){return P(this)&&n(this).source||Lt(this)})}),cn=yt.concat("length","prototype"),sn={f:Object.getOwnPropertyNames||function(e){return pt(e,cn)}},un={f:Object.getOwnPropertySymbols},fn=z([].concat),dn=ye("Reflect","ownKeys")||function(e){var t=sn.f(Fe(e)),n=un.f;return n?fn(t,n(e)):t},pn=function(e,t,n){for(var r=dn(t),o=Qe.f,i=tn.f,a=0;a<r.length;a++){var l=r[a];ce(e,l)||n&&ce(n,l)||o(e,l,i(t,l))}},yn=/#|\.prototype\./,gn=function(e,t){var n=vn[hn(e)];return n==bn||n!=mn&&(P(t)?N(t):!!t)},hn=gn.normalize=function(e){return String(e).replace(yn,".").toLowerCase()},vn=gn.data={},mn=gn.NATIVE="N",bn=gn.POLYFILL="P",On=gn,xn=tn.f,En=function(e,t){var n,r,o,i,a,l=e.target,c=e.global,s=e.stat;if(n=c?T:s?T[l]||ne(l,{}):(T[l]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=xn(n,r))&&a.value:n[r],!On(c?r:l+(s?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;pn(i,o)}(e.sham||o&&o.sham)&&Mt(i,"sham",!0),ln(n,r,i,e)}},wn=!N(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Sn=Ot("IE_PROTO"),jn=T.Object,An=jn.prototype,Cn=wn?jn.getPrototypeOf:function(e){var t=ae(e);if(ce(t,Sn))return t[Sn];var n=t.constructor;return P(n)&&t instanceof n?n.prototype:t instanceof jn?An:null},kn=ke("iterator"),Rn=!1;[].keys&&("next"in(Kt=[].keys())?(Gt=Cn(Cn(Kt)))!==Object.prototype&&(Ht=Gt):Rn=!0);var Tn=null==Ht||N(function(){var e={};return Ht[kn].call(e)!==e});Tn&&(Ht={}),P(Ht[kn])||ln(Ht,kn,function(){return this});var Fn={IteratorPrototype:Ht,BUGGY_SAFARI_ITERATORS:Rn},Pn=Qe.f,Dn=ke("toStringTag"),In=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ce(e,Dn)&&Pn(e,Dn,{configurable:!0,value:t})},Ln=Fn.IteratorPrototype,_n=function(){return this},Vn=T.String,qn=T.TypeError,Mn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=z(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Fe(n),function(e){if("object"==typeof e||P(e))return e;throw qn("Can't set "+Vn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Nn=an.PROPER,Bn=an.CONFIGURABLE,$n=Fn.IteratorPrototype,Un=Fn.BUGGY_SAFARI_ITERATORS,Wn=ke("iterator"),zn=function(){return this},Hn=Qe.f,Gn=Yt.set,Kn=Yt.getterFor("Array Iterator"),Yn=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o="Array Iterator";e.prototype=At(Ln,{next:qt(1,function(){var e=Kn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}})}),In(e,o,!1),Tt[o]=_n}(n);var l,c,s,u=function(e){if(e===o&&y)return y;if(!Un&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=!1,d=e.prototype,p=d[Wn]||d["@@iterator"]||d.values,y=!Un&&p||u(o),g=d.entries||p;if(g&&(l=Cn(g.call(new e)))!==Object.prototype&&l.next&&(Cn(l)!==$n&&(Mn?Mn(l,$n):P(l[Wn])||ln(l,Wn,zn)),In(l,"Array Iterator",!0)),Nn&&p&&"values"!==p.name&&(Bn?Mt(d,"name","values"):(f=!0,y=function(){return _e(p,this)})),void(c={values:u("values"),keys:u("keys"),entries:u("entries")}))for(s in c)(Un||f||!(s in d))&&ln(d,s,c[s]);else En({target:"Array",proto:!0,forced:Un||f},c);return d[Wn]!==y&&ln(d,Wn,y,{name:o}),Tt.Array=y,c}(Array,0,function(e,t){Gn(this,{type:"Array Iterator",target:ee(e),index:0,kind:t})},0,"values"),Jn=Tt.Arguments=Tt.Array;if(Rt("keys"),Rt("values"),Rt("entries"),Pe&&"values"!==Jn.name)try{Hn(Jn,"name",{value:"values"})}catch(e){}var Xn=ke("iterator"),Qn=ke("toStringTag"),Zn=Yn.values,er=function(e,t){if(e){if(e[Xn]!==Zn)try{Mt(e,Xn,Zn)}catch(t){e[Xn]=Zn}if(e[Qn]||Mt(e,Qn,t),F[t])for(var n in Yn)if(e[n]!==Yn[n])try{Mt(e,n,Yn[n])}catch(t){e[n]=Yn[n]}}};for(var tr in F)er(T[tr]&&T[tr].prototype,tr);er(M,"DOMTokenList");var nr=Object.assign,rr=Object.defineProperty,or=z([].concat),ir=!nr||N(function(){if(Pe&&1!==nr({b:1},nr(rr({},"a",{enumerable:!0,get:function(){rr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=nr({},e)[n]||gt(nr({},t)).join("")!=r})?function(e,t){for(var n=ae(e),r=arguments.length,o=1,i=un.f,a=Zt.f;r>o;)for(var l,c=X(arguments[o++]),s=i?or(gt(c),i(c)):gt(c),u=s.length,f=0;u>f;)l=s[f++],Pe&&!_e(a,c,l)||(n[l]=c[l]);return n}:nr;En({target:"Object",stat:!0,forced:Object.assign!==ir},{assign:ir});var ar="function"==typeof Symbol&&Symbol.for,lr=ar?Symbol.for("react.element"):60103,cr=ar?Symbol.for("react.portal"):60106,sr=ar?Symbol.for("react.fragment"):60107,ur=ar?Symbol.for("react.strict_mode"):60108,fr=ar?Symbol.for("react.profiler"):60114,dr=ar?Symbol.for("react.provider"):60109,pr=ar?Symbol.for("react.context"):60110,yr=ar?Symbol.for("react.async_mode"):60111,gr=ar?Symbol.for("react.concurrent_mode"):60111,hr=ar?Symbol.for("react.forward_ref"):60112,vr=ar?Symbol.for("react.suspense"):60113,mr=ar?Symbol.for("react.suspense_list"):60120,br=ar?Symbol.for("react.memo"):60115,Or=ar?Symbol.for("react.lazy"):60116,xr=ar?Symbol.for("react.block"):60121,Er=ar?Symbol.for("react.fundamental"):60117,wr=ar?Symbol.for("react.responder"):60118,Sr=ar?Symbol.for("react.scope"):60119;function jr(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case lr:switch(e=e.type){case yr:case gr:case sr:case fr:case ur:case vr:return e;default:switch(e=e&&e.$$typeof){case pr:case hr:case Or:case br:case dr:return e;default:return t}}case cr:return t}}}function Ar(e){return jr(e)===gr}var Cr={AsyncMode:yr,ConcurrentMode:gr,ContextConsumer:pr,ContextProvider:dr,Element:lr,ForwardRef:hr,Fragment:sr,Lazy:Or,Memo:br,Portal:cr,Profiler:fr,StrictMode:ur,Suspense:vr,isAsyncMode:function(e){return Ar(e)||jr(e)===yr},isConcurrentMode:Ar,isContextConsumer:function(e){return jr(e)===pr},isContextProvider:function(e){return jr(e)===dr},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===lr},isForwardRef:function(e){return jr(e)===hr},isFragment:function(e){return jr(e)===sr},isLazy:function(e){return jr(e)===Or},isMemo:function(e){return jr(e)===br},isPortal:function(e){return jr(e)===cr},isProfiler:function(e){return jr(e)===fr},isStrictMode:function(e){return jr(e)===ur},isSuspense:function(e){return jr(e)===vr},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===sr||e===gr||e===fr||e===ur||e===vr||e===mr||"object"==typeof e&&null!==e&&(e.$$typeof===Or||e.$$typeof===br||e.$$typeof===dr||e.$$typeof===pr||e.$$typeof===hr||e.$$typeof===Er||e.$$typeof===wr||e.$$typeof===Sr||e.$$typeof===xr)},typeOf:jr};function kr(){}function Rr(){}A(function(e,t){}),A(function(e){e.exports=Cr}),Rr.resetWarningCache=kr;var Tr=A(function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Rr,resetWarningCache:kr};return n.PropTypes=n,n}()});const Fr=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,Pr=t=>{let{children:n,initialData:r,initialStep:o,render:i,validateOnStepChange:a,onChange:l}=t;const[c]=e.useState("stages-"+ +new Date),[s,u]=e.useState(r),[f,d]=e.useState([]),[p,g]=e.useState({}),[h,v]=e.useState(o||0),[m,b]=e.useState([]),O=e=>{const t=m&&m[e]?m[e].key:e;return s&&s[t]?s[t]:{}},x=(e,t)=>(m[t]||(m[t]={key:e,visible:!0},b([...m])),e),E=(e,t,n)=>{const r=Object.assign({},s),o=m&&m[n]?m[n].key:n;Fr()&&window.stagesLogging('Handle onChange for "'+o+'"',c),p[n]=t,g(Object.assign({},p)),r[o]=e,u(Object.assign({},r)),"function"==typeof l&&l({data:r,errors:p})};e.useEffect(()=>{Fr()&&window.stagesLogging({id:c,keys:m,data:s,errors:p,currentStep:h})},[m,s,p,h]),e.useEffect(()=>{Fr()&&window.stagesLogging("Init Stages",c),n.map((e,t)=>e({index:t,setStepKey:x,initializing:!0})).filter(e=>e)},[]),e.useEffect(()=>{if(a){const e=S();e<h&&v(-1===e?0:e+1)}d(n.map((e,t)=>e({data:O(t),allData:s,onChange:E,onNav:w,isActive:t===h,index:t,errors:p[t]||{},setStepKey:x})).filter((e,t)=>{const n=null!==e;return m[t]&&(m[t].visible=n),n}))},[h,s]);const w=(e,t)=>{let n=h;if(Fr()&&window.stagesLogging('On nav "'+e+'" -> "'+t+'"',c),"next"===e){let e=!1;for(let t=h+1;t<m.length;t++)m[t].visible&&!e&&(n=t,e=!0)}if("prev"===e){let e=!1;for(let t=h-1;t>=0;t--)m[t].visible&&!e&&(n=t,e=!0)}if("first"===e){let e=!1;for(let t=0;t<m.length;t++)m[t].visible&&!e&&(n=t,e=!0)}if("last"===e){let e=!1;for(let t=m.length-1;t>=0;t--)m[t].visible&&!e&&(n=t,e=!0)}if("lastValid"===e&&(n=S()),"step"===e&&m[t]&&m[t].visible)n=Number(t);else if("step"===e&&"string"==typeof t){const e=y.default(m,{key:t});e>-1&&(n=e)}n<0&&(n=0),n>m.length&&(n=m.length),v(n)},S=()=>{let e=-1,t=!1;return Object.keys(p).forEach(n=>{const r=y.default(m,{key:n});(0===Object.keys(p[n]).length||r>-1&&!m[r].visible)&&!t?e=Number(n):t=!0}),e};return 0===f.length?null:i?i({navigationProps:{currentStep:h,data:s,onChangeStep:e=>{const t=S();Fr()&&window.stagesLogging('On change step "'+e+'"',c),(t+1>=e||!1===a)&&v(e)},errors:p,keys:m,stepCount:f.length,lastValidStep:S()},progressionProps:(()=>{const e=f.length,t=S();let n=0;return Object.keys(p).forEach(e=>{const r=O(e);e<=t&&0===Object.keys(p[e]).length&&Object.keys(r).length>0&&n++}),{currentStep:h,stepCount:e,validSteps:n,percentage:100/e*n,data:s,errors:p}})(),routerProps:{step:h,onChange:v,keys:m},steps:f}):null};Pr.propTypes={children:Tr.arrayOf(Tr.oneOfType([Tr.node,Tr.func])).isRequired,initialData:Tr.object,render:Tr.oneOfType([Tr.node,Tr.func]).isRequired,initialStep:Tr.number,validateOnStepChange:Tr.bool},Pr.defaultProps={initialData:{},validateOnStepChange:!0};var Dr={};Dr[ke("toStringTag")]="z";var Ir,Lr,_r="[object z]"===String(Dr),Vr=ke("toStringTag"),qr=T.Object,Mr="Arguments"==K(function(){return arguments}()),Nr=_r?K:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=qr(e),Vr))?n:Mr?K(t):"Object"==(r=K(t))&&P(t.callee)?"Arguments":r},Br=T.String,$r=function(e){if("Symbol"===Nr(e))throw TypeError("Cannot convert a Symbol value to a string");return Br(e)},Ur=function(){var e=Fe(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Wr=T.RegExp,zr=N(function(){var e=Wr("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),Hr=zr||N(function(){return!Wr("a","y").sticky}),Gr={BROKEN_CARET:zr||N(function(){var e=Wr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:Hr,UNSUPPORTED_Y:zr},Kr=T.RegExp,Yr=N(function(){var e=Kr(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),Jr=T.RegExp,Xr=N(function(){var e=Jr("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),Qr=Yt.get,Zr=oe("native-string-replace",String.prototype.replace),eo=RegExp.prototype.exec,to=eo,no=z("".charAt),ro=z("".indexOf),oo=z("".replace),io=z("".slice),ao=(Lr=/b*/g,_e(eo,Ir=/a/,"a"),_e(eo,Lr,"a"),0!==Ir.lastIndex||0!==Lr.lastIndex),lo=Gr.BROKEN_CARET,co=void 0!==/()??/.exec("")[1];(ao||co||lo||Yr||Xr)&&(to=function(e){var t,n,r,o,i,a,l,c=this,s=Qr(c),u=$r(e),f=s.raw;if(f)return f.lastIndex=c.lastIndex,t=_e(to,f,u),c.lastIndex=f.lastIndex,t;var d=s.groups,p=lo&&c.sticky,y=_e(Ur,c),g=c.source,h=0,v=u;if(p&&(y=oo(y,"y",""),-1===ro(y,"g")&&(y+="g"),v=io(u,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==no(u,c.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,h++),n=new RegExp("^(?:"+g+")",y)),co&&(n=new RegExp("^"+g+"$(?!\\s)",y)),ao&&(r=c.lastIndex),o=_e(eo,p?n:c,v),p?o?(o.input=io(o.input,h),o[0]=io(o[0],h),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:ao&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),co&&o&&o.length>1&&_e(Zr,o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o&&d)for(o.groups=a=At(null),i=0;i<d.length;i++)a[(l=d[i])[0]]=o[l[1]];return o});var so=to;En({target:"RegExp",proto:!0,forced:/./.exec!==so},{exec:so});var uo=Function.prototype,fo=uo.apply,po=uo.call,yo="object"==typeof Reflect&&Reflect.apply||(B?po.bind(fo):function(){return po.apply(fo,arguments)}),go=ke("species"),ho=RegExp.prototype,vo=ke("match"),mo=function(e){var t;return D(e)&&(void 0!==(t=e[vo])?!!t:"RegExp"==K(e))},bo=function(){},Oo=[],xo=ye("Reflect","construct"),Eo=/^\s*(?:class|function)\b/,wo=z(Eo.exec),So=!Eo.exec(bo),jo=function(e){if(!P(e))return!1;try{return xo(bo,Oo,e),!0}catch(e){return!1}},Ao=function(e){if(!P(e))return!1;switch(Nr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return So||!!wo(Eo,Lt(e))}catch(e){return!0}};Ao.sham=!0;var Co=!xo||N(function(){var e;return jo(jo.call)||!jo(Object)||!jo(function(){e=!0})||e})?Ao:jo,ko=T.TypeError,Ro=ke("species"),To=function(e,t){var n,r=Fe(e).constructor;return void 0===r||null==(n=Fe(r)[Ro])?t:function(e){if(Co(e))return e;throw ko(Be(e)+" is not a constructor")}(n)},Fo=z("".charAt),Po=z("".charCodeAt),Do=z("".slice),Io=function(e){return function(t,n){var r,o,i=$r(Z(t)),a=tt(n),l=i.length;return a<0||a>=l?e?"":void 0:(r=Po(i,a))<55296||r>56319||a+1===l||(o=Po(i,a+1))<56320||o>57343?e?Fo(i,a):r:e?Do(i,a,a+2):o-56320+(r-55296<<10)+65536}},Lo=(Io(!1),Io(!0)),_o=function(e,t,n){return t+(n?Lo(e,t).length:1)},Vo=T.Array,qo=Math.max,Mo=function(e,t,n){for(var r,o,i,a=lt(e),l=ot(t,a),c=ot(void 0===n?a:n,a),s=Vo(qo(c-l,0)),u=0;l<c;l++,u++)r=s,o=e[l],(i=Ke(u))in r?Qe.f(r,i,qt(0,o)):r[i]=o;return s.length=u,s},No=T.TypeError,Bo=function(e,t){var n=e.exec;if(P(n)){var r=_e(n,e,t);return null!==r&&Fe(r),r}if("RegExp"===K(e))return _e(so,e,t);throw No("RegExp#exec called on incompatible receiver")},$o=Gr.UNSUPPORTED_Y,Uo=Math.min,Wo=[].push,zo=z(/./.exec),Ho=z(Wo),Go=z("".slice);!function(e,t,n,r){var o=ke(e),i=!N(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),a=i&&!N(function(){var e=!1,t=/a/;return(t={}).constructor={},t.constructor[go]=function(){return t},t.flags="",t[o]=/./[o],t.exec=function(){return e=!0,null},t[o](""),!e});if(!i||!a||n){var l=z(/./[o]),c=t(o,""[e],function(e,t,n,r,o){var a=z(e),c=t.exec;return c===so||c===ho.exec?i&&!o?{done:!0,value:l(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}});ln(String.prototype,e,c[0]),ln(ho,o,c[1])}r&&Mt(ho[o],"sham",!0)}("split",function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=$r(Z(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!mo(e))return _e(t,r,e,o);for(var i,a,l,c=[],s=0,u=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=_e(so,u,r))&&!((a=u.lastIndex)>s&&(Ho(c,Go(r,s,i.index)),i.length>1&&i.index<r.length&&yo(Wo,c,Mo(i,1)),l=i[0].length,s=a,c.length>=o));)u.lastIndex===i.index&&u.lastIndex++;return s===r.length?!l&&zo(u,"")||Ho(c,""):Ho(c,Go(r,s)),c.length>o?Mo(c,0,o):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:_e(t,this,e,n)}:t,[function(t,n){var o=Z(this),i=null==t?void 0:We(t,e);return i?_e(i,t,o,n):_e(r,$r(o),t,n)},function(e,o){var i=Fe(this),a=$r(e),l=n(r,i,a,o,r!==t);if(l.done)return l.value;var c=To(i,RegExp),s=i.unicode,u=new c($o?"^(?:"+i.source+")":i,(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+($o?"g":"y")),f=void 0===o?4294967295:o>>>0;if(0===f)return[];if(0===a.length)return null===Bo(u,a)?[a]:[];for(var d=0,p=0,y=[];p<a.length;){u.lastIndex=$o?0:p;var g,h=Bo(u,$o?Go(a,p):a);if(null===h||(g=Uo(at(u.lastIndex+($o?p:0)),a.length))===d)p=_o(a,p,s);else{if(Ho(y,Go(a,d,p)),y.length===f)return y;for(var v=1;v<=h.length-1;v++)if(Ho(y,h[v]),y.length===f)return y;p=d=g}}return Ho(y,Go(a,d)),y}]},!!N(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),$o);var Ko=T.Promise,Yo=ke("species"),Jo=T.TypeError,Xo=z(z.bind),Qo=function(e,t){return Ue(e),void 0===t?e:B?Xo(e,t):function(){return e.apply(t,arguments)}},Zo=ke("iterator"),ei=Array.prototype,ti=ke("iterator"),ni=function(e){if(null!=e)return We(e,ti)||We(e,"@@iterator")||Tt[Nr(e)]},ri=T.TypeError,oi=function(e,t,n){var r,o;Fe(e);try{if(!(r=We(e,"return"))){if("throw"===t)throw n;return n}r=_e(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return Fe(r),n},ii=T.TypeError,ai=function(e,t){this.stopped=e,this.result=t},li=ai.prototype,ci=function(e,t,n){var r,o,i,a,l,c,s,u,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),y=Qo(t,n&&n.that),g=function(e){return r&&oi(r,"normal",e),new ai(!0,e)},h=function(e){return f?(Fe(e),p?y(e[0],e[1],g):y(e[0],e[1])):p?y(e,g):y(e)};if(d)r=e;else{if(!(o=ni(e)))throw ii(Be(e)+" is not iterable");if(void 0!==(u=o)&&(Tt.Array===u||ei[Zo]===u)){for(i=0,a=lt(e);a>i;i++)if((l=h(e[i]))&&Ve(li,l))return l;return new ai(!1)}r=function(e,t){var n=arguments.length<2?ni(e):t;if(Ue(n))return Fe(_e(n,e));throw ri(Be(e)+" is not iterable")}(e,o)}for(c=r.next;!(s=_e(c,r)).done;){try{l=h(s.value)}catch(e){oi(r,"throw",e)}if("object"==typeof l&&l&&Ve(li,l))return l}return new ai(!1)},si=ke("iterator"),ui=!1;try{var fi=0,di={next:function(){return{done:!!fi++}},return:function(){ui=!0}};di[si]=function(){return this},Array.from(di,function(){throw 2})}catch(e){}var pi,yi,gi,hi,vi=z([].slice),mi=T.TypeError,bi=function(e,t){if(e<t)throw mi("Not enough arguments");return e},Oi=/(?:ipad|iphone|ipod).*applewebkit/i.test(ge),xi="process"==K(T.process),Ei=T.setImmediate,wi=T.clearImmediate,Si=T.process,ji=T.Dispatch,Ai=T.Function,Ci=T.MessageChannel,ki=T.String,Ri=0,Ti={};try{pi=T.location}catch(e){}var Fi=function(e){if(ce(Ti,e)){var t=Ti[e];delete Ti[e],t()}},Pi=function(e){return function(){Fi(e)}},Di=function(e){Fi(e.data)},Ii=function(e){T.postMessage(ki(e),pi.protocol+"//"+pi.host)};Ei&&wi||(Ei=function(e){bi(arguments.length,1);var t=P(e)?e:Ai(e),n=vi(arguments,1);return Ti[++Ri]=function(){yo(t,void 0,n)},yi(Ri),Ri},wi=function(e){delete Ti[e]},xi?yi=function(e){Si.nextTick(Pi(e))}:ji&&ji.now?yi=function(e){ji.now(Pi(e))}:Ci&&!Oi?(hi=(gi=new Ci).port2,gi.port1.onmessage=Di,yi=Qo(hi.postMessage,hi)):T.addEventListener&&P(T.postMessage)&&!T.importScripts&&pi&&"file:"!==pi.protocol&&!N(Ii)?(yi=Ii,T.addEventListener("message",Di,!1)):yi="onreadystatechange"in _("script")?function(e){mt.appendChild(_("script")).onreadystatechange=function(){mt.removeChild(this),Fi(e)}}:function(e){setTimeout(Pi(e),0)});var Li,_i,Vi,qi,Mi,Ni,Bi,$i,Ui={set:Ei,clear:wi},Wi=/ipad|iphone|ipod/i.test(ge)&&void 0!==T.Pebble,zi=/web0s(?!.*chrome)/i.test(ge),Hi=Ui.set,Gi=T.MutationObserver||T.WebKitMutationObserver,Ki=T.document,Yi=T.process,Ji=T.Promise,Xi=(0,tn.f)(T,"queueMicrotask"),Qi=Xi&&Xi.value;Qi||(Li=function(){var e,t;for(xi&&(e=Yi.domain)&&e.exit();_i;){t=_i.fn,_i=_i.next;try{t()}catch(e){throw _i?qi():Vi=void 0,e}}Vi=void 0,e&&e.enter()},Oi||xi||zi||!Gi||!Ki?!Wi&&Ji&&Ji.resolve?((Bi=Ji.resolve(void 0)).constructor=Ji,$i=Qo(Bi.then,Bi),qi=function(){$i(Li)}):xi?qi=function(){Yi.nextTick(Li)}:(Hi=Qo(Hi,T),qi=function(){Hi(Li)}):(Mi=!0,Ni=Ki.createTextNode(""),new Gi(Li).observe(Ni,{characterData:!0}),qi=function(){Ni.data=Mi=!Mi}));var Zi=Qi||function(e){var t={fn:e,next:void 0};Vi&&(Vi.next=t),_i||(_i=t,qi()),Vi=t},ea=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Ue(t),this.reject=Ue(n)},ta={f:function(e){return new ea(e)}},na=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ra=function(){this.head=null,this.tail=null};ra.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var oa,ia,aa,la,ca,sa=ra,ua="object"==typeof window,fa=Ui.set,da=ke("species"),pa="Promise",ya=Yt.getterFor(pa),ga=Yt.set,ha=Yt.getterFor(pa),va=Ko&&Ko.prototype,ma=Ko,ba=va,Oa=T.TypeError,xa=T.document,Ea=T.process,wa=ta.f,Sa=wa,ja=!!(xa&&xa.createEvent&&T.dispatchEvent),Aa=P(T.PromiseRejectionEvent),Ca=!1,ka=On(pa,function(){var e=Lt(ma),t=e!==String(ma);if(!t&&66===xe)return!0;if(xe>=51&&/native code/.test(e))return!1;var n=new ma(function(e){e(1)}),r=function(e){e(function(){},function(){})};return(n.constructor={})[da]=r,!(Ca=n.then(function(){})instanceof r)||!t&&ua&&!Aa}),Ra=ka||!function(e,t){if(!ui)return!1;var n=!1;try{var r={};r[si]=function(){return{next:function(){return{done:n=!0}}}},ma.all(r).catch(function(){})}catch(e){}return n}(),Ta=function(e){var t;return!(!D(e)||!P(t=e.then))&&t},Fa=function(e,t){var n,r,o,i=t.value,a=1==t.state,l=a?e.ok:e.fail,c=e.resolve,s=e.reject,u=e.domain;try{l?(a||(2===t.rejection&&_a(t),t.rejection=1),!0===l?n=i:(u&&u.enter(),n=l(i),u&&(u.exit(),o=!0)),n===e.promise?s(Oa("Promise-chain cycle")):(r=Ta(n))?_e(r,n,c,s):c(n)):s(i)}catch(e){u&&!o&&u.exit(),s(e)}},Pa=function(e,t){e.notified||(e.notified=!0,Zi(function(){for(var n,r=e.reactions;n=r.get();)Fa(n,e);e.notified=!1,t&&!e.rejection&&Ia(e)}))},Da=function(e,t,n){var r,o;ja?((r=xa.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),T.dispatchEvent(r)):r={promise:t,reason:n},!Aa&&(o=T["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=T.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ia=function(e){_e(fa,T,function(){var t,n=e.facade,r=e.value;if(La(e)&&(t=na(function(){xi?Ea.emit("unhandledRejection",r,n):Da("unhandledrejection",n,r)}),e.rejection=xi||La(e)?2:1,t.error))throw t.value})},La=function(e){return 1!==e.rejection&&!e.parent},_a=function(e){_e(fa,T,function(){var t=e.facade;xi?Ea.emit("rejectionHandled",t):Da("rejectionhandled",t,e.value)})},Va=function(e,t,n){return function(r){e(t,r,n)}},qa=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Pa(e,!0))},Ma=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Oa("Promise can't be resolved itself");var r=Ta(t);r?Zi(function(){var n={done:!1};try{_e(r,t,Va(Ma,n,e),Va(qa,n,e))}catch(t){qa(n,t,e)}}):(e.value=t,e.state=1,Pa(e,!1))}catch(t){qa({done:!1},t,e)}}};if(ka&&(ma=function(e){!function(e,t){if(Ve(ba,e))return e;throw Jo("Incorrect invocation")}(this),Ue(e),_e(oa,this);var t=ya(this);try{e(Va(Ma,t),Va(qa,t))}catch(e){qa(t,e)}},(oa=function(e){ga(this,{type:pa,done:!1,notified:!1,parent:!1,reactions:new sa,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)ln(e,r,t[r],void 0);return e}(ba=ma.prototype,{then:function(e,t){var n=ha(this),r=wa(To(this,ma));return n.parent=!0,r.ok=!P(e)||e,r.fail=P(t)&&t,r.domain=xi?Ea.domain:void 0,0==n.state?n.reactions.add(r):Zi(function(){Fa(r,n)}),r.promise},catch:function(e){return this.then(void 0,e)}}),ia=function(){var e=new oa,t=ya(e);this.promise=e,this.resolve=Va(Ma,t),this.reject=Va(qa,t)},ta.f=wa=function(e){return e===ma||e===aa?new ia(e):Sa(e)},P(Ko)&&va!==Object.prototype)){la=va.then,Ca||(ln(va,"then",function(e,t){var n=this;return new ma(function(e,t){_e(la,n,e,t)}).then(e,t)},{unsafe:!0}),ln(va,"catch",ba.catch,{unsafe:!0}));try{delete va.constructor}catch(e){}Mn&&Mn(va,ba)}En({global:!0,wrap:!0,forced:ka},{Promise:ma}),In(ma,pa,!1),ca=ye(pa),Pe&&ca&&!ca[Yo]&&(0,Qe.f)(ca,Yo,{configurable:!0,get:function(){return this}}),aa=ye(pa),En({target:pa,stat:!0,forced:ka},{reject:function(e){var t=wa(this);return _e(t.reject,void 0,e),t.promise}}),En({target:pa,stat:!0,forced:ka},{resolve:function(e){return function(e,t){if(Fe(e),D(t)&&t.constructor===e)return t;var n=ta.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),En({target:pa,stat:!0,forced:Ra},{all:function(e){var t=this,n=wa(t),r=n.resolve,o=n.reject,i=na(function(){var n=Ue(t.resolve),i=[],a=0,l=1;ci(e,function(e){var c=a++,s=!1;l++,_e(n,t,e).then(function(e){s||(s=!0,i[c]=e,--l||r(i))},o)}),--l||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=wa(t),r=n.reject,o=na(function(){var o=Ue(t.resolve);ci(e,function(e){_e(o,t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});var Na=z(1..valueOf),Ba=T.RangeError,$a=T.RangeError,Ua=T.String,Wa=Math.floor,za=z(function(e){var t=$r(Z(this)),n="",r=tt(e);if(r<0||Infinity==r)throw Ba("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}),Ha=z("".slice),Ga=z(1..toFixed),Ka=function(e,t,n){return 0===t?n:t%2==1?Ka(e,t-1,n*e):Ka(e*e,t/2,n)},Ya=function(e,t,n){for(var r=-1,o=n;++r<6;)e[r]=(o+=t*e[r])%1e7,o=Wa(o/1e7)},Ja=function(e,t){for(var n=6,r=0;--n>=0;)e[n]=Wa((r+=e[n])/t),r=r%t*1e7},Xa=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=Ua(e[t]);n=""===n?r:n+za("0",7-r.length)+r}return n},Qa=N(function(){return"0.000"!==Ga(8e-5,3)||"1"!==Ga(.9,0)||"1.25"!==Ga(1.255,2)||"1000000000000000128"!==Ga(0xde0b6b3a7640080,0)})||!N(function(){Ga({})});En({target:"Number",proto:!0,forced:Qa},{toFixed:function(e){var t,n,r,o,i=Na(this),a=tt(e),l=[0,0,0,0,0,0],c="",s="0";if(a<0||a>20)throw $a("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return Ua(i);if(i<0&&(c="-",i=-i),i>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*Ka(2,69,1))-69,n=t<0?i*Ka(2,-t,1):i/Ka(2,t,1),n*=4503599627370496,(t=52-t)>0){for(Ya(l,0,n),r=a;r>=7;)Ya(l,1e7,0),r-=7;for(Ya(l,Ka(10,r,1),0),r=t-1;r>=23;)Ja(l,1<<23),r-=23;Ja(l,1<<r),Ya(l,1,1),Ja(l,2),s=Xa(l)}else Ya(l,0,n),Ya(l,1<<-t,0),s=Xa(l)+za("0",a);return a>0?c+((o=s.length)<=a?"0."+za("0",a-o)+s:Ha(s,0,o-a)+"."+Ha(s,o-a)):c+s}});var Za,el=Math.floor,tl=function(e,t){var n=e.length,r=el(n/2);return n<8?nl(e,t):rl(e,tl(Mo(e,0,r),t),tl(Mo(e,r),t),t)},nl=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},rl=function(e,t,n,r){for(var o=t.length,i=n.length,a=0,l=0;a<o||l<i;)e[a+l]=a<o&&l<i?r(t[a],n[l])<=0?t[a++]:n[l++]:a<o?t[a++]:n[l++];return e},ol=tl,il=ge.match(/firefox\/(\d+)/i),al=!!il&&+il[1],ll=/MSIE|Trident/.test(ge),cl=ge.match(/AppleWebKit\/(\d+)\./),sl=!!cl&&+cl[1],ul=[],fl=z(ul.sort),dl=z(ul.push),pl=N(function(){ul.sort(void 0)}),yl=N(function(){ul.sort(null)}),gl=!!(Za=[].sort)&&N(function(){Za.call(null,function(){return 1},1)}),hl=!N(function(){if(xe)return xe<70;if(!(al&&al>3)){if(ll)return!0;if(sl)return sl<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)ul.push({k:t+r,v:n})}for(ul.sort(function(e,t){return t.v-e.v}),r=0;r<ul.length;r++)t=ul[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}});En({target:"Array",proto:!0,forced:pl||!yl||!gl||!hl},{sort:function(e){void 0!==e&&Ue(e);var t=ae(this);if(hl)return void 0===e?fl(t):fl(t,e);var n,r,o=[],i=lt(t);for(r=0;r<i;r++)r in t&&dl(o,t[r]);for(ol(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:$r(t)>$r(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<i;)delete t[r++];return t}});var vl,ml=T.TypeError,bl=function(e){if(mo(e))throw ml("The method doesn't accept regular expressions");return e},Ol=ke("match"),xl=tn.f,El=z("".endsWith),wl=z("".slice),Sl=Math.min,jl=function(e){var t=/./;try{"/./".endsWith(t)}catch(e){try{return t[Ol]=!1,"/./".endsWith(t)}catch(e){}}return!1}(),Al=!(jl||(vl=xl(String.prototype,"endsWith"),!vl||vl.writable));En({target:"String",proto:!0,forced:!Al&&!jl},{endsWith:function(e){var t=$r(Z(this));bl(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:Sl(at(n),r),i=$r(e);return El?El(t,i,o):wl(t,o-i.length,o)===i}});const Cl=(e,t,n)=>n&&Array.isArray(e)?"number"===t?e.map(e=>Number(e)):"string"===t?e.map(e=>String(e)):"boolean"===t?e.map(e=>Boolean(e)):"date"===t?e.map(e=>new Date(e)):e:"number"===t?Number(e):"string"===t?String(e):"boolean"===t?Boolean(e):"date"===t?new Date(e):e,kl=()=>"undefined"!=typeof window&&"function"==typeof window.stagesLogging,Rl={};let Tl,Fl,Pl=0;const Dl={},Il=t=>{let{config:n,data:r,render:o,fields:i,onChange:a,isVisible:l,isDisabled:c,id:s,onValidation:u,parentRunValidation:f,validateOn:d,throttleWait:g,customEvents:j,enableUndo:A,undoMaxDepth:C=10,customRuleHandlers:k}=t;const[R,T]=e.useState({}),F=Object.assign({},r);w.default(F,R);const[P]=e.useState("form-"+(s||"noid")+"-"+ +new Date),[D,I]=e.useState(!1),[L,_]=e.useState({}),[V,q]=e.useState(!1),[M,N]=e.useState([]),[B,$]=e.useState(0),[U,W]=e.useState(!1),[z,H]=e.useState(!1),[G,K]=e.useState({}),[Y,J]=e.useState({}),[X,Q]=e.useState(),[Z,ee]=e.useState({}),[te,ne]=e.useState(!1),[re,oe]=e.useState(),[ie,ae]=e.useState(),[le,ce]=e.useState([]),se=((e,t,n,r,o)=>{let i="function"==typeof e.fields?e.fields(t,n,r):[];const a=o=>"string"==typeof o&&e.fieldConfigs&&"function"==typeof e.fieldConfigs[o]?e.fieldConfigs[o](t,n,r):"function"==typeof o?o(t,n,r):o;return i=i.map(e=>("object"!=typeof e||"group"!==e.type&&"collection"!==e.type||!Array.isArray(e.fields)||(e.fields=e.fields.map(e=>a(e))),a(e))),o.forEach(e=>{const r=h.default(i,e.path);if(Array.isArray(r)){if("add"===e.action&&r.push(e.fields(t,n)),"remove"===e.action){const o=e.fields(t,n),i=y.default(r,{id:o.id});i>-1&&r.splice(i,1)}x.default(i,e.path,r)}}),i})(n,F,X,R,le),ue=((e,t)=>{const n=[];return function r(o,i){void 0===o&&(o="");let a=[o?h.default(e,o):e],l=[];Array.isArray(a[0])||(l=Object.keys(a[0]),a=Object.values(a[0])),a.forEach((e,a)=>{const c=void 0!==l[a]?l[a]:void 0;Array.isArray(e)&&e.forEach((e,a)=>{const l=i?i+"."+e.id:e.id,s=h.default(t,l),u=h.default(t,i);if((c&&u&&u.__typename===c||!c)&&n.push({path:l,config:e,data:s}),"collection"===e.type){const n=i?h.default(t,i+"."+e.id):t[e.id];n&&Array.isArray(n)&&n.forEach((t,n)=>{r(o+"["+a+"].fields",i?i+"."+e.id+"["+n+"]":e.id+"["+n+"]")})}else"group"===e.type&&r(o+"["+a+"].fields",l)})})}(),n})(se,F);e.useEffect(()=>{if(r&&!V){kl()&&window.stagesLogging("Set initial data",P),ue.forEach(e=>{if(void 0!==e.config.defaultValue&&void 0===h.default(r,e.path)){const t="function"==typeof e.config.defaultValue?e.config.defaultValue(r):e.config.defaultValue;x.default(r,e.path,t),x.default(F,e.path,t)}});const e=S.default(r);q(JSON.parse(e))}},[r]),e.useEffect(()=>{kl()&&window.stagesLogging({id:P,data:r,errors:Z,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L,loading:te,parsedFieldConfig:se})},[r,Z,D,re,ie,L,te]);const fe=e=>"collection"===e||"subform"===e||"group"===e||"config"===e,de=(e,t,n,r)=>{if(!i[t.type])return!0;const o=h.default(n,e),a=!fe(t.type)&&i[t.type].isValid(o,t);return!fe(t.type)&&t.customValidation?t.customValidation({data:o,allData:n,interfaceState:R,fieldConfig:t,isValid:a,fieldHasFocus:!(!re||re!==e),fieldIsDirty:void 0!==L[e],triggeringEvent:r}):a},pe=(e,t,n,r,o)=>{const a=v.default(ue,{path:e}).config;kl()&&window.stagesLogging('Validate field "'+e+'"',P);const l=de(e,a,n,t),c=h.default(n,e);return r[e]&&delete r[e],fe(a.type)||!0===l?"collection"===a.type&&a.isRequired&&(!c||0===c.length||1===c.length&&0===Object.keys(c[0]).length)?(o||(o=e),r[e]={value:c,field:a}):"collection"===a.type&&(Array.isArray(a.fields)?a.fields.forEach(o=>{c&&c.forEach(l=>{if(!(a.isRequired||l&&0!==Object.keys(l).length))return;const s=de(o,l,t);if(i[o.type]&&!0!==s)r[e]={value:c,subField:o,errorCode:!1!==s?s:void 0};else if(i[o.type]&&o.isUnique){let t=h.default(n,e,[]).filter(e=>void 0!==e[o.id]).map(e=>e[o.id]);[...new Set(t)].length!==t.length&&(r[e]={value:c,subField:o,errorCode:"notUnique"})}})}):c&&c.forEach(n=>{(a.isRequired||n&&0!==Object.keys(n).length)&&a.fields[n.__typename]&&a.fields[n.__typename].forEach(o=>{const a=de(o,n,t);i[o.type]&&!0!==a&&(r[e]={value:c,subField:o,errorCode:!1!==a?a:void 0})})})):(o||(o=e),r[e]={value:c,field:a,errorCode:!1!==l?l:void 0}),"collection"===a.type&&a.uniqEntries&&c&&b.default(c,(e,t)=>S.default(e)===S.default(t)).length!==c.length&&(r[e]={value:c,field:a}),"collection"===a.type&&a.rules&&"object"==typeof a.rules&&c&&Object.keys(a.rules).forEach(t=>{const n=a.rules[t];Object.keys(n).forEach(o=>{const i=n[o],l=t.indexOf(",")>-1?t.split(","):[t],s=o.indexOf(",")>-1?o.split(","):[o],u=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);const n=[];return e.forEach(e=>{t.forEach(t=>{n.push([e,t])})}),n}(l,s);let f=!0;if(i.maxCount&&"number"==typeof i.maxCount&&u.forEach(e=>{let t=0;c.forEach(n=>h.default(n,e[0])===e[1]?t++:void 0),t>i.maxCount&&(f=!1)}),i.minCount&&"number"==typeof i.minCount&&u.forEach(e=>{let t=0;c.forEach(n=>h.default(n,e[0])===e[1]?t++:void 0),t<i.minCount&&(f=!1)}),i.exactCount&&"number"==typeof i.exactCount&&u.forEach(e=>{let t=0;c.forEach(n=>h.default(n,e[0])===e[1]?t++:void 0),t!==i.exactCount&&(f=!1)}),i.sameCountAs&&"string"==typeof i.sameCountAs&&u.forEach(e=>{let t=0,n=0;c.forEach(r=>{h.default(r,e[0])===e[1]&&t++,h.default(r,e[0])===i.sameCountAs&&n++}),t!==n&&(f=!1)}),i.differentCountAs&&"string"==typeof i.differentCountAs&&u.forEach(e=>{let t=0,n=0;c.forEach(r=>{h.default(r,e[0])===e[1]&&t++,h.default(r,e[0])===i.differentCountAs&&n++}),t===n&&(f=!1)}),(i.sameSumAs&&"string"==typeof i.sameSumAs||i.differentSumAs&&"string"==typeof i.differentSumAs||i.biggerSumAs&&"string"==typeof i.biggerSumAs||i.smallerSumAs&&"string"==typeof i.smallerSumAs)&&u.forEach(e=>{let t=0,n=0;c.forEach(r=>{const o=Number(h.default(r,e[0])),a=Number(h.default(r,i.sameSumAs||i.differentSumAs||i.biggerSumAs||i.smallerSumAs));isNaN(o)||(t+=o),isNaN(a)||(n+=a)}),i.sameSumAs&&t!==n&&(f=!1),i.differentSumAs&&t===n&&(f=!1),i.biggerSumAs&&t<=n&&(f=!1),i.smallerSumAs&&t>=n&&(f=!1)}),i.isUnique&&l.length>0){const e=[];let t=!1;c.forEach(n=>{const r=l.map(e=>h.default(n,e));e.forEach(e=>{O.default(r,e)&&(t=!0)}),e.push(r)}),t&&(f=!1)}i.disallow&&u.forEach(e=>{let t=!1,n=!1;c.forEach(r=>{h.default(r,e[0])===e[1]&&(n=!0),Array.isArray(i.disallow)?i.disallow.forEach(n=>{h.default(r,e[0])===n&&(t=!0)}):h.default(r,e[0])===i.disallow&&(t=!0)}),n&&t&&(f=!1)}),i.disallow&&u.forEach(e=>{let t=!1,n=!1;c.forEach(r=>{h.default(r,e[0])===e[1]&&(n=!0),Array.isArray(i.disallow)?i.disallow.forEach(n=>{h.default(r,e[0])===n&&(t=!0)}):h.default(r,e[0])===i.disallow&&(t=!0)}),n&&!t&&(f=!1)}),f&&"object"==typeof k&&Object.keys(k).forEach(e=>{void 0!==i[e]&&"function"==typeof k[e]&&(k[e]({fieldValueCombos:u,fieldValidationData:c,valueRules:i,get:h.default})||(f=!1))}),f||(r[e]={value:c,field:a,errorCode:i.errorCode||"invalidRule"})})}),{errors:r,firstErrorField:o}},ye=(e,t)=>{let n,r={};if(t||(t=F),ue.forEach(e=>{if(!i[e.config.type]&&!fe(e.config.type))return;const o=pe(e.path,"action",t,r,n);r=o.errors,n=o.firstErrorField}),n&&l&&e){const e=document.getElementById(n);e&&!(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)&&e.scrollIntoView()}return r};e.useEffect(()=>{if("function"==typeof u&&f){kl()&&window.stagesLogging("Get errors on validation",P);let e=ye(!0);ee(e),u(e)}},[u]);const ge=(e,t)=>{kl()&&window.stagesLogging('Get sub form errors for sub id "'+e+'"',P),ye(!0),t&&Object.keys(t).length>0&&(Z[e]=t)},he=function(e,t,n){try{const r=function(){if(t.loader&&"function"==typeof t.loader){function r(){t.enableCaching&&((e,t)=>{kl()&&window.stagesLogging('Update options cache for "'+e+'"',P),J(n=>Object.assign({},n,{[e]:t}))})(i,a),c===l&&(((e,t)=>{kl()&&window.stagesLogging('Update options loaded for "'+e+'"',P),K(n=>Object.assign({},n,{[e]:t}))})(e,a),t.onOptionsChange&&"function"==typeof t.onOptionsChange&&t.onOptionsChange(a,n,Ee))}const o={};let i,a;const l="number"==typeof Rl[e]?Rl[e]+1:0;let c=l;Rl[e]=l,kl()&&window.stagesLogging('Create dynamic options for field "'+e+'"',P),t.enableCaching&&(t.watchFields.forEach(e=>{const t=h.default(n,e);t&&(o[e]=t)}),i=e+"-"+S.default(o));const s=function(){if(!t.enableCaching||!Y[i])return Promise.resolve(t.loader(n,Ee)).then(function(t){a=t,c=Rl[e]});a=Y[i]}();return s&&s.then?s.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},ve=(e,t,n,r)=>{let o;try{o=S.default({newData:e,errors:Object.keys(t),id:n,fieldKey:r})}catch(e){}o!==Fl&&(a((e=>{const t={},n=Object.assign({},e);return ue.forEach(r=>{if(r.config.isInterfaceState){const o=h.default(e,r.path);void 0!==o&&(x.default(t,r.path,o),E.default(n,r.path))}}),T(t),n})(e),t,n,r),Fl=o)};e.useEffect(()=>{let e=Object.assign({},F);if(kl()&&window.stagesLogging('Is visible change to "'+(l?"visible":"invisible")+'"',P),ue.forEach(t=>{const n=t.config;let r=h.default(e,t.path);if("collection"===n.type&&n.init){const o=n.min?Number(n.min):1;r&&0!==r.length||(r=[]);for(let t=r.length;t<o;t++)r.push("string"==typeof n.init?"function"==typeof n.setInitialData?n.setInitialData(r,e,n.init):{__typename:n.init}:"function"==typeof n.setInitialData?n.setInitialData(r,e):{});x.default(e,t.path,r)}}),e=me(e),"function"==typeof n.asyncDataLoader&&l&&!z)try{return ne(!0),Promise.resolve(n.asyncDataLoader()).then(function(e){Q(e),H(!0),ne(!1)})}catch(e){Promise.reject(e)}l&&(Array.isArray(ue)&&ue.forEach(t=>{t.config.dynamicOptions&&t.config.dynamicOptions.events&&t.config.dynamicOptions.events.indexOf("init")>-1&&he(t.path,t.config.dynamicOptions,e)}),0===B&&0===M.length&&N([S.default({data:e,isDirty:D,dirtyFields:L,errors:Z})])),ve(e,ye(),s)},[l]);const me=e=>{const t=Object.assign({},e);return ue.forEach(n=>{if("function"==typeof n.config.computedValue){const r=h.default(F,n.path.split(".").slice(0,-1).join(".")),o=n.config.computedValue(e,r,R);x.default(t,n.path,o)}}),t},be=e=>v.default(ue,{path:e}).config,Oe=(e,t)=>{const n=[];return"object"==typeof j&&Object.keys(j).forEach(r=>{"function"==typeof j[r]&&j[r]({data:t,dirtyFields:L,optionsLoaded:G,asyncData:X,errors:Z,focusedField:re,triggeringEvent:e})&&n.push(r)}),n},xe=e=>Array.isArray(e)&&1===e.length?e[0]:e,Ee=function e(t,n,r,o){void 0===o&&(o=!1);let i,a=!1;const l=+new Date;(0===Pl||l-Pl<Number(g||400))&&(Tl&&clearTimeout(Tl),Tl=setTimeout(()=>e(t,n,r,!0),100),a=!0),o||(Pl=l);const c=be(t);let u=Object.assign({},r||F),f="function"==typeof c.filter?c.filter(n):n;c.cast&&"function"==typeof c.cast.data&&(f=c.cast.data(f)),c.cast&&"string"==typeof c.cast.data&&(f=Cl(f,c.cast.data)),c.cast&&Array.isArray(c.cast.data)&&(f=Cl(f,c.cast.data[0],!0)),kl()&&window.stagesLogging('Handle change for field "'+t+'"',P),x.default(u,t,f||void 0),u=me(u);const p={data:h.default(u,t),fieldIsDirty:!!L[t],fieldConfig:c,fieldHasFocus:!(!re||re!==t)},y=Oe("change",u);if(!c.validateOn&&Array.isArray(d)&&y.some(e=>d.indexOf(e)>-1)||c.validateOn&&Array.isArray(c.validateOn)&&y.some(e=>c.validateOn.indexOf(e)>-1)){const e=pe(t,xe(y),u,Z);i=Object.assign({},Z,e.errors),ee(i)}else if(!c.validateOn&&Array.isArray(d)&&d.indexOf("change")>-1||c.validateOn&&Array.isArray(c.validateOn)&&c.validateOn.indexOf("change")>-1||!c.validateOn&&Array.isArray(d)&&d.indexOf("throttledChange")>-1&&!a||c.validateOn&&Array.isArray(c.validateOn)&&c.validateOn.indexOf("throttledChange")>-1&&!a||!c.validateOn&&"function"==typeof d&&d(p).indexOf("change")>-1||c.validateOn&&"function"==typeof c.validateOn&&c.validateOn(p).indexOf("change")>-1||!c.validateOn&&"function"==typeof d&&d(p).indexOf("throttledChange")>-1&&!a||c.validateOn&&"function"==typeof c.validateOn&&c.validateOn(p).indexOf("throttledChange")>-1&&!a){const e=pe(t,"change",u,Z);i=Object.assign({},Z,e.errors),ee(i)}if(V&&(O.default(h.default(u,t),h.default(V,t))?void 0!==L[t]&&delete L[t]:L[t]={oldData:h.default(V,t),newData:h.default(u,t)},I(Object.keys(L).length>0),_(L)),c.clearFields&&(Array.isArray(c.clearFields)||"function"==typeof c.clearFields)){const e=Object.assign({},G);(Array.isArray(c.clearFields)?c.clearFields:c.clearFields(f,u,i)).forEach(t=>{x.default(u,t,void 0),delete e[t]}),K(e)}Array.isArray(ue)&&ue.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("change")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t)>-1&&(!c.dynamicOptions||c.dynamicOptions&&G[e.path]&&G[e.path].indexOf(h.default(u,t))>-1||!G[e.path])&&he(e.path,e.config.dynamicOptions,u)}),ve(u,i||Z,s,t)};return!1===l?null:o?o({actionProps:{handleActionClick:(e,t,n)=>{kl()&&window.stagesLogging("Handle action click",P),n&&(ve(V,ye(),s),_({}),I(!1));const r=Oe("action",F);if(Array.isArray(d)&&d.indexOf("action")>-1||Array.isArray(d)&&r.some(e=>d.indexOf(e)>-1)){t&&(W(!0),setTimeout(()=>W(!1),0));let e=t?ye(!0):{};ee(e)}setTimeout(()=>{0===Object.keys(Z).length&&e()},0)},handleUndo:()=>{if(A&&B>0){const e=B-1,t=JSON.parse(M[e]);$(e),ee(t.errors),I(t.isDirty),_(t.dirtyFields),ve(t.data,t.errors,s)}},handleRedo:()=>{if(A&&B<M.length-1){const e=B+1,t=JSON.parse(M[e]);$(e),ee(t.errors),I(t.isDirty),_(t.dirtyFields),ve(t.data,t.errors,s)}},isDisabled:c,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L,silentlyGetValidationErrors:()=>ye(!1)},fieldProps:{fields:(()=>{const e={};return ue.forEach(t=>{const n=((e,t,n)=>{if(!i[e.type]&&"subform"!==e.type||"function"==typeof e.isRendered&&!e.isRendered(n,t,F))return null;const o=Object.assign({},e);if(o.id=n,G[n])o.options=G[n];else if("function"==typeof o.options)o.options=o.options(n,t,F);else if("object"==typeof o.computedOptions){let t=h.default(r,o.computedOptions.source,[]),i=h.default(F,n);"function"==typeof o.computedOptions.filter&&(t=t.filter(o.computedOptions.filter)),"function"==typeof o.computedOptions.sort&&(t=t.sort(o.computedOptions.sort)),"function"==typeof o.computedOptions.map&&(t=t.map(o.computedOptions.map)),o.computedOptions.initWith&&Array.isArray(o.computedOptions.initWith)&&(t=o.computedOptions.initWith.concat(t)),e.isUnique&&(t=t.map(t=>{if(""===t.value)return t;const o=n.substring(0,n.lastIndexOf("["));let a=h.default(r,o,[]);return y.default(a,{[e.id]:t.value})>-1&&t.value!==i?Object.assign({},t,{disabled:!0}):t})),o.options=t,v.default(t,{value:i})||(o.value="",x.default(F,n,""))}return delete o.computedValue,delete o.computedOptions,delete o.filter,delete o.clearFields,delete o.dynamicOptions,delete o.isRendered,delete o.defaultValue,delete o.cleanUp,o.placeholder&&Array.isArray(o.placeholder)&&o.placeholder.length>1&&(void 0===Dl[n]&&(Dl[n]=o.placeholder[Math.floor(Math.random()*o.placeholder.length)]),o.placeholder=Dl[n]),"subform"!==e.type?/*#__PURE__*/p.default.createElement(i[e.type].component,Object.assign({key:n,value:(a=t,e.cast&&"function"==typeof e.cast.field?e.cast.field(a):e.cast&&"string"==typeof e.cast.field?Cl(a,e.cast.field):e.cast&&Array.isArray(e.cast.field)?Cl(a,e.cast.field[0],!0):a),initialValue:h.default(V,n),error:Z[n],isDirty:!!L[n],isDisabled:c||e.isDisabled,onChange:e=>Ee(n,e),onFocus:()=>{return oe(e=n),void ae(e);var e},onBlur:()=>(e=>{oe();const t=be(e),n=Object.assign({},F);Pl=0,kl()&&window.stagesLogging('Handle blur for field "'+e+'"',P),t.cleanUp&&"function"==typeof t.cleanUp&&h.default(n,e)&&(x.default(n,e,t.cleanUp(h.default(n,e))),ve(n,Z,s,e)),"number"==typeof t.precision&&(x.default(n,e,Number(h.default(n,e)).toFixed(t.precision)),ve(n,Z,s,e));const r={data:h.default(n,e),fieldIsDirty:!!L[e],fieldConfig:t,fieldHasFocus:!(!re||re!==e)},o=Oe("blur",n);if(!t.validateOn&&Array.isArray(d)&&o.some(e=>d.indexOf(e)>-1)||t.validateOn&&Array.isArray(t.validateOn)&&o.some(e=>t.validateOn.indexOf(e)>-1)){const t=pe(e,xe(o),n,Z);ee(Object.assign({},Z,t.errors)),ve(n,t.errors,s,e)}else if(!t.validateOn&&Array.isArray(d)&&d.indexOf("blur")>-1||t.validateOn&&Array.isArray(t.validateOn)&&t.validateOn.indexOf("blur")>-1||!t.validateOn&&"function"==typeof d&&d(r).indexOf("blur")>-1||t.validateOn&&"function"==typeof t.validateOn&&t.validateOn(r).indexOf("blur")>-1){const t=pe(e,"blur",n,Z);ee(Object.assign({},Z,t.errors)),ve(n,t.errors,s,e)}Array.isArray(ue)&&ue.forEach(e=>{e.config.dynamicOptions&&e.config.dynamicOptions.events&&e.config.dynamicOptions.events.indexOf("blur")>-1&&e.config.dynamicOptions.watchFields&&e.config.dynamicOptions.watchFields.indexOf(t.id)>-1&&he(e.config.id,e.config.dynamicOptions,n)}),(e=>{if(A){const t=[...M];t.length=B+1,t.push(S.default({data:e,isDirty:D,dirtyFields:L,errors:Z})),t.length>C&&t.shift(),N(t),$(t.length-1)}})(n)})(n)},o)):/*#__PURE__*/p.default.createElement(Il,{config:e.config,render:t=>{let{fieldProps:n}=t;/*#__PURE__*/return p.default.createElement(e.render,n)},fields:i,id:n,onChange:(e,t)=>Ee(n,e),onValidation:e=>ge(n,e),parentRunValidation:U,data:F&&h.default(F,n),isVisible:l,isDisabled:c,validateOn:d});var a})(t.config,t.data,t.path);n&&x.default(e,t.path,n)}),e})(),onCollectionAction:(e,t,n,r)=>{const o=Object.assign({},F),i=be(e),a=i&&i.min?Number(i.min):0,l=i&&i.max?Number(i.max):99999999999999;let c,u=h.default(o,e,[]);if(kl()&&window.stagesLogging('On collection action "'+e+'"',P),"add"===t&&("string"==typeof n&&i.fields[n]?l>u.length&&u.push("function"==typeof i.setInitialData?i.setInitialData(u,o,n):{__typename:n}):l>u.length&&u.push("function"==typeof i.setInitialData?i.setInitialData(u,o):{})),"remove"===t&&a<u.length&&u.splice(n,1),"move"===t&&n>-1&&r>-1){const[e]=u.splice(n,1);u.splice(r,0,e)}"sort"===t&&u.length>0&&n&&(u=m.default(u,n)),"duplicate"===t&&n>-1&&u.splice(n+1,0,Object.assign({},u[n])),x.default(o,e,u),d.indexOf("collectionAction")>-1&&(c=ye(),ee(c)),ve(o,c||ye(),s,e)},modifyConfig:(e,t,r)=>{if(n.fieldConfigs&&"function"==typeof n.fieldConfigs[t]){const o=e.split(".");let i="";o.forEach(e=>{const t=i?h.default(se,i):se;if(e.endsWith("]")){const n=e.split("["),r=y.default(t,{id:n[0]});r>-1&&(i+="["+r+"].fields")}else{const n=y.default(t,{id:e});n>-1&&(i+="["+n+"].fields")}}),""!==i&&(le.push({fields:n.fieldConfigs[t],path:i,action:r}),ce([...le]))}},data:r,interfaceState:R,errors:Z,asyncData:X,isDirty:D,focusedField:re,lastFocusedField:ie,dirtyFields:L},loading:te}):null};function Ll(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}Il.propTypes={config:Tr.object.isRequired,data:Tr.object,render:Tr.oneOfType([Tr.node,Tr.func]).isRequired,fields:Tr.object.isRequired,onChange:Tr.func,isVisible:Tr.bool,isDisabled:Tr.bool,id:Tr.oneOfType([Tr.string,Tr.number]).isRequired,onValidation:Tr.func,parentRunValidation:Tr.bool,validateOn:Tr.array,customRuleHandlers:Tr.object},Il.defaultProps={data:{},onChange:()=>{},isVisible:!0,isDisabled:!1,validateOn:["action"],customRuleHandlers:{}};const _l=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Vl=e=>{let{id:t,label:n,value:r,onChange:o,onBlur:i,onFocus:a,error:l,placeholder:c,isRequired:s,isDisabled:u,prefix:f,suffix:d,secondaryText:y,type:g,errorRenderer:h}=e;return Ll(e,_l),/*#__PURE__*/p.default.createElement("div",{id:t},n?/*#__PURE__*/p.default.createElement("label",{htmlFor:t},n,s?" *":""):null,/*#__PURE__*/p.default.createElement("div",null,f?/*#__PURE__*/p.default.createElement("span",null,f):null,/*#__PURE__*/p.default.createElement("input",{name:t,value:r||"",placeholder:c,type:g||"text",disabled:!!u,required:!!s,onChange:e=>{"function"==typeof o&&o(e.target.value)},onFocus:e=>{"function"==typeof a&&a()},onBlur:e=>{"function"==typeof i&&i()}}),d?/*#__PURE__*/p.default.createElement("span",null,d):null),y?/*#__PURE__*/p.default.createElement("div",null,y):null,l?h?h(l):/*#__PURE__*/p.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},ql=(e,t)=>!t.isRequired||""!==e&&void 0!==e,Ml=["id","label","value","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","type","errorRenderer"],Nl=["id","label","value","options","onChange","onBlur","onFocus","error","placeholder","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],Bl=["id","label","value","options","onChange","onBlur","onFocus","error","isRequired","isDisabled","prefix","suffix","secondaryText","errorRenderer"],$l=["id","label","error","isRequired","secondaryText","errorRenderer"],Ul={text:{component:Vl,isValid:ql},number:{component:Vl,isValid:ql},email:{component:Vl,isValid:ql},password:{component:Vl,isValid:ql},tel:{component:Vl,isValid:ql},time:{component:Vl,isValid:ql},date:{component:Vl,isValid:ql},checkbox:{component:e=>{let{id:t,label:n,value:r,onChange:o,onBlur:i,onFocus:a,error:l,placeholder:c,isRequired:s,isDisabled:u,prefix:f,suffix:d,secondaryText:y,type:g,errorRenderer:h}=e;return Ll(e,Ml),/*#__PURE__*/p.default.createElement("div",{id:t},n?/*#__PURE__*/p.default.createElement("label",{htmlFor:t},n,s?" *":""):null,/*#__PURE__*/p.default.createElement("div",null,f?/*#__PURE__*/p.default.createElement("span",null,f):null,/*#__PURE__*/p.default.createElement("input",{name:t,value:"1",placeholder:c,type:g,disabled:!!u,required:!!s,checked:!!r,onChange:()=>{},onClick:e=>{"function"==typeof o&&o(!!e.target.checked)},onBlur:e=>{"function"==typeof i&&i()},onFocus:e=>{"function"==typeof a&&a()}}),d?/*#__PURE__*/p.default.createElement("span",null,d):null),y?/*#__PURE__*/p.default.createElement("div",null,y):null,l?h?h(l):/*#__PURE__*/p.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},select:{component:e=>{let{id:t,label:n,value:r,options:o,onChange:i,onBlur:a,onFocus:l,error:c,placeholder:s,isRequired:u,isDisabled:f,prefix:d,suffix:y,secondaryText:g,errorRenderer:h}=e;return Ll(e,Nl),/*#__PURE__*/p.default.createElement("div",{id:t},n?/*#__PURE__*/p.default.createElement("label",{htmlFor:t},n,u?" *":""):null,/*#__PURE__*/p.default.createElement("div",null,d?/*#__PURE__*/p.default.createElement("span",null,d):null,/*#__PURE__*/p.default.createElement("select",{name:t,value:void 0===r?"":r,placeholder:s,disabled:!!f,required:!!u,onChange:e=>{"function"==typeof i&&i(e.target.value)},onBlur:e=>{"function"==typeof a&&a()},onFocus:e=>{"function"==typeof l&&l()}},o.map(e=>/*#__PURE__*/p.default.createElement("option",{value:e.value,key:e.value,disabled:!!e.disabled||null},e.text))),y?/*#__PURE__*/p.default.createElement("span",null,y):null),g?/*#__PURE__*/p.default.createElement("div",null,g):null,c?h?h(c):/*#__PURE__*/p.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},radio:{component:t=>{let{id:n,label:r,value:o,options:i,onChange:a,onBlur:l,onFocus:c,error:s,isRequired:u,isDisabled:f,prefix:d,suffix:y,secondaryText:g,errorRenderer:h}=t;return Ll(t,Bl),/*#__PURE__*/p.default.createElement("div",{id:n},r?/*#__PURE__*/p.default.createElement("label",null,r,u?" *":""):null,/*#__PURE__*/p.default.createElement("div",null,d?/*#__PURE__*/p.default.createElement("span",null,d):null,i.map(t=>/*#__PURE__*/p.default.createElement(e.Fragment,{key:n+"-"+t.value},/*#__PURE__*/p.default.createElement("input",{type:"radio",name:n,id:n+"-"+t.value,value:t.value,checked:o===t.value,disabled:!!f,onChange:()=>{},onClick:e=>{"function"==typeof a&&a(t.value)},onBlur:e=>{"function"==typeof l&&l()},onFocus:e=>{"function"==typeof c&&c()}}),/*#__PURE__*/p.default.createElement("label",{htmlFor:n+"-"+t.value},t.text)," ")),y?/*#__PURE__*/p.default.createElement("span",null,y):null),g?/*#__PURE__*/p.default.createElement("div",null,g):null,s?h?h(s):/*#__PURE__*/p.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null)},isValid:(e,t)=>!t.isRequired||""!==e&&void 0!==e},dummy:{component:e=>{let{id:t,label:n,error:r,isRequired:o,secondaryText:i,errorRenderer:a}=e;return Ll(e,$l),n||i||r?/*#__PURE__*/p.default.createElement("div",{id:t},n?/*#__PURE__*/p.default.createElement("label",{htmlFor:t},n,o?" *":""):null,i?/*#__PURE__*/p.default.createElement("div",null,i):null,r?a?a(r):/*#__PURE__*/p.default.createElement("div",{style:{color:"red"}},"Please fill out this field!"):null):null},isValid:()=>!0}};exports.Actions=e=>{let{config:t,handleActionClick:n,isDisabled:r}=e;/*#__PURE__*/return p.default.createElement(p.default.Fragment,null,t.map((e,t)=>/*#__PURE__*/p.default.createElement("button",{type:"button",onClick:()=>n(e.onClick,e.validate),key:"action-"+t,disabled:r},"primary"===e.type?/*#__PURE__*/p.default.createElement("strong",null,e.title):e.title)))},exports.Debugger=()=>{const[t,n]=e.useState({}),[r,o]=e.useState({}),[i,a]=e.useState({}),[l,c]=e.useState({}),[s,u]=e.useState(!1),f=(e,i)=>{if("string"==typeof e)r[i]||(r[i]=[]),r[i].push({action:e,time:+new Date}),o(r);else{const r=Object.assign(t,{}),o=Object.keys(r)[0];r[e.id]=e,n(Object.assign({},r)),a(e=>({key:e.key?e.key:o,tab:e.tab?e.tab:"data"}))}};return e.useEffect(()=>{"undefined"!=typeof window&&(window.stagesLogging=f)},[]),0===Object.keys(t).length?null:/*#__PURE__*/p.default.createElement("div",{style:{position:"absolute",top:"8px",right:"8px",width:"320px",padding:"8px",fontSize:"14px",color:"#333",border:"1px #bbb solid",borderRadius:"4px",background:"#fbfbfb",fontFamily:"Open Sans, Helvetica, Arial, sans"}},/*#__PURE__*/p.default.createElement("strong",{style:{lineHeight:"22px"}},"Debugger:"),/*#__PURE__*/p.default.createElement("button",{type:"button",style:{float:"right"},onClick:()=>u(!s)},s?"hide":"show"),s?Object.keys(t).map(e=>{const n=e.split("-");n.pop();let o="";return o="logs"===i.tab?r[i.key]?r[i.key].map(e=>e.time+": "+e.action).join("\n"):"":g.default(l[e]?h.default(t[i.key][i.tab],l[e]||""):t[i.key][i.tab],null,2),/*#__PURE__*/p.default.createElement("div",{key:e+"-"+i.tab},/*#__PURE__*/p.default.createElement("h3",{style:{background:"#333",color:"#fff",margin:"8px 0 0 0",padding:"2px 6px",textTransform:"capitalize",position:"relative"}},n.join(" "),":",t[e].isDirty?/*#__PURE__*/p.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"4px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"dirty"):null,Object.keys(t[e].errors).length?/*#__PURE__*/p.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"48px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"errors"):null,t[e].loading?/*#__PURE__*/p.default.createElement("span",{style:{display:"inline-block",position:"absolute",top:"5px",right:"98px",background:"#f30",color:"#fff",fontSize:"11px",padding:"1px 4px"}},"loading"):null),/*#__PURE__*/p.default.createElement("ul",{style:{listStyle:"none",display:"flex",margin:"8px 0 0 0",padding:0,gap:"24px"}},/*#__PURE__*/p.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===e&&"data"===i.tab?"#f30":"#000"},onClick:()=>a({key:e,tab:"data"})},"Data"),/*#__PURE__*/p.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===e&&"errors"===i.tab?"#f30":"#000"},onClick:()=>a({key:e,tab:"errors"})},"Errors"),/*#__PURE__*/p.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===e&&"parsedFieldConfig"===i.tab?"#f30":"#000"},onClick:()=>a({key:e,tab:"parsedFieldConfig"})},"Field Config"),/*#__PURE__*/p.default.createElement("li",{style:{cursor:"pointer",padding:0,margin:0,color:i.key===e&&"logs"===i.tab?"#f30":"#000"},onClick:()=>a({key:e,tab:"logs"})},"Logs")),/*#__PURE__*/p.default.createElement("input",{value:l[e]||"",placeholder:"your.data.filter.path",onChange:t=>{const n=Object.assign({},l);n[e]=t.target.value,c(n)},style:{width:"calc(100% - 12px)",minWidth:"calc(100% - 12px)",maxWidth:"calc(100% - 12px)",fontSize:"12px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"4px",padding:"4px",overflowX:"scroll",whiteSpace:"pre"}}),i&&i.key===e?/*#__PURE__*/p.default.createElement("textarea",{readOnly:!0,style:{width:"calc(100% - 8px)",minWidth:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)",height:"200px",fontSize:"10px",border:"1px #ccc solid",background:"#fbfbfb",marginTop:"8px",overflowX:"scroll",whiteSpace:"pre"},value:o}):null)}):null)},exports.Form=Il,exports.HashRouter=t=>{let{step:n,onChange:r,keys:o,prefix:i,hashFormat:a="#!"}=t;const[l,c]=(()=>{const[t,n]=e.useState(()=>window.location.hash),r=e.useCallback(()=>{n(window.location.hash)},[]);var o,i;o=()=>{!function(e){e&&e.addEventListener&&e.addEventListener(...[].slice.call(arguments,1))}(window,"hashchange",r)},i=()=>{!function(e){e&&e.removeEventListener&&e.removeEventListener(...[].slice.call(arguments,1))}(window,"hashchange",r)},e.useEffect(()=>(o&&o(),()=>{i&&i()}),[]);const a=e.useCallback(e=>{e!==t&&(window.location.hash=e)},[t]);return[t,a]})(),[s,u]=e.useState(!1),f=e=>o&&o[e]?o[e].key:i?i+"-"+e:e,d=()=>{if(-1!==l.indexOf(a)){const e=(e=>{const t=e.split(a);if(2===t.length){const e=t[1];return(e=>{var t=Math.floor(Number(e));return Infinity!==t&&String(t)===e&&t>=0})(e)?Number(e):y.default(o,{key:e})}return-1})(l);-1!==e&&(c(""+a+f(e)),r(e))}else c(""+a+f(n))};return e.useEffect(()=>{s&&d()},[l]),e.useEffect(()=>{s&&c(""+a+f(n))},[n]),p=()=>{d(),u(!0)},e.useEffect(()=>{p()},[]),null;var p},exports.Navigation=e=>{let{currentStep:t,onChangeStep:n,lastValidStep:r,keys:o}=e;const i=[];for(let e=0;e<o.length;e++)if(o&&o[e]&&o[e].visible){const a=o&&o[e]?o[e].key:"Step "+(e+1);i.push(t===e?/*#__PURE__*/p.default.createElement("li",{key:a,style:{textTransform:"capitalize"}},/*#__PURE__*/p.default.createElement("strong",null,a)):/*#__PURE__*/p.default.createElement("li",r>-1&&r+1<e||-1===r&&e>0?{key:a,style:{color:"#999",textTransform:"capitalize"}}:{key:a,style:{textTransform:"capitalize"},onClick:()=>n(e)},a))}/*#__PURE__*/return p.default.createElement("ul",null,i)},exports.Progression=e=>{let{stepCount:t,validSteps:n,percentage:r}=e;/*#__PURE__*/return p.default.createElement("div",null,n+" / "+t+" ("+Math.round(r)+"%)")},exports.Stages=Pr,exports.plainFields=Ul;
//# sourceMappingURL=lib.js.map
